(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{391:function(e,s,t){Promise.resolve().then(t.bind(t,3616))},3616:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return HomePage}});var a=t(7437),n=t(2265),l=t(8253),r=t(9883),i=t(8956),c=t(7972),d=t(5883),o=t(8004),m=t(1827),x=t(3021),u=t(3523),h=t(9409),g=t(6264);let Button=e=>{let{variant:s="primary",size:t="md",loading:n=!1,icon:l,children:r,className:i="",disabled:c,...d}=e,o="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]," ").concat(i);return(0,a.jsxs)("button",{className:o,disabled:c||n,...d,children:[n?(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}):l?(0,a.jsx)("span",{className:"mr-2",children:l}):null,r]})};var p=t(1981);let Input=e=>{let{label:s,error:t,helperText:n,icon:l,fullWidth:r=!1,className:i="",...c}=e,d="".concat("block px-3 py-2 border rounded-lg text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors duration-200"," ").concat(t?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"," ").concat(r?"w-full":""," ").concat(l?"pl-10":""," ").concat(i);return(0,a.jsxs)("div",{className:r?"w-full":"",children:[s&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,a.jsxs)("div",{className:"relative",children:[l&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400",children:l})}),(0,a.jsx)("input",{className:d,...c}),t&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-red-500"})})]}),t&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t}),n&&!t&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})},Card=e=>{let{children:s,className:t="",padding:n="md",hover:l=!1,onClick:r}=e,i="".concat("bg-white rounded-lg border border-gray-200 shadow-sm"," ").concat(l?"hover:shadow-md transition-shadow duration-200 cursor-pointer":""," ").concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n]," ").concat(t);return(0,a.jsx)("div",{className:i,onClick:r,children:s})},CardHeader=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"border-b border-gray-200 pb-4 mb-4 ".concat(t),children:s})},CardTitle=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(t),children:s})},CardContent=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:t,children:s})};var j=t(9036),y=t(5790),f=t(998),v=t(4527),b=t(5750),N=t(2457),w=t(6141),C=t(1738),_=t(2601);let S=_.env.NEXT_PUBLIC_API_URL||"/api";let ApiClient=class ApiClient{setToken(e){this.token=e,localStorage.setItem("rag_token",e)}clearToken(){this.token=null,localStorage.removeItem("rag_token")}async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(S).concat(e),a={...s.headers||{}};s.body instanceof FormData||(a["Content-Type"]="application/json"),this.token&&(a.Authorization="Bearer ".concat(this.token));try{let e=await fetch(t,{...s,headers:a,signal:AbortSignal.timeout(3e4)});if(!e.ok){let s="HTTP ".concat(e.status,": ").concat(e.statusText);try{let t=await e.json();t.detail?s=t.detail:t.message&&(s=t.message)}catch(e){}return 401===e.status?(this.clearToken(),s="Authentication failed. Please log in again."):403===e.status?s="Access denied. You don't have permission for this action.":404===e.status?s="Resource not found.":e.status>=500&&(s="Server error. Please try again later."),{data:null,success:!1,message:s}}let n=await e.json();return{data:n,success:!0}}catch(s){console.error("API request failed:",s);let e="Unknown error occurred";return s instanceof TypeError&&s.message.includes("fetch")?e="Connection failed. Please check your internet connection or VPN.":s instanceof DOMException&&"AbortError"===s.name?e="Request timed out. Please try again.":s instanceof Error&&(e=s.message),{data:null,success:!1,message:e}}}async login(e,s){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:s})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async getCurrentUser(){return this.request("/users/me")}async getOrganizations(){return this.request("/organizations")}async getOrganization(e){return this.request("/organizations/".concat(e))}async createOrganization(e){return this.request("/organizations",{method:"POST",body:JSON.stringify(e)})}async updateOrganization(e,s){return this.request("/organizations/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async getDomains(e){return this.request("/organizations/".concat(e,"/domains"))}async getDomain(e){return this.request("/domains/".concat(e))}async createDomain(e,s){return this.request("/organizations/".concat(e,"/domains"),{method:"POST",body:JSON.stringify(s)})}async updateDomain(e,s){return this.request("/domains/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async deleteDomain(e){return this.request("/domains/".concat(e),{method:"DELETE"})}async getDomainTemplates(){return this.request("/domain-templates")}async getDomainTemplate(e){return this.request("/domain-templates/".concat(e))}async sendMessage(e){return this.request("/chat",{method:"POST",body:JSON.stringify(e)})}async getChatSessions(e){let s=e?"/chat/sessions?domain=".concat(e):"/chat/sessions";return this.request(s)}async getChatSession(e){return this.request("/chat/sessions/".concat(e))}async createChatSession(e){return this.request("/chat/sessions",{method:"POST",body:JSON.stringify({domainId:e})})}async uploadFile(e,s){if(0===e.size)throw Error("File is empty and cannot be uploaded");let t=new FormData;return t.append("file",e),t.append("domain",s),this.request("/files/upload",{method:"POST",body:t})}async getFiles(e){let s=e?"/files?domain=".concat(e):"/files";return this.request(s)}async getFile(e){return this.request("/files/".concat(e))}async deleteFile(e){return this.request("/files/".concat(e),{method:"DELETE"})}async getProcessingStatus(e){return this.request("/files/processing-status".concat(e?"?domain=".concat(e):""))}async reindexFiles(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request("/files/reindex",{method:"POST",body:JSON.stringify({domain:e,force:s})})}async search(e){var s,t;let a={query:e.query,domain:void e.domainId,domains:e.domainId?[e.domainId]:void 0,filters:e.filters||{},mode:e.mode||"hybrid",limit:e.limit||20,offset:e.offset||0,min_confidence:(null===(s=e.filters)||void 0===s?void 0:s.confidence)||.3,include_content_types:null===(t=e.filters)||void 0===t?void 0:t.documentTypes,exclude_content_types:void 0};return this.request("/search",{method:"POST",body:JSON.stringify(a)})}async getSearchSuggestions(e,s){let t=new URLSearchParams({query:e});return s&&t.append("domain_id",s),this.request("/search/suggestions?".concat(t))}async getAnalytics(e,s){let t=new URLSearchParams;e&&t.append("domain_id",e),s&&t.append("time_range",s);let a="/analytics".concat(t.toString()?"?".concat(t):"");return this.request(a)}async getClassificationAnalytics(){return this.request("/analytics/classification")}async getRagAnalytics(){return this.request("/analytics/rag")}async getAuditAnalytics(){return this.request("/analytics/audit")}async getConnectors(e){return this.request("/domains/".concat(e,"/connectors"))}async createConnector(e,s){return this.request("/domains/".concat(e,"/connectors"),{method:"POST",body:JSON.stringify(s)})}async updateConnector(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s),{method:"PUT",body:JSON.stringify(t)})}async deleteConnector(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s),{method:"DELETE"})}async testConnector(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/test"),{method:"POST"})}async syncConnector(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/sync"),{method:"POST"})}async getHealthStatus(){return this.request("/health")}async getServiceStatus(){return this.request("/health/services")}async startWebScraping(e){return this.request("/web-scraping/start",{method:"POST",body:JSON.stringify(e)})}async getCrawlStatus(e){return this.request("/web-scraping/".concat(e,"/status"))}async previewWebScraper(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/preview"),{method:"POST"})}async testWebScraperConfig(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/test-config"),{method:"POST",body:JSON.stringify(t)})}async getWebScraperStats(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/crawl-stats"))}async updateCrawlRules(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/crawl-rules"),{method:"PUT",body:JSON.stringify(t)})}async getCrawledPages(e,s,t){let a=new URLSearchParams;(null==t?void 0:t.page)&&a.append("page",t.page.toString()),(null==t?void 0:t.page_size)&&a.append("page_size",t.page_size.toString()),(null==t?void 0:t.status_filter)&&a.append("status_filter",t.status_filter),(null==t?void 0:t.search_query)&&a.append("search_query",t.search_query);let n=a.toString(),l="/domains/".concat(e,"/connectors/").concat(s,"/crawled-pages").concat(n?"?".concat(n):"");return this.request(l)}async deleteCrawledPage(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/crawled-pages/").concat(t),{method:"DELETE"})}async validateCrawlPatterns(e){return this.request("/utils/validate-regex-patterns",{method:"POST",body:JSON.stringify({patterns:e})})}async getCrawlInsights(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/crawl-insights"))}async scheduleWebScraperCrawl(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/schedule-crawl"),{method:"POST"})}async getWebScraperPerformanceMetrics(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/performance-metrics"))}async getWebScraperOptimizationSuggestions(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/optimization-suggestions"))}async applyWebScraperOptimization(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/apply-optimization"),{method:"POST",body:JSON.stringify(t)})}async getOrganizationMembers(e){return this.request("/organizations/".concat(e,"/members"))}async inviteOrganizationMember(e,s){return this.request("/organizations/".concat(e,"/members/invite"),{method:"POST",body:JSON.stringify(s)})}async updateOrganizationMember(e,s,t){return this.request("/organizations/".concat(e,"/members/").concat(s,"?role=").concat(t),{method:"PUT"})}async removeOrganizationMember(e,s){return this.request("/organizations/".concat(e,"/members/").concat(s),{method:"DELETE"})}async updateUserProfile(e){return this.request("/users/me",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/users/me/password",{method:"PUT",body:JSON.stringify(e)})}async getUserPreferences(){return this.request("/users/me/preferences")}async updateUserPreferences(e){return this.request("/users/me/preferences",{method:"PUT",body:JSON.stringify(e)})}async getWebScraperContentAnalytics(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/content-analytics"))}async getCrawlSessionStatus(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/crawl-session-status"))}async startIntelligentCrawl(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/intelligent-crawl"),{method:"POST",body:JSON.stringify(t||{})})}async getContentQualityReport(e,s){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/content-quality-report"))}async updateEnhancedWebScraperConfig(e,s,t){return this.request("/domains/".concat(e,"/connectors/").concat(s,"/enhanced-config"),{method:"PUT",body:JSON.stringify(t)})}async getDuplicateContentAnalysis(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this.request("/domains/".concat(e,"/connectors/").concat(s,"/duplicate-analysis?threshold=").concat(t))}constructor(){this.token=null,this.token=localStorage.getItem("rag_token")}};let k=new ApiClient;var organization_OrganizationDashboard=e=>{var s;let{organization:t,onCreateDomain:c,onManageTeam:d,onViewBilling:o}=e,[m,x]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[p,_]=(0,n.useState)(null),[S,T]=(0,n.useState)(!0);(0,n.useEffect)(()=>{loadDashboardData()},[t.id]);let loadDashboardData=async()=>{T(!0);try{let[e,s]=await Promise.all([k.getDomains(t.id),k.getAnalytics()]);e.success&&x(e.data),s.success&&_(s.data)}catch(e){console.error("Failed to load dashboard data:",e)}finally{T(!1)}},getStatusColor=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"draft":return"text-yellow-600 bg-yellow-100";case"configuring":return"text-blue-600 bg-blue-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100"}},getDomainIcon=e=>{let s={support:(0,a.jsx)(j.Z,{className:"h-5 w-5"}),sales:(0,a.jsx)(y.Z,{className:"h-5 w-5"}),engineering:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),product:(0,a.jsx)(f.Z,{className:"h-5 w-5"}),general:(0,a.jsx)(i.Z,{className:"h-5 w-5"})},t=(e.domain_name||e.display_name||e.name||"").toLowerCase();return s[t]||(0,a.jsx)(i.Z,{className:"h-5 w-5"})};return S?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),(0,a.jsx)("p",{className:"text-gray-500",children:t.description||"Organization Dashboard"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(Button,{variant:"outline",onClick:d,icon:(0,a.jsx)(v.Z,{className:"h-4 w-4"}),children:"Manage Team"}),(0,a.jsx)(Button,{onClick:c,icon:(0,a.jsx)(r.Z,{className:"h-4 w-4"}),children:"Create Domain"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Domains"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.filter(e=>e.is_active).length})]})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(b.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.member_count})]})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(N.Z,{className:"h-8 w-8 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Queries"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==p?void 0:p.totalQueries.toLocaleString())||"0"})]})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(f.Z,{className:"h-8 w-8 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==p?void 0:p.activeUsers)||"0"})]})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(CardTitle,{children:"Domains"}),(0,a.jsxs)(Button,{variant:"outline",size:"sm",onClick:c,children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"New Domain"]})]})}),(0,a.jsx)(CardContent,{children:0===m.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No domains yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first domain to get started with AI-powered knowledge management."}),(0,a.jsx)(Button,{onClick:c,children:"Create Your First Domain"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color||"bg-blue-100"),children:getDomainIcon(e)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.display_name||e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(getStatusColor(e.is_active?"active":"inactive")),children:e.is_active?"active":"inactive"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),(0,a.jsx)("span",{className:"text-blue-600",children:"Domain"})]})]},e.id))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Recent Activity"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:(null==p?void 0:null===(s=p.topQueries)||void 0===s?void 0:s.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.query}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.count," queries"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[(100*e.averageConfidence).toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"confidence"})]})]},s)))||(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Quick Actions"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(Button,{variant:"outline",className:"w-full justify-start",onClick:c,icon:(0,a.jsx)(r.Z,{className:"h-4 w-4"}),children:"Create New Domain"}),(0,a.jsx)(Button,{variant:"outline",className:"w-full justify-start",onClick:d,icon:(0,a.jsx)(b.Z,{className:"h-4 w-4"}),children:"Invite Team Members"}),(0,a.jsx)(Button,{variant:"outline",className:"w-full justify-start",onClick:o,icon:(0,a.jsx)(C.Z,{className:"h-4 w-4"}),children:"View Billing & Usage"}),(0,a.jsx)(Button,{variant:"outline",className:"w-full justify-start",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4"}),children:"Organization Settings"})]})})]})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Subscription & Usage"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Current Plan"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:t.subscription_tier})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Domains Used"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[m.length," / ",t.max_domains]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[t.member_count," / ",t.max_users]})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(Button,{variant:"outline",onClick:o,children:"Manage Subscription"})})]})]})]})},T=t(2549),P=t(2442),D=t(9617),Z=t(5367),A=t(1295),organization_TeamManagement=e=>{let{organizationId:s,onClose:t}=e,[l,r]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0),[d,o]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[u,h]=(0,n.useState)("user"),[g,j]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[N,w]=(0,n.useState)(""),[C,_]=(0,n.useState)(null),[S,z]=(0,n.useState)(null),[q,F]=(0,n.useState)("checking");(0,n.useEffect)(()=>{loadMembers(),checkConnection()},[s]);let checkConnection=async()=>{try{let e=await k.getHealthStatus();F(e.success?"connected":"disconnected")}catch(e){F("disconnected")}},loadMembers=async()=>{c(!0),_(null);try{let t=await k.getOrganizationMembers(s);if(t.success)r(t.data),F("connected");else{var e;let s="string"==typeof t.message?t.message:"Failed to load team members";_(s),(null===(e=t.message)||void 0===e?void 0:e.includes("Connection failed"))&&F("disconnected")}}catch(e){console.error("Failed to load members:",e),_("Failed to load team members. Please check your connection."),F("disconnected")}finally{c(!1)}},handleInviteMember=async()=>{if(!m.trim()){_("Email is required");return}j(!0),_(null);try{let e=await k.inviteOrganizationMember(s,{email:m,role:u});if(e.success)z("Invitation sent to ".concat(m)),x(""),h("user"),o(!1);else{let s="string"==typeof e.message?e.message:"Failed to send invitation";_(s)}}catch(e){console.error("Failed to invite member:",e),_("Failed to send invitation")}finally{j(!1)}},handleUpdateRole=async(e,t)=>{try{let a=await k.updateOrganizationMember(s,e,t);if(a.success)r(s=>s.map(s=>s.id===e?{...s,role:t}:s)),f(null),z("Member role updated successfully");else{let e="string"==typeof a.message?a.message:"Failed to update member role";_(e)}}catch(e){console.error("Failed to update member:",e),_("Failed to update member role")}},handleRemoveMember=async(e,t)=>{if(confirm("Are you sure you want to remove ".concat(t," from the organization?")))try{let t=await k.removeOrganizationMember(s,e);if(t.success)r(s=>s.filter(s=>s.id!==e)),z("Member removed successfully");else{let e="string"==typeof t.message?t.message:"Failed to remove member";_(e)}}catch(e){console.error("Failed to remove member:",e),_("Failed to remove member")}},getRoleColor=e=>{switch(e){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},formatDate=e=>new Date(e).toLocaleDateString();return i?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading team members..."})]})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(b.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Team Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat("connected"===q?"bg-green-500":"disconnected"===q?"bg-red-500":"bg-yellow-500")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"connected"===q?"Connected":"disconnected"===q?"Disconnected":"Checking..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(Button,{onClick:()=>o(!0),icon:(0,a.jsx)(v.Z,{className:"h-4 w-4"}),children:"Invite Member"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(T.Z,{className:"h-6 w-6"})})]})]}),C&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-red-600 mr-3"}),(0,a.jsx)("span",{className:"text-red-800 flex-1",children:C}),"disconnected"===q&&(0,a.jsx)(Button,{size:"sm",variant:"outline",onClick:()=>{_(null),loadMembers(),checkConnection()},className:"mr-2",children:"Retry"}),(0,a.jsx)("button",{onClick:()=>_(null),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),S&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsx)("span",{className:"text-green-800",children:S}),(0,a.jsx)("button",{onClick:()=>z(null),className:"ml-auto text-green-600 hover:text-green-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[l.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-medium",children:(e.full_name||e.username||e.email).charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.full_name||e.username}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(getRoleColor(e.role)),children:e.role}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Joined ",formatDate(e.joined_at)]}),e.last_active&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Last active ",formatDate(e.last_active)]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:y===e.id?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"manager",children:"Manager"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]}),(0,a.jsx)(Button,{size:"sm",onClick:()=>handleUpdateRole(e.id,N),icon:(0,a.jsx)(P.Z,{className:"h-3 w-3"}),children:"Save"}),(0,a.jsx)(Button,{size:"sm",variant:"outline",onClick:()=>f(null),icon:(0,a.jsx)(T.Z,{className:"h-3 w-3"}),children:"Cancel"})]}):(0,a.jsx)("div",{className:"flex items-center space-x-2",children:"owner"!==e.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Button,{size:"sm",variant:"outline",onClick:()=>{f(e.id),w(e.role)},icon:(0,a.jsx)(D.Z,{className:"h-3 w-3"}),children:"Edit Role"}),(0,a.jsx)(Button,{size:"sm",variant:"outline",onClick:()=>handleRemoveMember(e.id,e.email),icon:(0,a.jsx)(Z.Z,{className:"h-3 w-3"}),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Remove"})]})})})]})},e.id)),0===l.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No team members"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Invite team members to collaborate on this organization."}),(0,a.jsx)(Button,{onClick:()=>o(!0),children:"Invite Your First Member"})]})]})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Invite Team Member"}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(T.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)(Input,{type:"email",value:m,onChange:e=>x(e.target.value),placeholder:"colleague@company.com",icon:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,a.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer - Can view content only"}),(0,a.jsx)("option",{value:"user",children:"User - Can view and interact"}),(0,a.jsx)("option",{value:"manager",children:"Manager - Can manage content"}),(0,a.jsx)("option",{value:"admin",children:"Admin - Full access"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)(Button,{onClick:handleInviteMember,disabled:g,className:"flex-1",children:g?"Sending...":"Send Invitation"}),(0,a.jsx)(Button,{variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})})},organization_OrganizationSettings=e=>{let{organization:s,onClose:t,onOrganizationUpdate:r}=e,[i,c]=(0,n.useState)("general"),[d,o]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[u,g]=(0,n.useState)(null),[j,y]=(0,n.useState)({name:s.name,description:s.description||"",website:s.website||"",industry:s.industry||""}),handleOrganizationUpdate=async()=>{if(!j.name.trim()){x("Organization name is required");return}o(!0),x(null);try{let e=await k.updateOrganization(s.id,{name:j.name,description:j.description,website:j.website,industry:j.industry});if(e.success)g("Organization updated successfully"),r(e.data);else{let s="string"==typeof e.message?e.message:"Failed to update organization";x(s)}}catch(e){console.error("Failed to update organization:",e),x("Failed to update organization")}finally{o(!1)}},f=[{id:"general",label:"General",icon:(0,a.jsx)(l.Z,{className:"h-4 w-4"})},{id:"billing",label:"Billing & Usage",icon:(0,a.jsx)(C.Z,{className:"h-4 w-4"})}];return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Organization Settings"})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(T.Z,{className:"h-6 w-6"})})]}),m&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-red-600 mr-3"}),(0,a.jsx)("span",{className:"text-red-800",children:m}),(0,a.jsx)("button",{onClick:()=>x(null),className:"ml-auto text-red-600 hover:text-red-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),u&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsx)("span",{className:"text-green-800",children:u}),(0,a.jsx)("button",{onClick:()=>g(null),className:"ml-auto text-green-600 hover:text-green-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6",children:f.map(e=>(0,a.jsxs)("button",{onClick:()=>c(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(i===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.icon,(0,a.jsx)("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["general"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Organization Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name"}),(0,a.jsx)(Input,{type:"text",value:j.name,onChange:e=>y(s=>({...s,name:e.target.value})),placeholder:"Enter organization name",icon:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:j.description,onChange:e=>y(s=>({...s,description:e.target.value})),placeholder:"Describe your organization",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,a.jsx)(Input,{type:"url",value:j.website,onChange:e=>y(s=>({...s,website:e.target.value})),placeholder:"https://yourcompany.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),(0,a.jsxs)("select",{value:j.industry,onChange:e=>y(s=>({...s,industry:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select an industry"}),(0,a.jsx)("option",{value:"technology",children:"Technology"}),(0,a.jsx)("option",{value:"healthcare",children:"Healthcare"}),(0,a.jsx)("option",{value:"finance",children:"Finance"}),(0,a.jsx)("option",{value:"education",children:"Education"}),(0,a.jsx)("option",{value:"retail",children:"Retail"}),(0,a.jsx)("option",{value:"manufacturing",children:"Manufacturing"}),(0,a.jsx)("option",{value:"consulting",children:"Consulting"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Slug"}),(0,a.jsx)(Input,{type:"text",value:s.slug,disabled:!0,className:"bg-gray-50"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Organization slug cannot be changed"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(Button,{onClick:handleOrganizationUpdate,disabled:d,children:d?"Updating...":"Update Organization"})})]}),"billing"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Plan"}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 capitalize",children:[s.subscription_tier," Plan"]}),(0,a.jsxs)("p",{className:"text-gray-500",children:["basic"===s.subscription_tier&&"Perfect for small teams","professional"===s.subscription_tier&&"Great for growing businesses","enterprise"===s.subscription_tier&&"Full-featured for large organizations"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["basic"===s.subscription_tier&&"$0","professional"===s.subscription_tier&&"$29","enterprise"===s.subscription_tier&&"$99"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"per month"})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[s.member_count," / ",s.max_users]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Domains"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[s.domain_count," / ",s.max_domains]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Storage"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["0 GB / ",s.max_storage_gb," GB"]})]})]})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Plans"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(Card,{className:"basic"===s.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Basic"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$0"}),(0,a.jsx)("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 10 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"3 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"10 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Basic support"]})]}),(0,a.jsx)(Button,{variant:"basic"===s.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"basic"===s.subscription_tier,children:"basic"===s.subscription_tier?"Current Plan":"Downgrade"})]})}),(0,a.jsx)(Card,{className:"professional"===s.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Professional"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$29"}),(0,a.jsx)("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 50 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"10 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"100 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Priority support"]})]}),(0,a.jsx)(Button,{variant:"professional"===s.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"professional"===s.subscription_tier,children:"professional"===s.subscription_tier?"Current Plan":"Upgrade"})]})}),(0,a.jsx)(Card,{className:"enterprise"===s.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Enterprise"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$99"}),(0,a.jsx)("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 1000 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"50 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"1000 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"24/7 dedicated support"]})]}),(0,a.jsx)(Button,{variant:"enterprise"===s.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"enterprise"===s.subscription_tier,children:"enterprise"===s.subscription_tier?"Current Plan":"Upgrade"})]})})]})]})]})]})]})})},z=t(5589),q=t(7216),F=t(9670),auth_UserProfile=e=>{let{user:s,onClose:t,onUserUpdate:l}=e,[r,i]=(0,n.useState)("profile"),[d,o]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[u,g]=(0,n.useState)(null),[j,y]=(0,n.useState)("checking"),[f,v]=(0,n.useState)({full_name:s.full_name||"",email:s.email||""}),[b,N]=(0,n.useState)({current_password:"",new_password:"",confirm_password:""}),[w,C]=(0,n.useState)({current:!1,new:!1,confirm:!1}),[_,S]=(0,n.useState)({theme:"light",language:"en",timezone:"UTC",notifications:{email:!0,push:!1,inApp:!0,frequency:"immediate"}});(0,n.useEffect)(()=>{loadUserPreferences(),checkConnection()},[]);let checkConnection=async()=>{try{let e=await k.getHealthStatus();y(e.success?"connected":"disconnected")}catch(e){y("disconnected")}},loadUserPreferences=async()=>{try{var e;let s=await k.getUserPreferences();s.success?(S(e=>({...e,...s.data})),y("connected")):(null===(e=s.message)||void 0===e?void 0:e.includes("Connection failed"))&&y("disconnected")}catch(e){console.error("Failed to load preferences:",e),y("disconnected")}},handleProfileUpdate=async()=>{if(!f.full_name.trim()||!f.email.trim()){x("Name and email are required");return}o(!0),x(null);try{let e=await k.updateUserProfile({full_name:f.full_name,email:f.email});if(e.success)g("Profile updated successfully"),l(e.data);else{let s="string"==typeof e.message?e.message:"Failed to update profile";x(s)}}catch(e){console.error("Failed to update profile:",e),x("Failed to update profile")}finally{o(!1)}},handlePasswordChange=async()=>{if(!b.current_password||!b.new_password){x("Current password and new password are required");return}if(b.new_password!==b.confirm_password){x("New passwords do not match");return}if(b.new_password.length<8){x("New password must be at least 8 characters long");return}o(!0),x(null);try{let e=await k.changePassword({current_password:b.current_password,new_password:b.new_password});if(e.success)g("Password changed successfully"),N({current_password:"",new_password:"",confirm_password:""});else{let s="string"==typeof e.message?e.message:"Failed to change password";x(s)}}catch(e){console.error("Failed to change password:",e),x("Failed to change password")}finally{o(!1)}},handlePreferencesUpdate=async()=>{o(!0),x(null);try{let e=await k.updateUserPreferences(_);if(e.success)g("Preferences updated successfully");else{let s="string"==typeof e.message?e.message:"Failed to update preferences";x(s)}}catch(e){console.error("Failed to update preferences:",e),x("Failed to update preferences")}finally{o(!1)}},D=[{id:"profile",label:"Profile",icon:(0,a.jsx)(c.Z,{className:"h-4 w-4"})},{id:"security",label:"Security",icon:(0,a.jsx)(z.Z,{className:"h-4 w-4"})},{id:"preferences",label:"Preferences",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4"})}];return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-medium",children:(s.full_name||s.username||s.email).charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"User Profile"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s.email})]})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(T.Z,{className:"h-6 w-6"})})]}),m&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-red-600 mr-3"}),(0,a.jsx)("span",{className:"text-red-800",children:m}),(0,a.jsx)("button",{onClick:()=>x(null),className:"ml-auto text-red-600 hover:text-red-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),u&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsx)("span",{className:"text-green-800",children:u}),(0,a.jsx)("button",{onClick:()=>g(null),className:"ml-auto text-green-600 hover:text-green-800",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6",children:D.map(e=>(0,a.jsxs)("button",{onClick:()=>i(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.icon,(0,a.jsx)("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["profile"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,a.jsx)(Input,{type:"text",value:f.full_name,onChange:e=>v(s=>({...s,full_name:e.target.value})),placeholder:"Enter your full name",icon:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)(Input,{type:"email",value:f.email,onChange:e=>v(s=>({...s,email:e.target.value})),placeholder:"Enter your email",icon:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)(Input,{type:"text",value:s.username,disabled:!0,className:"bg-gray-50"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Username cannot be changed"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(Button,{onClick:handleProfileUpdate,disabled:d,children:d?"Updating...":"Update Profile"})})]}),"security"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Input,{type:w.current?"text":"password",value:b.current_password,onChange:e=>N(s=>({...s,current_password:e.target.value})),placeholder:"Enter current password",icon:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>C(e=>({...e,current:!e.current})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w.current?(0,a.jsx)(q.Z,{className:"h-4 w-4"}):(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Input,{type:w.new?"text":"password",value:b.new_password,onChange:e=>N(s=>({...s,new_password:e.target.value})),placeholder:"Enter new password",icon:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>C(e=>({...e,new:!e.new})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w.new?(0,a.jsx)(q.Z,{className:"h-4 w-4"}):(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Input,{type:w.confirm?"text":"password",value:b.confirm_password,onChange:e=>N(s=>({...s,confirm_password:e.target.value})),placeholder:"Confirm new password",icon:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>C(e=>({...e,confirm:!e.confirm})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w.confirm?(0,a.jsx)(q.Z,{className:"h-4 w-4"}):(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:" At least 8 characters long"}),(0,a.jsx)("li",{children:" Include uppercase and lowercase letters"}),(0,a.jsx)("li",{children:" Include at least one number"}),(0,a.jsx)("li",{children:" Include at least one special character"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(Button,{onClick:handlePasswordChange,disabled:d,children:d?"Changing...":"Change Password"})})]}),"preferences"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Appearance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,a.jsx)("div",{className:"flex space-x-3",children:["light","dark","auto"].map(e=>(0,a.jsx)("button",{onClick:()=>S(s=>({...s,theme:e})),className:"px-4 py-2 rounded-lg border text-sm font-medium capitalize ".concat(_.theme===e?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,a.jsxs)("select",{value:_.language,onChange:e=>S(s=>({...s,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"es",children:"Spanish"}),(0,a.jsx)("option",{value:"fr",children:"French"}),(0,a.jsx)("option",{value:"de",children:"German"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,a.jsxs)("select",{value:_.timezone,onChange:e=>S(s=>({...s,timezone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"UTC",children:"UTC"}),(0,a.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,a.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,a.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,a.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"}),(0,a.jsx)("option",{value:"Europe/London",children:"London"}),(0,a.jsx)("option",{value:"Europe/Paris",children:"Paris"}),(0,a.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notifications"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]}),(0,a.jsx)("button",{onClick:()=>S(e=>({...e,notifications:{...e.notifications,email:!e.notifications.email}})),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(_.notifications.email?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(_.notifications.email?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"In-App Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Show notifications in the application"})]}),(0,a.jsx)("button",{onClick:()=>S(e=>({...e,notifications:{...e.notifications,inApp:!e.notifications.inApp}})),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(_.notifications.inApp?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(_.notifications.inApp?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notification Frequency"}),(0,a.jsxs)("select",{value:_.notifications.frequency,onChange:e=>S(s=>({...s,notifications:{...s.notifications,frequency:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"immediate",children:"Immediate"}),(0,a.jsx)("option",{value:"daily",children:"Daily Digest"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly Summary"}),(0,a.jsx)("option",{value:"never",children:"Never"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(Button,{onClick:handlePreferencesUpdate,disabled:d,children:d?"Saving...":"Save Preferences"})})]})]})]})})},I=t(820),U=t(1541),O=t(272),B=t(6104),E=t(4411),R=t(3067),M=t(8291),domains_DomainCreationWizard=e=>{let{organizationId:s,onComplete:t,onCancel:l}=e,[c,d]=(0,n.useState)(0),[o,m]=(0,n.useState)([]),[x,u]=(0,n.useState)({currentStep:0,basicConfig:{},dataSourceConfig:{connectors:[],syncSchedule:{frequency:"daily"},dataRetention:{retentionDays:365,autoArchive:!1,autoDelete:!1}},aiConfig:{provider:"ollama",model:"llama2",temperature:.7,maxTokens:2048,confidenceThreshold:.8,enableStreaming:!0},securityConfig:{accessControl:"private",enableAuditLogging:!0,dataEncryption:!0},isValid:!1}),[g,p]=(0,n.useState)(!1),[v,N]=(0,n.useState)([]),[w,C]=(0,n.useState)(!1),[_,S]=(0,n.useState)([""]),[D,Z]=(0,n.useState)([]),[A,z]=(0,n.useState)(!1),q=[{id:"template",title:"Choose Template",description:"Select a pre-built domain template",icon:i.Z},{id:"basic",title:"Basic Configuration",description:"Set up domain name and description",icon:h.Z},{id:"datasources",title:"Data Sources",description:"Connect external data sources",icon:I.Z},{id:"documents",title:"Upload Documents",description:"Add initial documents",icon:U.Z},{id:"ai",title:"AI Configuration",description:"Configure AI settings",icon:O.Z},{id:"permissions",title:"Permissions",description:"Set up access control",icon:b.Z},{id:"testing",title:"Testing",description:"Test your configuration",icon:B.Z},{id:"launch",title:"Launch",description:"Deploy your domain",icon:E.Z}];(0,n.useEffect)(()=>{loadTemplates()},[]);let loadTemplates=async()=>{let e=await k.getDomainTemplates();e.success&&m(e.data)},updateState=e=>{u(s=>({...s,...e}))},createDomain=async()=>{p(!0);try{var e,a,n,l,r,i,c,d,o,m,u,h,g,j,y,f,v,b,N,w,C,S,T,P,Z,A,q;let p=null===(e=x.basicConfig.name)||void 0===e?void 0:e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),F={domain_name:p,display_name:x.basicConfig.name,description:x.basicConfig.description,...(null===(a=x.template)||void 0===a?void 0:a.id)&&x.template.id.length>10?{template_id:x.template.id}:{},icon:(null===(n=x.template)||void 0===n?void 0:n.icon)||"globe",color:(null===(r=x.template)||void 0===r?void 0:null===(l=r.color)||void 0===l?void 0:l.includes("green"))?"green":(null===(c=x.template)||void 0===c?void 0:null===(i=c.color)||void 0===i?void 0:i.includes("orange"))?"orange":(null===(o=x.template)||void 0===o?void 0:null===(d=o.color)||void 0===d?void 0:d.includes("purple"))?"purple":(null===(u=x.template)||void 0===u?void 0:null===(m=u.color)||void 0===m?void 0:m.includes("pink"))?"pink":(null===(g=x.template)||void 0===g||null===(h=g.color)||void 0===h||h.includes("blue"),"blue"),settings:{aiConfig:{provider:(null===(j=x.aiConfig)||void 0===j?void 0:j.provider)||"ollama",model:(null===(y=x.aiConfig)||void 0===y?void 0:y.model)||"llama2",temperature:(null===(f=x.aiConfig)||void 0===f?void 0:f.temperature)||.7,maxTokens:(null===(v=x.aiConfig)||void 0===v?void 0:v.maxTokens)||2048,confidenceThreshold:(null===(b=x.aiConfig)||void 0===b?void 0:b.confidenceThreshold)||.8,enableStreaming:(null===(N=x.aiConfig)||void 0===N?void 0:N.enableStreaming)||!0,systemPrompt:(null===(w=x.aiConfig)||void 0===w?void 0:w.systemPrompt)||""},searchConfig:{mode:"hybrid",vectorWeight:.7,keywordWeight:.3,maxResults:20,enableFacets:!0,enableSuggestions:!0},dataSourceConfig:{connectors:(null===(C=x.dataSourceConfig)||void 0===C?void 0:C.connectors)||[],syncSchedule:(null===(S=x.dataSourceConfig)||void 0===S?void 0:S.syncSchedule)||{frequency:"daily"},dataRetention:(null===(T=x.dataSourceConfig)||void 0===T?void 0:T.dataRetention)||{retentionDays:365,autoArchive:!1,autoDelete:!1}},securityConfig:{accessControl:(null===(P=x.securityConfig)||void 0===P?void 0:P.accessControl)||"private",enableAuditLogging:(null===(Z=x.securityConfig)||void 0===Z?void 0:Z.enableAuditLogging)||!0,dataEncryption:(null===(A=x.securityConfig)||void 0===A?void 0:A.dataEncryption)||!0},uiConfig:{theme:"light",primaryColor:(null===(q=x.template)||void 0===q?void 0:q.color)||"#3B82F6",enableVoiceInput:!1,enableExport:!0}}},I=await k.createDomain(s,F);if(I.success){let e=I.data;if(D.length>0){z(!0);for(let s=0;s<D.length;s++){let t=D[s];try{let s=await k.uploadFile(t,e.id);s.success}catch(e){}}z(!1)}if(_.length>0&&_[0])try{await k.startWebScraping({urls:_.filter(e=>e.trim()),domain:e.id,max_depth:2,max_pages:100,delay:1})}catch(e){}t(e)}}catch(e){console.error("Failed to create domain:",e)}finally{p(!1)}},renderTemplateSelection=()=>{let e=o.length>0?o:[{id:"support",name:"Customer Support",description:"Help desk and customer service knowledge base",icon:"shield",color:"bg-green-100 text-green-600",category:"Support",defaultSettings:{},requiredConnectors:["jira","zendesk"]},{id:"sales",name:"Sales & Marketing",description:"Sales materials, proposals, and marketing content",icon:"trending-up",color:"bg-orange-100 text-orange-600",category:"Sales",defaultSettings:{},requiredConnectors:["hubspot","salesforce"]},{id:"engineering",name:"Engineering",description:"Technical documentation and code repositories",icon:"settings",color:"bg-purple-100 text-purple-600",category:"Engineering",defaultSettings:{},requiredConnectors:["github","confluence"]},{id:"product",name:"Product Management",description:"Product specs, roadmaps, and user research",icon:"activity",color:"bg-pink-100 text-pink-600",category:"Product",defaultSettings:{},requiredConnectors:["jira","confluence"]},{id:"general",name:"General Knowledge",description:"Company-wide information and policies",icon:"globe",color:"bg-blue-100 text-blue-600",category:"General",defaultSettings:{}},{id:"custom",name:"Custom Domain",description:"Start from scratch with custom configuration",icon:"settings",color:"bg-gray-100 text-gray-600",category:"Custom",defaultSettings:{}}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose a Domain Template"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select a pre-built template to get started quickly, or create a custom domain."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{var s;return(0,a.jsxs)("div",{onClick:()=>updateState({template:e}),className:"border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 ".concat((null===(s=x.template)||void 0===s?void 0:s.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:shadow-md"),children:[(0,a.jsxs)("div",{className:"w-12 h-12 rounded-lg ".concat(e.color," flex items-center justify-center mb-4"),children:["shield"===e.icon&&(0,a.jsx)(j.Z,{className:"h-6 w-6"}),"trending-up"===e.icon&&(0,a.jsx)(y.Z,{className:"h-6 w-6"}),"settings"===e.icon&&(0,a.jsx)(h.Z,{className:"h-6 w-6"}),"activity"===e.icon&&(0,a.jsx)(f.Z,{className:"h-6 w-6"}),"globe"===e.icon&&(0,a.jsx)(i.Z,{className:"h-6 w-6"})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),e.requiredConnectors&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.requiredConnectors.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e},e))})]},e.id)})})]})},renderBasicConfiguration=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Basic Configuration"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Set up your domain name and description."})]}),(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,a.jsx)(Input,{label:"Domain Name",placeholder:"e.g., Customer Support",value:x.basicConfig.name||"",onChange:e=>updateState({basicConfig:{...x.basicConfig,name:e.target.value}}),fullWidth:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe what this domain will be used for...",value:x.basicConfig.description||"",onChange:e=>updateState({basicConfig:{...x.basicConfig,description:e.target.value}})})]}),x.template&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Template"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded ".concat(x.template.color," flex items-center justify-center"),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:x.template.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:x.template.description})]})]})]})]})]}),renderDataSources=()=>{let e=[{type:"jira",name:"Jira",description:"Import tickets and issues",icon:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"github",name:"GitHub",description:"Import repositories and issues",icon:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"confluence",name:"Confluence",description:"Import wiki pages",icon:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"hubspot",name:"HubSpot",description:"Import CRM data",icon:(0,a.jsx)(y.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"slack",name:"Slack",description:"Import conversations",icon:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"google-drive",name:"Google Drive",description:"Import documents and folders",icon:(0,a.jsx)(i.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"web-scraper",name:"Web Scraper",description:"Crawl and index websites",icon:(0,a.jsx)(i.Z,{className:"h-5 w-5"}),needsAuth:!1}],toggleConnector=e=>{if("web-scraper"===e){C(!w);return}N(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},updateWebUrl=(e,s)=>{let t=_.map((t,a)=>a===e?s:t);S(t),updateState({...x,webUrls:t})},removeWebUrl=e=>{let s=_.filter((s,t)=>t!==e);S(s),updateState({...x,webUrls:s})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connect Data Sources"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Choose which external systems to connect to your domain."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-all duration-200 cursor-pointer ".concat(v.includes(e.type)||"web-scraper"===e.type&&w?"border-blue-500 bg-blue-50":"border-gray-200"),onClick:()=>toggleConnector(e.type),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(v.includes(e.type)||"web-scraper"===e.type&&w?"bg-blue-100":"bg-gray-100"),children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.needsAuth&&(0,a.jsx)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded",children:"Auth Required"}),(0,a.jsx)(Button,{variant:v.includes(e.type)||"web-scraper"===e.type&&w?"primary":"outline",size:"sm",onClick:s=>{s.stopPropagation(),toggleConnector(e.type)},children:v.includes(e.type)||"web-scraper"===e.type&&w?"Connected":"Connect"})]})]})},e.type))}),w&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Web Scraper Configuration"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URLs to Crawl"}),_.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(Input,{placeholder:"https://example.com",value:e,onChange:e=>updateWebUrl(s,e.target.value),fullWidth:!0}),_.length>1&&(0,a.jsx)(Button,{variant:"ghost",size:"sm",onClick:()=>removeWebUrl(s),children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]},s)),(0,a.jsxs)(Button,{variant:"outline",size:"sm",onClick:()=>{let e=[..._,""];S(e),updateState({...x,webUrls:e})},children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"Add URL"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Depth"}),(0,a.jsx)(Input,{type:"number",defaultValue:"2",min:"1",max:"5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Pages"}),(0,a.jsx)(Input,{type:"number",defaultValue:"100",min:"1",max:"1000"})]})]})]})})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Selected: ",v.length+(w?1:0)," data source(s). You can configure authentication and add more sources after creating the domain."]})})]})},renderDocumentUpload=()=>{let removeFile=e=>{let s=D.filter((s,t)=>t!==e);Z(s),updateState({...x,uploadedFiles:s})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Initial Documents"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Add some documents to get started with your knowledge base."})]}),(0,a.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files),t=[...D,...s];Z(t),updateState({...x,uploadedFiles:t})},onDragOver:e=>e.preventDefault(),children:[(0,a.jsx)(U.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"or click to browse"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.docx,.txt,.md,.json,.csv",onChange:e=>{let s=Array.from(e.target.files||[]),t=[...D,...s];Z(t),updateState({...x,uploadedFiles:t})},className:"hidden",id:"file-upload"}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,a.jsx)(Button,{variant:"outline",type:"button",children:"Choose Files"})})]}),D.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Selected Files:"}),D.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,a.jsx)("button",{onClick:()=>removeFile(s),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]},s))]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,a.jsx)("p",{children:"Supported formats: PDF, DOCX, TXT, MD, JSON, CSV"}),(0,a.jsx)("p",{children:"Maximum file size: 50MB"})]})]})]})},renderAIConfiguration=()=>{var e,s,t,n,l,r,i,c;let d=(()=>{var e;let s=(null===(e=x.template)||void 0===e?void 0:e.name.toLowerCase())||"",t={"customer support":{systemPrompt:"You are a helpful customer support AI assistant. Your role is to:\n- Provide accurate, empathetic responses to customer inquiries\n- Search through support documentation, FAQs, and knowledge base\n- Escalate complex issues to human agents when needed\n- Maintain a professional, friendly tone\n- Always prioritize customer satisfaction and resolution\n\nWhen you don't know something, admit it and offer to connect them with a human agent.",examples:["How can I reset my password?","I'm having trouble with my billing","The product isn't working as expected"]},"sales & marketing":{systemPrompt:"You are a sales and marketing AI assistant. Your role is to:\n- Help prospects understand product features and benefits\n- Provide pricing information and comparisons\n- Generate leads and qualify prospects\n- Share case studies and success stories\n- Support the sales team with research and insights\n\nAlways be helpful, informative, and focused on solving customer problems.",examples:["What are the key features of your product?","Can you show me pricing options?","Do you have case studies for my industry?"]},engineering:{systemPrompt:"You are a technical AI assistant for engineering teams. Your role is to:\n- Help with code reviews, debugging, and technical documentation\n- Search through technical specs, API docs, and code repositories\n- Provide architectural guidance and best practices\n- Assist with troubleshooting and problem-solving\n- Maintain accuracy and technical precision\n\nAlways provide code examples and technical details when relevant.",examples:["How do I implement authentication in our API?","What's the best practice for error handling?","Can you review this code snippet?"]},"product management":{systemPrompt:"You are a product management AI assistant. Your role is to:\n- Help with product roadmap planning and feature prioritization\n- Analyze user feedback and market research\n- Support product requirement documentation\n- Provide insights on user experience and product metrics\n- Assist with stakeholder communication\n\nFocus on data-driven insights and strategic thinking.",examples:["What features should we prioritize next quarter?","How do users feel about the new feature?","What are the key metrics for this product?"]},"general knowledge":{systemPrompt:"You are a general knowledge AI assistant for the organization. Your role is to:\n- Answer questions about company policies, procedures, and information\n- Help employees find relevant documents and resources\n- Provide general assistance with work-related queries\n- Maintain confidentiality and professionalism\n- Direct users to appropriate departments when needed\n\nBe helpful, accurate, and maintain a professional tone.",examples:["What's our vacation policy?","Where can I find the employee handbook?","Who should I contact about IT issues?"]}};return t[s]||t["general knowledge"]})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Configuration"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure how the AI assistant will behave in this domain."})]}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Provider"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:(null===(e=x.aiConfig)||void 0===e?void 0:e.provider)||"ollama",onChange:e=>updateState({aiConfig:{...x.aiConfig,provider:e.target.value}}),children:[(0,a.jsx)("option",{value:"ollama",children:"Ollama (Local)"}),(0,a.jsx)("option",{value:"openai",children:"OpenAI"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,a.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:(null===(s=x.aiConfig)||void 0===s?void 0:s.model)||"llama2",onChange:e=>updateState({aiConfig:{...x.aiConfig,model:e.target.value}}),children:(null===(t=x.aiConfig)||void 0===t?void 0:t.provider)==="ollama"?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"llama2",children:"Llama 2 (7B)"}),(0,a.jsx)("option",{value:"llama2:13b",children:"Llama 2 (13B)"}),(0,a.jsx)("option",{value:"codellama",children:"Code Llama"}),(0,a.jsx)("option",{value:"mistral",children:"Mistral 7B"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,a.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,a.jsx)("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(Input,{label:"Temperature",type:"number",min:"0",max:"2",step:"0.1",value:(null===(n=x.aiConfig)||void 0===n?void 0:n.temperature)||.7,onChange:e=>updateState({aiConfig:{...x.aiConfig,temperature:parseFloat(e.target.value)}}),helperText:"Controls creativity (0 = focused, 2 = creative)",fullWidth:!0}),(0,a.jsx)(Input,{label:"Confidence Threshold",type:"number",min:"0",max:"1",step:"0.1",value:(null===(l=x.aiConfig)||void 0===l?void 0:l.confidenceThreshold)||.8,onChange:e=>updateState({aiConfig:{...x.aiConfig,confidenceThreshold:parseFloat(e.target.value)}}),helperText:"Minimum confidence for responses",fullWidth:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"System Prompt"}),(0,a.jsx)(Button,{variant:"outline",size:"sm",onClick:()=>{updateState({aiConfig:{...x.aiConfig,systemPrompt:d.systemPrompt}})},children:"Use Template Example"})]}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"You are a helpful AI assistant for...",value:(null===(r=x.aiConfig)||void 0===r?void 0:r.systemPrompt)||"",onChange:e=>updateState({aiConfig:{...x.aiConfig,systemPrompt:e.target.value}})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)(CardTitle,{children:["Example Queries for ",(null===(i=x.template)||void 0===i?void 0:i.name)||"This Domain"]})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-2",children:d.examples.map((e,s)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:['"',e,'"']})},s))})})]}),(null===(c=x.aiConfig)||void 0===c?void 0:c.provider)==="ollama"&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Local Ollama Integration"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Connected to local Ollama instance"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"Benefits:"})}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[(0,a.jsx)("li",{children:"Complete data privacy - all processing stays local"}),(0,a.jsx)("li",{children:"No API costs or rate limits"}),(0,a.jsx)("li",{children:"Customizable models for your specific domain"}),(0,a.jsx)("li",{children:"Works with your RAG system for contextual responses"})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"RAG Integration:"})," Your documents will be embedded using the same model for optimal semantic search and retrieval."]})})]})})]})]})]})},renderPermissions=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Control"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure who can access this domain."})]}),(0,a.jsx)("div",{className:"max-w-md mx-auto space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Level"}),(0,a.jsx)("div",{className:"space-y-2",children:[{value:"public",label:"Public",description:"Anyone in the organization can access"},{value:"private",label:"Private",description:"Only invited users can access"},{value:"restricted",label:"Restricted",description:"Specific roles only"}].map(e=>{var s;return(0,a.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"accessControl",value:e.value,checked:(null===(s=x.securityConfig)||void 0===s?void 0:s.accessControl)===e.value,onChange:e=>updateState({securityConfig:{...x.securityConfig,accessControl:e.target.value}}),className:"mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.value)})})]})})]}),renderTesting=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Test Your Configuration"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Make sure everything is working correctly before launching."})]}),(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-4",children:[(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Domain configuration valid"})]}),(0,a.jsx)("span",{className:"text-green-600 text-sm",children:""})]})})}),(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-gray-900",children:"AI provider connection"})]}),(0,a.jsx)("span",{className:"text-green-600 text-sm",children:""})]})})}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Test Query"}),(0,a.jsx)(Input,{placeholder:"Ask a test question...",fullWidth:!0}),(0,a.jsx)(Button,{className:"mt-2",size:"sm",children:"Test AI Response"})]})]})]}),renderLaunch=()=>{var e,s;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Launch!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your domain is configured and ready to deploy."})]}),(0,a.jsx)("div",{className:"max-w-lg mx-auto",children:(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(E.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:x.basicConfig.name}),(0,a.jsx)("p",{className:"text-gray-600",children:x.basicConfig.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Template"}),(0,a.jsx)("p",{className:"font-medium",children:null===(e=x.template)||void 0===e?void 0:e.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Access"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:null===(s=x.securityConfig)||void 0===s?void 0:s.accessControl})]})]})]})})})})]})};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:q.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 ".concat(s<c?"bg-blue-600 border-blue-600 text-white":s===c?"border-blue-600 text-blue-600":"border-gray-300 text-gray-400"),children:s<c?(0,a.jsx)(P.Z,{className:"h-5 w-5"}):(0,a.jsx)(e.icon,{className:"h-5 w-5"})}),s<q.length-1&&(0,a.jsx)("div",{className:"w-12 h-0.5 mx-2 ".concat(s<c?"bg-blue-600":"bg-gray-300")})]},e.id))}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Step ",c+1," of ",q.length,": ",q[c].title]})})]}),(0,a.jsx)(Card,{className:"mb-8",children:(0,a.jsx)(CardContent,{className:"p-8",children:(()=>{switch(c){case 0:return renderTemplateSelection();case 1:return renderBasicConfiguration();case 2:return renderDataSources();case 3:return renderDocumentUpload();case 4:return renderAIConfiguration();case 5:return renderPermissions();case 6:return renderTesting();case 7:return renderLaunch();default:return null}})()})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(Button,{variant:"outline",onClick:0===c?l:()=>{c>0&&d(c-1)},icon:(0,a.jsx)(R.Z,{className:"h-4 w-4"}),children:0===c?"Cancel":"Previous"}),(0,a.jsx)("div",{className:"flex space-x-3",children:c===q.length-1?(0,a.jsx)(Button,{onClick:createDomain,loading:g,icon:(0,a.jsx)(E.Z,{className:"h-4 w-4"}),children:"Launch Domain"}):(0,a.jsx)(Button,{onClick:()=>{c<q.length-1&&d(c+1)},disabled:!(()=>{switch(c){case 0:return!!x.template;case 1:return!!(x.basicConfig.name&&x.basicConfig.description);case 2:case 3:case 4:case 5:case 6:case 7:return!0;default:return!1}})(),icon:(0,a.jsx)(M.Z,{className:"h-4 w-4"}),children:"Next"})})]})]})},L=t(6637),W=t(2176),H=t(2482),J=t(5817),G=t(6020),V=t(1754),Y=t(2455),Q=t(3711);let SourceModal=e=>{let{source:s,isOpen:t,onClose:l}=e,[r,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1);if(!t)return null;let o=s.full_content&&(s.full_content.endsWith("...")||s.full_content.length<.8*s.content_length||!s.full_content.trim().endsWith(".")&&!s.full_content.trim().endsWith("!")&&!s.full_content.trim().endsWith("?")),loadFullDocument=async()=>{d(!0);try{let e=await fetch("http://localhost:8001/sources/".concat(s.id,"/content?chunk_index=").concat(s.chunk_index),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let s=await e.json();i(s.content||s.full_content)}}catch(e){console.error("Failed to load full document content:",e)}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[85vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Confidence: ",s.confidence_score,"  ",s.word_count," words  Chunk ",s.chunk_index+1]})]}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(T.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"p-4 overflow-y-auto max-h-[70vh]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Preview"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.excerpt||s.preview})]}),s.full_content&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Content (This Chunk)"}),o&&(0,a.jsx)("button",{onClick:loadFullDocument,disabled:c,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:c?"Loading...":"Load Full Document"})]}),o&&(0,a.jsx)("div",{className:"mb-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:' This content appears to be truncated. Click "Load Full Document" to see the complete text.'}),(0,a.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg max-h-96 overflow-y-auto",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:r||s.full_content})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Domain: ",s.domain,"  Chunk: ",s.chunk_index+1,"  Length: ",s.content_length," chars"]}),s.url&&(0,a.jsxs)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Open Source"})]})]})]})})]})})};var ui_CitationText=e=>{let{content:s,sources:t=[],className:l=""}=e,[r,i]=(0,n.useState)(null),handleCitationClick=e=>{let s=t[e.sourceIndex];s&&i(s)},c=(e=>{let s;let t=[],a=/<cite\s+data-citation-id="([^"]+)"\s+data-source-index="([^"]+)">(\[(\d+)\])<\/cite>/g,n=0;for(;null!==(s=a.exec(e));)s.index>n&&t.push(e.slice(n,s.index)),t.push({citationId:s[1],sourceIndex:parseInt(s[2]),number:s[4]}),n=s.index+s[0].length;return n<e.length&&t.push(e.slice(n)),t})(s);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:l,children:c.map((e,s)=>{if("string"==typeof e)return(0,a.jsx)("span",{children:e},s);{let n=t[e.sourceIndex];return(0,a.jsxs)("button",{onClick:()=>handleCitationClick(e),className:"inline-flex items-center text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded px-1 transition-colors cursor-pointer font-medium",title:n?"Click to view: ".concat(n.title):"View source",children:["[",e.number,"]"]},s)}})}),r&&(0,a.jsx)(SourceModal,{source:r,isOpen:!!r,onClose:()=>i(null)})]})};let Modal=e=>{let{isOpen:s,onClose:t,title:l,size:r="md",children:i,className:c=""}=e;return((0,n.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&s&&t()};return s&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[s,t]),s)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"\n            relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[95vw] h-[95vh]"}[r]," \n            bg-white rounded-lg shadow-xl \n            transform transition-all\n            ").concat("full"===r?"overflow-hidden":"max-h-[90vh] overflow-y-auto","\n            ").concat(c,"\n          "),onClick:e=>e.stopPropagation(),children:[l&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:l}),(0,a.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:(0,a.jsx)(T.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsx)("div",{className:"".concat("p-6"," ").concat("full"===r?"overflow-y-auto":""),children:i}),!l&&(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:(0,a.jsx)(T.Z,{className:"h-5 w-5 text-gray-500"})})]})})]}):null};var K=t(3298),$=t(7877);let X=[{type:"jira",name:"Jira",description:"Import tickets, issues, and project data from Atlassian Jira",icon:(0,a.jsx)(h.Z,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-600",authType:"api_key",fields:[{key:"base_url",label:"Jira Base URL",type:"url",required:!0,placeholder:"https://yourcompany.atlassian.net"},{key:"username",label:"Username/Email",type:"text",required:!0,placeholder:"your-email@company.com"},{key:"api_token",label:"API Token",type:"password",required:!0,placeholder:"Your Jira API token"},{key:"project_keys",label:"Project Keys",type:"text",required:!1,placeholder:"PROJECT1,PROJECT2 (optional)"}]},{type:"github",name:"GitHub",description:"Import repositories, issues, pull requests, and documentation",icon:(0,a.jsx)(K.Z,{className:"h-5 w-5"}),color:"bg-gray-100 text-gray-600",authType:"api_key",fields:[{key:"access_token",label:"GitHub Token",type:"password",required:!0,placeholder:"ghp_xxxxxxxxxxxx"},{key:"owner",label:"Repository Owner",type:"text",required:!0,placeholder:"username or organization"},{key:"repositories",label:"Repositories",type:"text",required:!1,placeholder:"repo1,repo2 (or leave empty for all)"}]},{type:"confluence",name:"Confluence",description:"Import wiki pages, spaces, and documentation",icon:(0,a.jsx)(L.Z,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-600",authType:"api_key",fields:[{key:"base_url",label:"Confluence Base URL",type:"url",required:!0,placeholder:"https://yourcompany.atlassian.net/wiki"},{key:"username",label:"Username/Email",type:"text",required:!0,placeholder:"your-email@company.com"},{key:"api_token",label:"API Token",type:"password",required:!0,placeholder:"Your Confluence API token"},{key:"space_keys",label:"Space Keys",type:"text",required:!1,placeholder:"SPACE1,SPACE2 (optional)"}]},{type:"slack",name:"Slack",description:"Import conversations, channels, and shared files",icon:(0,a.jsx)($.Z,{className:"h-5 w-5"}),color:"bg-green-100 text-green-600",authType:"oauth",fields:[{key:"workspace_url",label:"Slack Workspace URL",type:"url",required:!0,placeholder:"https://yourworkspace.slack.com"}]},{type:"hubspot",name:"HubSpot",description:"Import CRM data, contacts, deals, and marketing content",icon:(0,a.jsx)(y.Z,{className:"h-5 w-5"}),color:"bg-orange-100 text-orange-600",authType:"api_key",fields:[{key:"api_key",label:"HubSpot API Key",type:"password",required:!0,placeholder:"Your HubSpot API key"},{key:"portal_id",label:"Portal ID",type:"text",required:!0,placeholder:"Your HubSpot Portal ID"}]},{type:"web_scraper",name:"Web Scraper",description:"Crawl and index websites automatically",icon:(0,a.jsx)(i.Z,{className:"h-5 w-5"}),color:"bg-purple-100 text-purple-600",authType:"api_key",fields:[{key:"start_urls",label:"Start URLs",type:"text",required:!0,placeholder:"https://example.com,https://docs.example.com"},{key:"max_depth",label:"Max Crawl Depth",type:"select",required:!0,options:["1","2","3","4","5"]},{key:"max_pages",label:"Max Pages",type:"select",required:!0,options:["50","100","250","500","1000"]},{key:"delay_ms",label:"Delay (ms)",type:"select",required:!0,options:["1000","2000","3000","5000"]},{key:"include_patterns",label:"Include URL Patterns (Regex)",type:"textarea",required:!1,placeholder:".*\\/docs\\/.*\n.*\\/help\\/.*"},{key:"exclude_patterns",label:"Exclude URL Patterns (Regex)",type:"textarea",required:!1,placeholder:".*\\/admin\\/.*\n.*\\.pdf$"},{key:"follow_external",label:"Follow External Links",type:"checkbox",required:!1},{key:"respect_robots",label:"Respect robots.txt",type:"checkbox",required:!1}]}],ConnectorConfigModal=e=>{let{isOpen:s,onClose:t,domainId:l,onConnectorCreated:r}=e,[i,c]=(0,n.useState)("select"),[d,o]=(0,n.useState)(null),[m,x]=(0,n.useState)(""),[u,h]=(0,n.useState)({}),[g,j]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[v,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{s&&(c("select"),o(null),x(""),h({}),f(null),b(null))},[s]);let handleTemplateSelect=e=>{o(e),x("".concat(e.name," Integration")),c("configure");let s={};e.fields.forEach(e=>{"select"===e.type&&e.options?s[e.key]=e.options[0]:s[e.key]=""}),h(s)},handleConfigChange=(e,s)=>{h(t=>({...t,[e]:s}))},handleTestConnection=async()=>{if(d){j(!0),f(null),b(null);try{d.type,d.authType;let e=d.fields.filter(e=>e.required),s=e.filter(e=>!u[e.key]);s.length>0?b({success:!1,message:"Missing required fields: ".concat(s.map(e=>e.label).join(", "))}):(b({success:!0,message:"Configuration looks good! Ready to create connector."}),c("test"))}catch(s){let e=s instanceof Error?s.message:"Failed to test connection";f(e)}finally{j(!1)}}},handleCreateConnector=async()=>{if(d){j(!0),f(null);try{let e={name:m,connector_type:d.type,auth_config:{type:d.authType,...u},sync_config:{frequency:"daily",schedule:"0 2 * * *",batch_size:100,enable_incremental_sync:!0},mapping_config:{},is_enabled:!0},s=await k.createConnector(l,e);if(s.success&&s.data)null==r||r(s.data),t();else{let e="string"==typeof s.message?s.message:"Failed to create connector";f(e)}}catch(s){let e=s instanceof Error?s.message:"Failed to create connector";f(e)}finally{j(!1)}}};return(0,a.jsx)(Modal,{isOpen:s,onClose:t,title:"Add Data Source Integration",size:"lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[y&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:y})]})}),"select"===i&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose Integration Type"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select the type of data source you want to connect."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:X.map(e=>(0,a.jsx)(Card,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:border-blue-300",onClick:()=>handleTemplateSelect(e),children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color),children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("oauth"===e.authType?"bg-green-100 text-green-700":"api_key"===e.authType?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:"oauth"===e.authType?"OAuth":"api_key"===e.authType?"API Key":"No Auth"})})]})]})})},e.type))})]}),"configure"===i&&(d?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(d.color),children:d.icon}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[d.name," Configuration"]}),(0,a.jsx)("p",{className:"text-gray-600",children:d.description})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Integration Name"}),(0,a.jsx)(Input,{value:m,onChange:e=>x(e.target.value),placeholder:"Enter a name for this integration"})]}),d.fields.map(e=>{var s;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?(0,a.jsx)("select",{value:u[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}):"textarea"===e.type?(0,a.jsx)("textarea",{value:Array.isArray(u[e.key])?u[e.key].join("\n"):u[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value.split("\n").filter(e=>e.trim())),placeholder:e.placeholder,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):"checkbox"===e.type?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:u[e.key]||!1,onChange:s=>handleConfigChange(e.key,s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["Enable ",e.label]})]}):(0,a.jsx)(Input,{type:e.type,value:u[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value),placeholder:e.placeholder,required:e.required})]},e.key)}),"oauth"===d.authType&&(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["OAuth authentication will be set up in the next step. You'll be redirected to ",d.name," to authorize access."]})]})})]})]}):null),"test"===i&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full flex items-center justify-center mb-4 ".concat((null==v?void 0:v.success)?"bg-green-100":"bg-red-100"),children:(null==v?void 0:v.success)?(0,a.jsx)(P.Z,{className:"h-6 w-6 text-green-600"}):(0,a.jsx)(p.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connection Test"}),(0,a.jsx)("p",{className:"text-sm ".concat((null==v?void 0:v.success)?"text-green-700":"text-red-700"),children:null==v?void 0:v.message})]}),(null==v?void 0:v.success)&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Sync Configuration"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Frequency:"})," Daily at 2:00 AM"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Batch Size:"})," 100 records"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Incremental Sync:"})," Enabled"]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsx)("div",{children:"select"!==i&&(0,a.jsx)(Button,{variant:"outline",onClick:()=>{"configure"===i?c("select"):"test"===i&&c("configure")},children:"Back"})}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(Button,{variant:"outline",onClick:t,children:"Cancel"}),"configure"===i&&(0,a.jsx)(Button,{onClick:handleTestConnection,loading:g,disabled:!m||!d,children:"Test Connection"}),"test"===i&&(null==v?void 0:v.success)&&(0,a.jsx)(Button,{onClick:handleCreateConnector,loading:g,children:"Create Integration"})]})]})]})})};var ee=t(4900),es=t(3008),et=t(2104),ea=t(4280);let en=(0,n.createContext)(void 0),Tabs=e=>{let{children:s,defaultValue:t,value:l,onValueChange:r,className:i=""}=e,[c,d]=(0,n.useState)(t);return(0,a.jsx)(en.Provider,{value:{activeTab:null!=l?l:c,setActiveTab:e=>{l||d(e),null==r||r(e)}},children:(0,a.jsx)("div",{className:i,children:s})})},TabsList=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"flex border-b border-gray-200 ".concat(t),children:s})},TabsTrigger=e=>{let{children:s,value:t,className:l="",disabled:r=!1}=e,i=(0,n.useContext)(en);if(!i)throw Error("TabsTrigger must be used within Tabs");let{activeTab:c,setActiveTab:d}=i,o=c===t;return(0,a.jsx)("button",{className:"".concat("px-4 py-2 text-sm font-medium border-b-2 transition-colors duration-200"," ").concat(o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," ").concat(r?"opacity-50 cursor-not-allowed":"cursor-pointer"," ").concat(l),onClick:()=>!r&&d(t),disabled:r,type:"button",children:s})},TabsContent=e=>{let{children:s,value:t,className:l=""}=e,r=(0,n.useContext)(en);if(!r)throw Error("TabsContent must be used within Tabs");let{activeTab:i}=r;return i!==t?null:(0,a.jsx)("div",{className:"mt-4 ".concat(l),children:s})},WebScraperManager=e=>{var s,t,l,r,c,d,o,m,x,u,g,y,f,v,b,C,_,S,T,P,D,Z,A,z,q,U,O,E,R,M,L,W,J,G,V,Y,Q,K,$,X,en,el;let{connector:er,domainId:ei,onConnectorUpdated:ec}=e,[ed,eo]=(0,n.useState)("overview"),[em,ex]=(0,n.useState)(!1),[eu,eh]=(0,n.useState)(null),[eg,ep]=(0,n.useState)(null),[ej,ey]=(0,n.useState)(null),[ef,ev]=(0,n.useState)(null),[eb,eN]=(0,n.useState)(null),[ew,eC]=(0,n.useState)(null),[e_,eS]=(0,n.useState)(null),[ek,eT]=(0,n.useState)({include_patterns:(null===(s=er.authConfig)||void 0===s?void 0:s.include_patterns)||[],exclude_patterns:(null===(t=er.authConfig)||void 0===t?void 0:t.exclude_patterns)||[],follow_external:(null===(l=er.authConfig)||void 0===l?void 0:l.follow_external)||!1,respect_robots:(null===(r=er.authConfig)||void 0===r?void 0:r.respect_robots)!==!1,max_file_size:(null===(c=er.authConfig)||void 0===c?void 0:c.max_file_size)||5242880,custom_user_agent:(null===(d=er.authConfig)||void 0===d?void 0:d.custom_user_agent)||"RAG-Searcher-Bot/1.0",crawl_frequency_hours:(null===(o=er.authConfig)||void 0===o?void 0:o.crawl_frequency_hours)||24,content_filters:{min_word_count:(null===(x=er.authConfig)||void 0===x?void 0:null===(m=x.content_filters)||void 0===m?void 0:m.min_word_count)||10,exclude_nav_elements:(null===(g=er.authConfig)||void 0===g?void 0:null===(u=g.content_filters)||void 0===u?void 0:u.exclude_nav_elements)!==!1,exclude_footer_elements:(null===(f=er.authConfig)||void 0===f?void 0:null===(y=f.content_filters)||void 0===y?void 0:y.exclude_footer_elements)!==!1,extract_metadata:(null===(b=er.authConfig)||void 0===b?void 0:null===(v=b.content_filters)||void 0===v?void 0:v.extract_metadata)!==!1}}),[eP,eD]=(0,n.useState)(null),[eZ,eA]=(0,n.useState)({}),[ez,eq]=(0,n.useState)(null),[eF,eI]=(0,n.useState)(null),[eU,eO]=(0,n.useState)(null),[eB,eE]=(0,n.useState)(null),[eR,eM]=(0,n.useState)({intelligent_discovery:!0,real_time_monitoring:!0,quality_threshold:.3,duplicate_threshold:.85,max_depth:(null===(C=er.authConfig)||void 0===C?void 0:C.max_depth)||2,max_pages:(null===(_=er.authConfig)||void 0===_?void 0:_.max_pages)||100}),[eL,eW]=(0,n.useState)(!1),[eH,eJ]=(0,n.useState)({intelligent_discovery:(null===(S=er.authConfig)||void 0===S?void 0:S.intelligent_discovery)!==!1,real_time_monitoring:(null===(T=er.authConfig)||void 0===T?void 0:T.real_time_monitoring)!==!1,adaptive_scheduling:(null===(P=er.authConfig)||void 0===P?void 0:P.adaptive_scheduling)!==!1,quality_threshold:(null===(D=er.authConfig)||void 0===D?void 0:D.quality_threshold)||.3,duplicate_threshold:(null===(Z=er.authConfig)||void 0===Z?void 0:Z.duplicate_threshold)||.85,max_file_size:(null===(A=er.authConfig)||void 0===A?void 0:A.max_file_size)||5242880,content_filters:{min_word_count:(null===(q=er.authConfig)||void 0===q?void 0:null===(z=q.content_filters)||void 0===z?void 0:z.min_word_count)||10,exclude_nav_elements:(null===(O=er.authConfig)||void 0===O?void 0:null===(U=O.content_filters)||void 0===U?void 0:U.exclude_nav_elements)!==!1,exclude_footer_elements:(null===(R=er.authConfig)||void 0===R?void 0:null===(E=R.content_filters)||void 0===E?void 0:E.exclude_footer_elements)!==!1,extract_metadata:(null===(L=er.authConfig)||void 0===L?void 0:null===(M=L.content_filters)||void 0===M?void 0:M.extract_metadata)!==!1},crawl_frequency_hours:(null===(W=er.authConfig)||void 0===W?void 0:W.crawl_frequency_hours)||24,custom_user_agent:(null===(J=er.authConfig)||void 0===J?void 0:J.custom_user_agent)||"RAG-Searcher-Bot/1.0"});(0,n.useEffect)(()=>{"stats"===ed?loadStats():"content"===ed?loadCrawledPages():"performance"===ed?(loadPerformanceMetrics(),loadOptimizationSuggestions()):"analytics"===ed?loadContentAnalytics():"quality"===ed?loadQualityReport():"monitoring"===ed?loadCrawlSessionStatus():"duplicates"===ed&&loadDuplicateAnalysis()},[ed]);let loadPreview=async()=>{ex(!0),eD(null);try{let e=await k.previewWebScraper(ei,er.id);e.success?eh(e.data):eD(e.message||"Failed to load preview")}catch(e){eD(e instanceof Error?e.message:"Failed to load preview")}finally{ex(!1)}},loadStats=async()=>{ex(!0),eD(null);try{let e=await k.getWebScraperStats(ei,er.id);e.success?ep(e.data):eD(e.message||"Failed to load stats")}catch(e){eD(e instanceof Error?e.message:"Failed to load stats")}finally{ex(!1)}},testConfiguration=async()=>{ex(!0),eD(null),ey(null);try{let e=await k.testWebScraperConfig(ei,er.id,{...er.authConfig,...ek});e.success?ey(e.data):eD(e.message||"Configuration test failed")}catch(e){eD(e instanceof Error?e.message:"Configuration test failed")}finally{ex(!1)}},updateCrawlRules=async()=>{ex(!0),eD(null);try{let e=await k.updateCrawlRules(ei,er.id,ek);if(e.success){let s={...er,authConfig:{...er.authConfig,...e.data.updated_rules}};null==ec||ec(s),eD("Crawl rules updated successfully!"),setTimeout(()=>eD(null),3e3)}else eD(e.message||"Failed to update crawl rules")}catch(e){eD(e instanceof Error?e.message:"Failed to update crawl rules")}finally{ex(!1)}},startSync=async()=>{ex(!0),eD(null);try{let e=await k.syncConnector(ei,er.id);e.success?(eD("Sync started successfully!"),setTimeout(()=>eD(null),3e3),"stats"===ed&&setTimeout(()=>loadStats(),2e3)):eD(e.message||"Failed to start sync")}catch(e){eD(e instanceof Error?e.message:"Failed to start sync")}finally{ex(!1)}},loadCrawledPages=async e=>{ex(!0),eD(null);try{let s=await k.getCrawledPages(ei,er.id,{page:(null==e?void 0:e.page)||eZ.page||1,page_size:20,status_filter:(null==e?void 0:e.status)||eZ.status,search_query:(null==e?void 0:e.search)||eZ.search});s.success?ev(s.data):eD(s.message||"Failed to load crawled pages")}catch(e){eD(e instanceof Error?e.message:"Failed to load crawled pages")}finally{ex(!1)}},deletePage=async e=>{if(confirm("Are you sure you want to delete this crawled page?")){ex(!0);try{let s=await k.deleteCrawledPage(ei,er.id,e);s.success?loadCrawledPages():eD(s.message||"Failed to delete page")}catch(e){eD(e instanceof Error?e.message:"Failed to delete page")}finally{ex(!1)}}},handleContentFilterChange=e=>{let s={...eZ,...e};eA(s),loadCrawledPages(s)},loadPerformanceMetrics=async()=>{ex(!0);try{let e=await k.getWebScraperPerformanceMetrics(ei,er.id);e.success?eN(e.data.metrics):eD(e.message||"Failed to load performance metrics")}catch(e){eD("Failed to load performance metrics")}finally{ex(!1)}},loadOptimizationSuggestions=async()=>{ex(!0);try{let e=await k.getWebScraperOptimizationSuggestions(ei,er.id);e.success?eC(e.data):eD(e.message||"Failed to load optimization suggestions")}catch(e){eD("Failed to load optimization suggestions")}finally{ex(!1)}},applyOptimization=async()=>{if(null==ew?void 0:ew.recommended_settings){ex(!0);try{let e=await k.applyWebScraperOptimization(ei,er.id,{recommended_settings:ew.recommended_settings});e.success?(ec&&window.location.reload(),await loadOptimizationSuggestions()):eD(e.message||"Failed to apply optimization")}catch(e){eD("Failed to apply optimization")}finally{ex(!1)}}},formatDate=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",loadContentAnalytics=async()=>{ex(!0),eD(null);try{let e=await k.getWebScraperContentAnalytics(ei,er.id);e.success?eq(e.data):eD(e.message||"Failed to load content analytics")}catch(e){eD(e instanceof Error?e.message:"Failed to load content analytics")}finally{ex(!1)}},loadCrawlSessionStatus=async()=>{ex(!0),eD(null);try{let e=await k.getCrawlSessionStatus(ei,er.id);e.success?eI(e.data):eD(e.message||"Failed to load session status")}catch(e){eD(e instanceof Error?e.message:"Failed to load session status")}finally{ex(!1)}},loadQualityReport=async()=>{ex(!0),eD(null);try{let e=await k.getContentQualityReport(ei,er.id);e.success?eO(e.data):eD(e.message||"Failed to load quality report")}catch(e){eD(e instanceof Error?e.message:"Failed to load quality report")}finally{ex(!1)}},loadDuplicateAnalysis=async()=>{ex(!0),eD(null);try{let e=await k.getDuplicateContentAnalysis(ei,er.id);e.success?eE(e.data):eD(e.message||"Failed to load duplicate analysis")}catch(e){eD(e instanceof Error?e.message:"Failed to load duplicate analysis")}finally{ex(!1)}},startIntelligentCrawl=async()=>{eW(!0),eD(null);try{let e=await k.startIntelligentCrawl(ei,er.id,eR);if(e.success){let e=setInterval(async()=>{let s=await k.getCrawlSessionStatus(ei,er.id);s.success&&(eI(s.data),"inactive"===s.data.status&&(clearInterval(e),eW(!1),loadStats(),loadCrawledPages(),loadContentAnalytics()))},5e3);setTimeout(()=>{clearInterval(e),eW(!1)},18e5)}else eD(e.message||"Failed to start intelligent crawl"),eW(!1)}catch(e){eD(e instanceof Error?e.message:"Failed to start intelligent crawl"),eW(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[eP&&(0,a.jsxs)("div",{className:"p-4 rounded-lg flex items-center space-x-3 ".concat(eP.includes("successfully")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[eP.includes("successfully")?(0,a.jsx)(es.Z,{className:"h-5 w-5"}):(0,a.jsx)(p.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:eP})]}),(0,a.jsxs)(Tabs,{value:ed,onValueChange:eo,className:"w-full",children:[(0,a.jsxs)(TabsList,{className:"grid w-full grid-cols-9",children:[(0,a.jsx)(TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(TabsTrigger,{value:"preview",children:"Preview"}),(0,a.jsx)(TabsTrigger,{value:"content",children:"Content"}),(0,a.jsx)(TabsTrigger,{value:"settings",children:"Settings"}),(0,a.jsx)(TabsTrigger,{value:"performance",children:"Performance"}),(0,a.jsx)(TabsTrigger,{value:"stats",children:"Analytics"}),(0,a.jsx)(TabsTrigger,{value:"quality",children:"Quality"}),(0,a.jsx)(TabsTrigger,{value:"monitoring",children:"Monitoring"}),(0,a.jsx)(TabsTrigger,{value:"duplicates",children:"Duplicates"})]}),(0,a.jsx)(TabsContent,{value:"overview",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Configuration"})]})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Start URLs"}),(0,a.jsx)("div",{className:"mt-1 text-sm text-gray-600",children:null===(V=er.authConfig)||void 0===V?void 0:null===(G=V.start_urls)||void 0===G?void 0:G.split(",").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(I.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate",children:e.trim()})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Crawl Settings"}),(0,a.jsxs)("div",{className:"mt-1 space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["Max Depth: ",(null===(Y=er.authConfig)||void 0===Y?void 0:Y.max_depth)||2]}),(0,a.jsxs)("div",{children:["Max Pages: ",(null===(Q=er.authConfig)||void 0===Q?void 0:Q.max_pages)||100]}),(0,a.jsxs)("div",{children:["Delay: ",(null===(K=er.authConfig)||void 0===K?void 0:K.delay_ms)||1e3,"ms"]})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(Button,{onClick:()=>{eo("preview"),loadPreview()},className:"flex items-center space-x-2 h-12",variant:"outline",children:[(0,a.jsx)(F.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Preview Crawl"})]}),(0,a.jsxs)(Button,{onClick:testConfiguration,className:"flex items-center space-x-2 h-12",variant:"outline",disabled:em,children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Test Config"})]}),(0,a.jsxs)(Button,{onClick:startSync,className:"flex items-center space-x-2 h-12",disabled:em,children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Crawl"})]})]}),ej&&(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-4 rounded-lg ".concat(ej.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:[ej.success?(0,a.jsx)(es.Z,{className:"h-5 w-5"}):(0,a.jsx)(et.Z,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:ej.success?"Configuration Valid":"Configuration Error"}),ej.result&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[ej.result.accessible_urls||0," of ",ej.result.total_urls||0," URLs accessible"]})]})]})})})]})}),(0,a.jsx)(TabsContent,{value:"preview",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Crawl Preview"}),(0,a.jsxs)(Button,{onClick:loadPreview,disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh Preview"})]})]}),em&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),eu&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eu.summary.total_discovered}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Discovered"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eu.summary.total_allowed}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Allowed"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:eu.summary.total_blocked}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Blocked"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:eu.summary.robots_blocked}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Robots.txt"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:eu.summary.external_urls}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"External"})]})})]}),(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Estimated Crawl"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[eu.preview.estimated_pages," pages in ",eu.preview.estimated_duration.replace(/(\d+\.?\d*)\s*(seconds?|minutes?|hours?)/,"$1 $2")]})]})]}),(0,a.jsxs)(Button,{onClick:startSync,disabled:em||0===eu.summary.total_allowed,className:"flex items-center space-x-2",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Crawl"})]})]})})}),(0,a.jsxs)(Tabs,{defaultValue:"allowed",className:"w-full",children:[(0,a.jsxs)(TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(TabsTrigger,{value:"allowed",children:["Allowed URLs (",eu.summary.total_allowed,")"]}),(0,a.jsxs)(TabsTrigger,{value:"blocked",children:["Blocked URLs (",eu.summary.total_blocked,")"]}),(0,a.jsxs)(TabsTrigger,{value:"robots",children:["Robots.txt (",eu.summary.robots_blocked,")"]}),(0,a.jsxs)(TabsTrigger,{value:"external",children:["External (",eu.summary.external_urls,")"]})]}),(0,a.jsx)(TabsContent,{value:"allowed",className:"mt-4",children:(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:eu.preview.allowed_urls.length>0?eu.preview.allowed_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(es.Z,{className:"h-3 w-3 text-green-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e})]},s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No allowed URLs found"})})})})}),(0,a.jsx)(TabsContent,{value:"blocked",className:"mt-4",children:(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:eu.preview.blocked_urls.length>0?eu.preview.blocked_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(et.Z,{className:"h-3 w-3 text-red-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e})]},s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No blocked URLs"})})})})}),(0,a.jsx)(TabsContent,{value:"robots",className:"mt-4",children:(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:eu.preview.robots_blocked.length>0?eu.preview.robots_blocked.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 text-orange-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e})]},s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No robots.txt restrictions"})})})})}),(0,a.jsx)(TabsContent,{value:"external",className:"mt-4",children:(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:eu.preview.external_urls.length>0?eu.preview.external_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 text-purple-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e})]},s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No external URLs found"})})})})})]})]}),!eu&&!em&&(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-8 text-center",children:[(0,a.jsx)(F.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Preview Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:'Click "Refresh Preview" to see what URLs would be crawled.'}),(0,a.jsx)(Button,{onClick:loadPreview,disabled:em,children:"Load Preview"})]})})]})}),(0,a.jsx)(TabsContent,{value:"content",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Crawled Content"}),(0,a.jsxs)(Button,{onClick:()=>loadCrawledPages(),disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]}),(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Filter"}),(0,a.jsxs)("select",{value:eZ.status||"",onChange:e=>handleContentFilterChange({status:e.target.value||void 0,page:1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"success",children:"Success"}),(0,a.jsx)("option",{value:"failed",children:"Failed"}),(0,a.jsx)("option",{value:"skipped",children:"Skipped"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Content"}),(0,a.jsx)(Input,{placeholder:"Search URLs, titles, or content...",value:eZ.search||"",onChange:e=>handleContentFilterChange({search:e.target.value||void 0,page:1}),className:"text-sm"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(Button,{onClick:()=>{eA({}),loadCrawledPages({})},variant:"outline",className:"w-full",children:"Clear Filters"})})]})})}),ef&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ef.pagination.total_count}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ef.pages.filter(e=>"success"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Successful"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:ef.pages.filter(e=>"failed"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Failed"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.round(ef.pages.reduce((e,s)=>e+s.word_count,0)/ef.pages.length)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Words"})]})})]}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-0",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"border-b bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"URL"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Title"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Words"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Last Crawled"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:ef.pages.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"max-w-xs",children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm truncate block",title:e.url,children:e.url})})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("div",{className:"font-medium text-sm truncate",title:e.title,children:e.title||"No title"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1 truncate",title:e.content_preview,children:e.content_preview})]})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("success"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status}),e.error_message&&(0,a.jsxs)("div",{className:"text-xs text-red-600 mt-1",title:e.error_message,children:[e.error_message.substring(0,50),"..."]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.word_count.toLocaleString()}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(e.last_crawled).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(Button,{size:"sm",variant:"outline",onClick:()=>deletePage(e.id),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},e.id))})]})}),0===ef.pages.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No crawled pages found"})]})}),ef.pagination.total_pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(ef.pagination.current_page-1)*ef.pagination.page_size+1," to"," ",Math.min(ef.pagination.current_page*ef.pagination.page_size,ef.pagination.total_count)," of"," ",ef.pagination.total_count," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Button,{size:"sm",variant:"outline",disabled:!ef.pagination.has_previous,onClick:()=>handleContentFilterChange({page:ef.pagination.current_page-1}),children:"Previous"}),(0,a.jsx)(Button,{size:"sm",variant:"outline",disabled:!ef.pagination.has_next,onClick:()=>handleContentFilterChange({page:ef.pagination.current_page+1}),children:"Next"})]})]})]})]})}),(0,a.jsx)(TabsContent,{value:"settings",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Advanced Configuration"}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"User Agent & Behavior"})]})}),(0,a.jsxs)(CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom User Agent"}),(0,a.jsx)(Input,{value:ek.custom_user_agent||"",onChange:e=>eT({...ek,custom_user_agent:e.target.value}),placeholder:"RAG-Searcher-Bot/1.0",className:"text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"How the crawler identifies itself to websites"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crawl Frequency (hours)"}),(0,a.jsxs)("select",{value:ek.crawl_frequency_hours||24,onChange:e=>eT({...ek,crawl_frequency_hours:parseInt(e.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:1,children:"Every hour"}),(0,a.jsx)("option",{value:6,children:"Every 6 hours"}),(0,a.jsx)("option",{value:12,children:"Every 12 hours"}),(0,a.jsx)("option",{value:24,children:"Daily"}),(0,a.jsx)("option",{value:168,children:"Weekly"})]})]})]})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Content Filtering"})]})}),(0,a.jsxs)(CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count"}),(0,a.jsx)(Input,{type:"number",value:(null===($=ek.content_filters)||void 0===$?void 0:$.min_word_count)||10,onChange:e=>eT({...ek,content_filters:{...ek.content_filters,min_word_count:parseInt(e.target.value)||10}}),className:"text-sm",min:"1",max:"1000"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Skip pages with fewer words than this"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(X=ek.content_filters)||void 0===X?void 0:X.exclude_nav_elements)!==!1,onChange:e=>eT({...ek,content_filters:{...ek.content_filters,exclude_nav_elements:e.target.checked}}),className:"rounded"}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Exclude navigation elements"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(en=ek.content_filters)||void 0===en?void 0:en.exclude_footer_elements)!==!1,onChange:e=>eT({...ek,content_filters:{...ek.content_filters,exclude_footer_elements:e.target.checked}}),className:"rounded"}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Exclude footer elements"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(el=ek.content_filters)||void 0===el?void 0:el.extract_metadata)!==!1,onChange:e=>eT({...ek,content_filters:{...ek.content_filters,extract_metadata:e.target.checked}}),className:"rounded"}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Extract page metadata"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(Button,{onClick:updateCrawlRules,disabled:em,className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Save Settings"})]})})]})}),(0,a.jsx)(TabsContent,{value:"performance",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Performance & Optimization"}),(0,a.jsxs)(Button,{onClick:()=>{loadPerformanceMetrics(),loadOptimizationSuggestions()},disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]}),eb&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eb.pages_per_second.toFixed(2)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pages/Second"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(100*eb.error_rate).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Error Rate"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[eb.avg_response_time.toFixed(2),"s"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Response"})]})})]}),ew&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Optimization Suggestions"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Optimization Score:"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[(100*ew.optimization_score).toFixed(0),"%"]})]}),ew.suggestions.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 rounded border-l-4 ".concat("high"===e.severity?"border-red-500 bg-red-50":"medium"===e.severity?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"),children:[(0,a.jsx)("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Recommended: ",e.recommended_action]})]},s)),Object.keys(ew.recommended_settings).length>0&&(0,a.jsx)(Button,{onClick:applyOptimization,disabled:em,className:"w-full",children:"Apply Optimization Settings"})]})})]})]})}),(0,a.jsx)(TabsContent,{value:"stats",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Crawl Statistics"}),(0,a.jsxs)(Button,{onClick:loadStats,disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]}),em&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),eg&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eg.crawl_stats.total_pages}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eg.crawl_stats.successful_crawls}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Successful"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:eg.crawl_stats.failed_crawls}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Failed"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[eg.crawl_stats.success_rate.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{className:"text-base",children:"Content Statistics"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Words:"}),(0,a.jsx)("span",{className:"font-medium",children:eg.crawl_stats.total_words.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Avg Words/Page:"}),(0,a.jsx)("span",{className:"font-medium",children:Math.round(eg.crawl_stats.avg_word_count).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"First Crawl:"}),(0,a.jsx)("span",{className:"font-medium",children:formatDate(eg.crawl_stats.first_crawl)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Last Crawl:"}),(0,a.jsx)("span",{className:"font-medium",children:formatDate(eg.crawl_stats.last_crawl)})]})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{className:"text-base",children:"Recent Sync Jobs"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:eg.recent_syncs.length>0?eg.recent_syncs.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["completed"===e.status?(0,a.jsx)(es.Z,{className:"h-4 w-4 text-green-600"}):"failed"===e.status?(0,a.jsx)(et.Z,{className:"h-4 w-4 text-red-600"}):(0,a.jsx)(w.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:e.status})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:formatDate(e.completed_at||e.started_at)})]},e.id)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No sync jobs yet"})})})]})]})]}),!eg&&!em&&(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-8 text-center",children:[(0,a.jsx)(N.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Statistics Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Run a crawl to see statistics and performance data."}),(0,a.jsx)(Button,{onClick:startSync,disabled:em,children:"Start First Crawl"})]})})]})}),(0,a.jsx)(TabsContent,{value:"quality",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Content Quality Report"}),(0,a.jsxs)(Button,{onClick:loadQualityReport,disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]}),eU&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eU.report.total_pages}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eU.report.average_quality_score.toFixed(2)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Quality"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:eU.report.quality_distribution.excellent}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Excellent"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:eU.report.quality_distribution.poor}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Poor Quality"})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Quality Recommendations"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-3",children:eU.report.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Action: ",e.action]})]},s))})})]}),eU.top_pages&&eU.top_pages.length>0&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Top Quality Pages"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-3",children:eU.top_pages.slice(0,10).map((e,s)=>(0,a.jsx)("div",{className:"p-3 border rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-600 truncate",children:e.url})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-bold text-green-600",children:e.quality_score.toFixed(2)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.word_count," words"]})]})]})},s))})})]})]})]})}),(0,a.jsx)(TabsContent,{value:"monitoring",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Real-Time Monitoring"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Button,{onClick:loadCrawlSessionStatus,disabled:em,variant:"outline",size:"sm",children:(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")})}),(0,a.jsxs)(Button,{onClick:startIntelligentCrawl,disabled:eL,className:"flex items-center space-x-2",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Intelligent Crawl"})]})]})]}),eF&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("active"===eF.status?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{children:"Crawl Session Status"})]})}),(0,a.jsx)(CardContent,{children:eF.session?(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pages Processed"}),(0,a.jsx)("div",{className:"text-lg font-bold",children:eF.session.pages_processed})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Success Rate"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[(100*eF.session.success_rate).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Response"}),(0,a.jsxs)("div",{className:"text-lg font-bold",children:[eF.session.avg_response_time.toFixed(2),"s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Queue Size"}),(0,a.jsx)("div",{className:"text-lg font-bold",children:eF.session.current_queue_size})]})]}):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No active crawl session"})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Intelligent Crawl Options"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Threshold"}),(0,a.jsx)(Input,{type:"number",step:"0.1",min:"0",max:"1",value:eR.quality_threshold,onChange:e=>eM({...eR,quality_threshold:parseFloat(e.target.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Pages"}),(0,a.jsx)(Input,{type:"number",min:"1",max:"1000",value:eR.max_pages,onChange:e=>eM({...eR,max_pages:parseInt(e.target.value)})})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eR.intelligent_discovery,onChange:e=>eM({...eR,intelligent_discovery:e.target.checked}),className:"rounded"}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Intelligent URL Discovery"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eR.real_time_monitoring,onChange:e=>eM({...eR,real_time_monitoring:e.target.checked}),className:"rounded"}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Real-Time Monitoring"})]})]})]})]})]})]})}),(0,a.jsx)(TabsContent,{value:"duplicates",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Duplicate Content Analysis"}),(0,a.jsxs)(Button,{onClick:loadDuplicateAnalysis,disabled:em,variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat(em?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]}),eB&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eB.analysis.total_pages}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eB.analysis.unique_pages}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Unique Pages"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:eB.analysis.exact_duplicates}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Duplicates"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[(100*eB.analysis.duplication_rate).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Duplication Rate"})]})})]}),eB.analysis.duplicate_groups.length>0&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Duplicate Groups"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:eB.analysis.duplicate_groups.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.duplicate_count," similar pages"]}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.similarity_type})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.pages.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,a.jsx)("div",{className:"text-gray-600 truncate",children:e.url})]},s)),e.pages.length>3&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",e.pages.length-3," more"]})]})]},s))})})]}),eB.recommendations.length>0&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Recommendations"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-3",children:eB.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Action: ",e.action]})]},s))})})]})]})]})})]})]})};var workspace_DomainWorkspace=e=>{let{domain:s,onEditDomain:t,onDeleteDomain:l}=e,[r,c]=(0,n.useState)("knowledge"),[d,o]=(0,n.useState)([]),[x,u]=(0,n.useState)(""),[g,p]=(0,n.useState)([]),[v,w]=(0,n.useState)({documents:!0,conversations:!0,externalData:!0}),[C,_]=(0,n.useState)([]),[S,T]=(0,n.useState)(null),[P,A]=(0,n.useState)(!1),[z,q]=(0,n.useState)(!1),[B,E]=(0,n.useState)(null),[M,Q]=(0,n.useState)(!1),K=n.useRef(null),[$,X]=(0,n.useState)(!1),[ee,es]=(0,n.useState)(null),[et,ea]=(0,n.useState)([]),[en,el]=(0,n.useState)(""),[er,ei]=(0,n.useState)(!1),[ec,ed]=(0,n.useState)(null),eo=n.useRef(null),em=[{id:"knowledge",label:"Knowledge Base",icon:L.Z,description:"Manage documents and files"},{id:"chat",label:"AI Assistant",icon:W.Z,description:"Chat with domain AI"},{id:"search",label:"Search & Discovery",icon:m.Z,description:"Advanced search capabilities"},{id:"sources",label:"Data Sources",icon:I.Z,description:"External integrations"},{id:"analytics",label:"Analytics",icon:N.Z,description:"Usage insights"},{id:"settings",label:"Settings",icon:h.Z,description:"Domain configuration"}];(0,n.useEffect)(()=>{loadWorkspaceData(),"knowledge"===r&&loadProcessingStatus()},[s.id,r]),(0,n.useEffect)(()=>{eo.current&&(eo.current.scrollTop=eo.current.scrollHeight)},[et]);let loadWorkspaceData=async()=>{A(!0);try{switch(r){case"knowledge":let t=await k.getFiles(s.id);if(t.success){var e;let s=(null===(e=t.data)||void 0===e?void 0:e.files)||[],a=s.map(e=>({...e,id:e.id,filename:e.filename,size:e.size_bytes,createdAt:e.upload_date,status:!0===e.processed?"indexed":"error"===e.processing_status?"error":"processing"}));o(a)}break;case"sources":console.log("Loading connectors for domain:",s.id);let a=await k.getConnectors(s.id);if(console.log("Connectors API response:",a),a.success&&a.data&&Array.isArray(a.data.connectors)){let e=a.data.connectors.map(e=>({id:e.id,type:e.connector_type,name:e.name,isEnabled:e.is_enabled,status:e.status,lastSync:e.last_sync_at,authConfig:e.auth_config||{},syncConfig:e.sync_config||{},mappingConfig:e.mapping_config||{}}));console.log("Mapped connectors:",e),_(e)}else console.warn("Failed to load connectors or invalid data format:",a),_([]);break;case"analytics":let n=await k.getAnalytics(s.id);n.success&&T(n.data)}}catch(e){console.error("Failed to load workspace data:",e)}finally{A(!1)}},getStatusColor=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"draft":return"text-yellow-600 bg-yellow-100";case"configuring":return"text-blue-600 bg-blue-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100"}},handleFilterChange=e=>{w(s=>({...s,[e]:!s[e]}))},handleSearch=async()=>{if(x.trim()){A(!0);try{let t=[];v.documents&&t.push("document/file","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","application/json","text/csv","application/x-yaml"),v.conversations&&t.push("chat/user","chat/assistant","conversation/session"),v.externalData&&t.push("api/jira","api/github","api/confluence","web/crawled");let a=await k.search({query:x,domainId:s.id,filters:{documentTypes:t.length>0?t:void 0},mode:"hybrid",limit:20,offset:0});if(a.success&&a.data){var e;let s=a.data;p(s.results||[]),console.log("Search completed:",{query:x,totalFound:s.total_found,resultsCount:(null===(e=s.results)||void 0===e?void 0:e.length)||0,searchTime:s.search_time_ms,filters:v})}}catch(e){console.error("Search failed:",e),p([])}finally{A(!1)}}},handleUploadClick=()=>{var e;null===(e=K.current)||void 0===e||e.click()},handleFileSelect=async e=>{let t=Array.from(e.target.files||[]);if(0!==t.length){Q(!0);try{for(let e of t){let t=await k.uploadFile(e,s.id);t.success}await loadWorkspaceData()}catch(e){console.error("File upload failed:",e)}finally{Q(!1),K.current&&(K.current.value="")}}},loadProcessingStatus=async()=>{try{let e=await k.getProcessingStatus(s.id);e.success&&es(e.data)}catch(e){console.error("Failed to load processing status:",e)}},handleReindex=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(confirm(e?"This will reindex ALL documents in this domain, including already processed ones. This may take several minutes. Continue?":"This will reindex unprocessed and failed documents. Continue?")){X(!0);try{let t=await k.reindexFiles(s.id,e);if(t.success)alert("Successfully queued ".concat(t.data.files_queued," files for reindexing. Estimated completion: ").concat(t.data.estimated_completion)),await loadWorkspaceData(),await loadProcessingStatus();else{let e="string"==typeof t.message?t.message:"Unknown error occurred";alert("Reindexing failed: ".concat(e))}}catch(e){console.error("Reindexing failed:",e),alert("Reindexing failed. Please try again.")}finally{X(!1)}}},handleSendMessage=async()=>{if(!en.trim()||er)return;let e={id:Date.now().toString(),type:"user",content:en.trim(),timestamp:new Date};ea(s=>[...s,e]),el(""),ei(!0);try{let t=await k.sendMessage({message:e.content,domainId:s.id,sessionId:ec||void 0});if(t.success){let e={id:(Date.now()+1).toString(),type:"assistant",content:t.data.text||"I received your message but couldn't generate a response.",timestamp:new Date,sources:t.data.sources||[],confidence:t.data.confidence||0};ea(s=>[...s,e])}else{let e={id:(Date.now()+1).toString(),type:"assistant",content:"Sorry, I encountered an error: ".concat("string"==typeof t.message?t.message:"Unknown error occurred"),timestamp:new Date};ea(s=>[...s,e])}}catch(s){console.error("Chat error:",s);let e={id:(Date.now()+1).toString(),type:"assistant",content:"Sorry, I'm having trouble connecting right now. Please try again.",timestamp:new Date};ea(s=>[...s,e])}finally{ei(!1)}},handleChatKeyPress=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},formatTimestamp=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),handleConnectorUpdated=e=>{_(s=>s.map(s=>s.id===e.id?e:s))},handleConnectorSelect=e=>{E(e)},handleBackToConnectors=()=>{E(null)},renderKnowledgeBase=()=>{var e,s,t,n,l,r,i,c,o;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Knowledge Base"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage documents and files for this domain"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(Button,{variant:"outline",icon:(0,a.jsx)(H.Z,{className:"h-4 w-4"}),children:"Filter"}),(0,a.jsx)(Button,{variant:"outline",icon:(0,a.jsx)(O.Z,{className:"h-4 w-4"}),onClick:()=>handleReindex(!1),loading:$,children:"Reindex Failed"}),(0,a.jsx)(Button,{variant:"outline",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),onClick:()=>handleReindex(!0),loading:$,children:"Force Reindex All"}),(0,a.jsx)(Button,{icon:(0,a.jsx)(U.Z,{className:"h-4 w-4"}),onClick:handleUploadClick,loading:M,children:"Upload Files"})]})]}),ee&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Processing Status"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Files"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(e=ee.files)||void 0===e?void 0:e.total)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Processed:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:(null===(s=ee.files)||void 0===s?void 0:s.processed)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Pending:"}),(0,a.jsx)("span",{className:"font-medium text-yellow-600",children:(null===(t=ee.files)||void 0===t?void 0:t.pending)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Failed:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:(null===(n=ee.files)||void 0===n?void 0:n.failed)||0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Embeddings"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Embeddings:"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(l=ee.embeddings)||void 0===l?void 0:l.total_embeddings)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Files with Embeddings:"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(r=ee.embeddings)||void 0===r?void 0:r.files_with_embeddings)||0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Active Jobs"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Pending Jobs:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:(null===(i=ee.processing_jobs)||void 0===i?void 0:i.pending)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Running Jobs:"}),(0,a.jsx)("span",{className:"font-medium text-orange-600",children:(null===(c=ee.processing_jobs)||void 0===c?void 0:c.running)||0})]})]})]})]}),((null===(o=ee.processing_jobs)||void 0===o?void 0:o.active)||0)>0&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-blue-600 animate-spin"}),(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:["Processing ",ee.processing_jobs.active," files in the background..."]})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Documents"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>"indexed"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Indexed"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>"processing"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Processing"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(d.reduce((e,s)=>e+(s.size||0),0)/1024/1024),"MB"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Size"})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Documents"})}),(0,a.jsx)(CardContent,{children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(L.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Upload your first document to get started."}),(0,a.jsx)(Button,{icon:(0,a.jsx)(U.Z,{className:"h-4 w-4"}),onClick:handleUploadClick,loading:M,children:"Upload Document"})]}):(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(L.Z,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.filename}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[((e.size||0)/1024).toFixed(1),"KB  ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(getStatusColor(e.status)),children:e.status}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",icon:(0,a.jsx)(F.Z,{className:"h-4 w-4"}),children:"View"}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",icon:(0,a.jsx)(J.Z,{className:"h-4 w-4"}),children:"Download"}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",icon:(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),children:"Delete"})]})]},e.id))})})]})]})},renderChat=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Chat with the domain-specific AI assistant about your uploaded documents"})]}),ec&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Session: ",ec.slice(0,8),"..."]})]}),(0,a.jsx)(Card,{className:"h-96",children:(0,a.jsxs)(CardContent,{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{ref:eo,className:"flex-1 p-4 bg-gray-50 rounded-lg mb-4 overflow-y-auto space-y-3",children:[0===et.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 h-full flex flex-col items-center justify-center",children:[(0,a.jsx)(O.Z,{className:"h-12 w-12 mx-auto mb-2"}),(0,a.jsx)("p",{className:"mb-2",children:"Start a conversation with the AI assistant"}),(0,a.jsx)("p",{className:"text-sm",children:"Ask questions about your uploaded documents, search for information, or get help with domain-specific topics."})]}):et.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-xs lg:max-w-md px-3 py-2 rounded-lg ".concat("user"===e.type?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"),children:["assistant"===e.type?(0,a.jsx)(ui_CitationText,{content:e.content,sources:e.sources,className:"text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)("span",{className:"text-xs ".concat("user"===e.type?"text-blue-100":"text-gray-500"),children:formatTimestamp(e.timestamp)}),"assistant"===e.type&&e.confidence&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"% confident"]})]}),e.sources&&e.sources.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Sources:"}),e.sources.slice(0,2).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[" ",e.title||"Document"]},s))]})]})},e.id)),er&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-white border border-gray-200 text-gray-900 max-w-xs lg:max-w-md px-3 py-2 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"text-sm",children:"AI is thinking..."})]})})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Input,{placeholder:"Ask a question about this domain...",value:en,onChange:e=>el(e.target.value),onKeyPress:handleChatKeyPress,disabled:er,fullWidth:!0}),(0,a.jsx)(Button,{onClick:handleSendMessage,disabled:er||!en.trim(),icon:(0,a.jsx)(G.Z,{className:"h-4 w-4"}),children:"Send"})]})]})})]}),renderSearch=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Search & Discovery"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Advanced search across all domain content"})]})}),(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,a.jsx)(Input,{placeholder:"Search documents, conversations, and data...",value:x,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSearch(),fullWidth:!0}),(0,a.jsx)(Button,{onClick:handleSearch,loading:P,icon:(0,a.jsx)(m.Z,{className:"h-4 w-4"}),children:"Search"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"rounded",checked:v.documents,onChange:()=>handleFilterChange("documents")}),(0,a.jsx)("span",{children:"Documents"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"rounded",checked:v.conversations,onChange:()=>handleFilterChange("conversations")}),(0,a.jsx)("span",{children:"Conversations"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"rounded",checked:v.externalData,onChange:()=>handleFilterChange("externalData")}),(0,a.jsx)("span",{children:"External Data"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Button,{variant:"ghost",size:"sm",onClick:()=>w({documents:!0,conversations:!0,externalData:!0}),children:"Select All"}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",onClick:()=>w({documents:!1,conversations:!1,externalData:!1}),children:"Clear All"})]})]})]})}),g.length>0&&(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(CardTitle,{children:["Search Results (",g.length,")"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Filters:"}),v.documents&&(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Documents"}),v.conversations&&(0,a.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Conversations"}),v.externalData&&(0,a.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded",children:"External Data"})]})]})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:g.map((e,s)=>{var t,n,l;return(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 flex-1",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 ml-4",children:[(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:(null===(t=e.metadata)||void 0===t?void 0:t.contentType)||e.type}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:[(100*e.confidence).toFixed(1),"%"]})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2 leading-relaxed",children:e.snippet}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{children:["Source: ",(null===(n=e.metadata)||void 0===n?void 0:n.domain)||"Unknown"]}),(0,a.jsxs)("span",{children:["Type: ",e.type]}),(null===(l=e.metadata)||void 0===l?void 0:l.chunk_index)!==void 0&&(0,a.jsxs)("span",{children:["Chunk: ",e.metadata.chunk_index+1]})]}),(0,a.jsxs)("span",{children:["Score: ",e.score.toFixed(3)]})]})]},"".concat(e.id,"-").concat(s))})})})]}),x&&0===g.length&&!P&&(0,a.jsx)(Card,{children:(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or check if documents are properly indexed in this domain."})]})})})]}),renderDataSources=()=>B?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(Button,{variant:"ghost",onClick:handleBackToConnectors,className:"flex items-center space-x-2",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Back to Connectors"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:B.name}),(0,a.jsxs)("p",{className:"text-gray-600 capitalize",children:[B.type," Configuration"]})]})]}),"web_scraper"===B.type?(0,a.jsx)(WebScraperManager,{connector:B,domainId:s.id,onConnectorUpdated:handleConnectorUpdated}):(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Not Available"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Advanced configuration for ",B.type," connectors is coming soon."]})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Sources"}),(0,a.jsx)("p",{className:"text-gray-600",children:"External integrations and connectors"})]}),(0,a.jsx)(Button,{icon:(0,a.jsx)(I.Z,{className:"h-4 w-4"}),onClick:()=>q(!0),children:"Add Integration"})]}),P&&(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading integrations..."})]})}),P||C&&0!==C.length?P?null:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(C||[]).map(e=>(0,a.jsx)(Card,{hover:!0,children:(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:"web_scraper"===e.type?(0,a.jsx)(i.Z,{className:"h-5 w-5"}):"jira"===e.type?(0,a.jsx)(V.Z,{className:"h-5 w-5"}):"github"===e.type?(0,a.jsx)(Y.Z,{className:"h-5 w-5"}):(0,a.jsx)(I.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e.type.replace("_"," ")})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(getStatusColor(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Last sync: ",e.lastSync?new Date(e.lastSync).toLocaleDateString():"Never"]}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",onClick:()=>handleConnectorSelect(e),children:"Configure"})]})]})},e.id))}):(0,a.jsx)(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[(0,a.jsx)(I.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No integrations yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Connect external data sources to enrich your domain."}),(0,a.jsx)(Button,{icon:(0,a.jsx)(I.Z,{className:"h-4 w-4"}),onClick:()=>q(!0),children:"Add Your First Integration"})]})})]}),renderAnalytics=()=>{var e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Usage insights and performance metrics"})]})}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.totalQueries}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Queries"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.activeUsers}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Users"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[S.averageResponseTime,"s"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Response Time"})]})}),(0,a.jsx)(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*S.successRate).toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Success Rate"})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Top Queries"})}),(0,a.jsx)(CardContent,{children:(0,a.jsx)("div",{className:"space-y-3",children:null===(e=S.topQueries)||void 0===e?void 0:e.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.query}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.count," queries"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[(100*e.averageConfidence).toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"confidence"})]})]},s))})})]})]})]})},renderSettings=()=>{var e,n,r,i;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Domain Settings"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure domain behavior and access"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(Button,{variant:"outline",onClick:t,icon:(0,a.jsx)(D.Z,{className:"h-4 w-4"}),children:"Edit Domain"}),(0,a.jsx)(Button,{variant:"danger",onClick:l,icon:(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),children:"Delete Domain"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Basic Information"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.display_name||s.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(getStatusColor(s.status)),children:s.status})]})]})})]}),(0,a.jsxs)(Card,{children:[(0,a.jsx)(CardHeader,{children:(0,a.jsx)(CardTitle,{children:"Access Control"})}),(0,a.jsx)(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Visibility"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.isPublic?"Public":"Private"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Access Level"}),(0,a.jsx)("p",{className:"text-gray-900 capitalize",children:(null===(n=s.settings)||void 0===n?void 0:null===(e=n.securityConfig)||void 0===e?void 0:e.accessControl)||"Not configured"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Audit Logging"}),(0,a.jsx)("p",{className:"text-gray-900",children:(null===(i=s.settings)||void 0===i?void 0:null===(r=i.securityConfig)||void 0===r?void 0:r.enableAuditLogging)?"Enabled":"Disabled"})]})]})})]})]})]})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("input",{ref:K,type:"file",multiple:!0,accept:".pdf,.docx,.txt,.md,.json,.csv,.yaml,.yml",onChange:handleFileSelect,className:"hidden"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(s.color||"bg-blue-100"),children:(()=>{let e={support:(0,a.jsx)(j.Z,{className:"h-6 w-6"}),sales:(0,a.jsx)(y.Z,{className:"h-6 w-6"}),engineering:(0,a.jsx)(h.Z,{className:"h-6 w-6"}),product:(0,a.jsx)(f.Z,{className:"h-6 w-6"}),general:(0,a.jsx)(i.Z,{className:"h-6 w-6"})},t=(s.domain_name||s.display_name||s.name||"").toLowerCase();return e[t]||(0,a.jsx)(i.Z,{className:"h-6 w-6"})})()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s.display_name||s.name}),(0,a.jsx)("p",{className:"text-gray-600",children:s.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(getStatusColor(s.status)),children:s.status}),(0,a.jsx)(Button,{variant:"outline",icon:(0,a.jsx)(b.Z,{className:"h-4 w-4"}),children:"Manage Access"})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:em.map(e=>(0,a.jsxs)("button",{onClick:()=>c(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.id))})}),(0,a.jsx)("div",{className:"min-h-96",children:(()=>{switch(r){case"knowledge":return renderKnowledgeBase();case"chat":return renderChat();case"search":return renderSearch();case"sources":return renderDataSources();case"analytics":return renderAnalytics();case"settings":return renderSettings();default:return null}})()}),(0,a.jsx)(ConnectorConfigModal,{isOpen:z,onClose:()=>q(!1),domainId:s.id,onConnectorCreated:e=>{_(s=>[...s,e]),q(!1)}})]})};function HomePage(){var e,s,t,g,p,j;let[y,f]=(0,n.useState)(!1),[v,b]=(0,n.useState)({currentView:"organization",domains:[],sidebarOpen:!0,loading:!1,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1});(0,n.useEffect)(()=>{let e=localStorage.getItem("rag_token");e&&(k.setToken(e),f(!0),loadUserData())},[]),(0,n.useEffect)(()=>{let handleClickOutside=e=>{v.showUserDropdown&&b(e=>({...e,showUserDropdown:!1}))};if(v.showUserDropdown)return document.addEventListener("click",handleClickOutside),()=>document.removeEventListener("click",handleClickOutside)},[v.showUserDropdown]);let loadUserData=async()=>{b(e=>({...e,loading:!0}));try{let e=await k.getCurrentUser();if(e.success){let s=e.data;b(e=>({...e,user:s}));let t=await k.getOrganizations();if(t.success&&t.data.length>0){let e=t.data[0];b(s=>({...s,organization:e}));let s=await k.getDomains(e.id);s.success&&b(e=>({...e,domains:s.data}))}else console.error("No organizations found for user. This may indicate a data issue."),console.log("Organizations response:",t),b(e=>({...e,organization:null,domains:[]}))}}catch(e){console.error("Failed to load user data:",e)}finally{b(e=>({...e,loading:!1}))}},login=async(e,s)=>{try{let t=await k.login(e,s);t.success&&(k.setToken(t.data.access_token),f(!0),loadUserData())}catch(e){console.error("Login error:",e)}},logout=()=>{k.clearToken(),f(!1),b({currentView:"organization",domains:[],sidebarOpen:!0,loading:!1,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1})},handleCreateDomain=()=>{b(e=>({...e,currentView:"create-domain"}))},handleDomainCreated=e=>{b(s=>({...s,domains:[...s.domains,e],currentView:"domain-workspace",selectedDomain:e}))},handleSelectDomain=e=>{b(s=>({...s,currentView:"domain-workspace",selectedDomain:e}))},handleBackToOrganization=()=>{b(e=>({...e,currentView:"organization",selectedDomain:void 0}))},handleManageTeam=()=>{b(e=>({...e,showTeamManagement:!0}))},handleViewBilling=()=>{b(e=>({...e,showOrganizationSettings:!0}))},handleShowUserProfile=()=>{b(e=>({...e,showUserProfile:!0}))},handleCloseModals=()=>{b(e=>({...e,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1}))};return y?v.loading&&!v.user?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"".concat(v.sidebarOpen?"w-72":"w-20"," bg-white border-r border-gray-200 transition-all duration-300 flex flex-col shadow-sm"),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-6 w-6 text-white"})}),v.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Enterprise RAG"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null===(e=v.organization)||void 0===e?void 0:e.name})]})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:handleBackToOrganization,className:"w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 group ".concat("organization"===v.currentView?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 flex-shrink-0"}),v.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3 text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Organization"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Dashboard & Settings"})]})]}),v.sidebarOpen&&(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Domains"}),(0,a.jsx)(Button,{variant:"ghost",size:"sm",onClick:handleCreateDomain,className:"h-6 w-6 p-0",children:(0,a.jsx)(r.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[v.domains.map(e=>{var s;return(0,a.jsxs)("button",{onClick:()=>handleSelectDomain(e),className:"w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 group ".concat((null===(s=v.selectedDomain)||void 0===s?void 0:s.id)===e.id?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center ".concat(e.color||"bg-gray-100"),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"ml-3 text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.display_name||e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:e.is_active?"active":"inactive"})]})]},e.id)}),0===v.domains.length&&(0,a.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"No domains yet"}),(0,a.jsx)(Button,{size:"sm",onClick:handleCreateDomain,children:"Create Domain"})]})]})]})]})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-600"})}),v.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===(s=v.user)||void 0===s?void 0:s.email}),(0,a.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:(null===(g=v.user)||void 0===g?void 0:null===(t=g.roles)||void 0===t?void 0:t[0])||"user"})]}),v.sidebarOpen&&(0,a.jsx)("button",{onClick:logout,className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>b(e=>({...e,sidebarOpen:!e.sidebarOpen})),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{children:null===(p=v.organization)||void 0===p?void 0:p.name}),v.selectedDomain&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:v.selectedDomain.display_name||v.selectedDomain.name})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 relative",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-100 rounded-lg",onClick:()=>b(e=>({...e,showUserDropdown:!e.showUserDropdown})),children:[(0,a.jsx)("div",{className:"h-6 w-6 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"h-3 w-3 text-gray-600"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(null===(j=v.user)||void 0===j?void 0:j.email)||"User"}),(0,a.jsx)(u.Z,{className:"h-4 w-4"})]}),v.showUserDropdown&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsxs)("button",{onClick:()=>{handleShowUserProfile(),b(e=>({...e,showUserDropdown:!1}))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Profile Settings"})]}),(0,a.jsx)("hr",{className:"my-1"}),(0,a.jsxs)("button",{onClick:()=>{logout(),b(e=>({...e,showUserDropdown:!1}))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Sign Out"})]})]})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(()=>{if(!v.organization)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Organization Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't seem to be a member of any organization yet."}),(0,a.jsx)(Button,{onClick:()=>window.location.reload(),className:"mr-2",children:"Refresh"}),(0,a.jsx)(Button,{variant:"ghost",onClick:logout,children:"Sign Out"})]})});switch(v.currentView){case"organization":return(0,a.jsx)(organization_OrganizationDashboard,{organization:v.organization,onCreateDomain:handleCreateDomain,onManageTeam:handleManageTeam,onViewBilling:handleViewBilling});case"create-domain":return(0,a.jsx)(domains_DomainCreationWizard,{organizationId:v.organization.id,onComplete:handleDomainCreated,onCancel:handleBackToOrganization});case"domain-workspace":return v.selectedDomain?(0,a.jsx)(workspace_DomainWorkspace,{domain:v.selectedDomain,onEditDomain:()=>{},onDeleteDomain:()=>{}}):null;default:return null}})()})]}),v.showTeamManagement&&v.organization&&(0,a.jsx)(organization_TeamManagement,{organizationId:v.organization.id,onClose:handleCloseModals}),v.showOrganizationSettings&&v.organization&&(0,a.jsx)(organization_OrganizationSettings,{organization:v.organization,onClose:handleCloseModals,onOrganizationUpdate:e=>{b(s=>({...s,organization:e}))}}),v.showUserProfile&&v.user&&(0,a.jsx)(auth_UserProfile,{user:v.user,onClose:handleCloseModals,onUserUpdate:e=>{b(s=>({...s,user:e}))}})]}):(0,a.jsx)(LoginForm,{onLogin:login})}function LoginForm(e){let{onLogin:s}=e,[t,r]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),handleSubmit=async e=>{e.preventDefault(),o(!0),h("");try{if(m){let e=await k.register({email:t,password:i});if(e.success)await s(t,i);else{let s="string"==typeof e.message?e.message:"Registration failed";h(s)}}else await s(t,i)}catch(s){console.error("Authentication error:",s);let e=m?"Registration failed":"Login failed";h(e)}finally{o(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,a.jsx)(Card,{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Enterprise RAG"}),(0,a.jsx)("p",{className:"text-gray-600",children:m?"Create your account to get started":"AI-Powered Knowledge Management"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 text-center",children:m?"Create Account":"Sign In"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 text-center mt-1",children:m?"Enter your email and password to create your account":"Enter your credentials to access your workspace"})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[u&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:u})}),(0,a.jsx)(Input,{label:m?"Email Address":"Email",type:"email",value:t,onChange:e=>r(e.target.value),placeholder:m?"Enter your work email":"Enter your email",autoComplete:"email",fullWidth:!0,required:!0}),(0,a.jsx)(Input,{label:m?"Create Password":"Password",type:"password",value:i,onChange:e=>c(e.target.value),placeholder:m?"Create a secure password":"Enter your password",autoComplete:m?"new-password":"current-password",fullWidth:!0,required:!0}),(0,a.jsx)(Button,{type:"submit",loading:d,className:"w-full",children:m?"Create Account":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:()=>{x(!m),h(""),r(""),c("")},className:"text-sm text-blue-600 hover:text-blue-500",children:m?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})})}}},function(e){e.O(0,[792,971,472,744],function(){return e(e.s=391)}),_N_E=e.O()}]);