(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},7839:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=t(7096),n=t(6132),r=t(7284),l=t.n(r),i=t(2564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8203)),"/mnt/lun-demoapps/rag_chat/frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9113)),"/mnt/lun-demoapps/rag_chat/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/mnt/lun-demoapps/rag_chat/frontend/src/app/page.tsx"],m="/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1907:(e,s,t)=>{Promise.resolve().then(t.bind(t,5477))},5477:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>HomePage});var a=t(784),n=t(9885),r=t.n(n),l=t(3482),i=t(2385),c=t(6078),d=t(3680),o=t(92),m=t(7382),x=t(9518),h=t(3514),u=t(9458),g=t(5987),p=t(87);let Button=({variant:e="primary",size:s="md",loading:t=!1,icon:n,children:r,className:l="",disabled:i,...c})=>{let d=`inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]} ${l}`;return(0,a.jsxs)("button",{className:d,disabled:i||t,...c,children:[t?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):n?a.jsx("span",{className:"mr-2",children:n}):null,r]})};var j=t(1831);let Input=({label:e,error:s,helperText:t,icon:n,fullWidth:r=!1,className:l="",...i})=>{let c=`block px-3 py-2 border rounded-lg text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors duration-200 ${s?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} ${r?"w-full":""} ${n?"pl-10":""} ${l}`;return(0,a.jsxs)("div",{className:r?"w-full":"",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,a.jsxs)("div",{className:"relative",children:[n&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-400",children:n})}),a.jsx("input",{className:c,...i}),s&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx(j.Z,{className:"h-5 w-5 text-red-500"})})]}),s&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),t&&!s&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},Card=({children:e,className:s="",padding:t="md",hover:n=!1,onClick:r})=>{let l=`bg-white rounded-lg border border-gray-200 shadow-sm ${n?"hover:shadow-md transition-shadow duration-200 cursor-pointer":""} ${{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[t]} ${s}`;return a.jsx("div",{className:l,onClick:r,children:e})},CardHeader=({children:e,className:s=""})=>a.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${s}`,children:e}),CardTitle=({children:e,className:s=""})=>a.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${s}`,children:e}),CardContent=({children:e,className:s=""})=>a.jsx("div",{className:s,children:e});var y=t(4901),f=t(7),b=t(9815),N=t(7018),v=t(1672),w=t(5256),C=t(5441),_=t(8260);let S=process.env.NEXT_PUBLIC_API_URL||"/api";let ApiClient=class ApiClient{constructor(){this.token=null}setToken(e){this.token=e}clearToken(){this.token=null}async request(e,s={}){let t=`${S}${e}`,a={...s.headers||{}};s.body instanceof FormData||(a["Content-Type"]="application/json"),this.token&&(a.Authorization=`Bearer ${this.token}`);try{let e=await fetch(t,{...s,headers:a,signal:AbortSignal.timeout(3e4)});if(!e.ok){let s=`HTTP ${e.status}: ${e.statusText}`;try{let t=await e.json();t.detail?s=t.detail:t.message&&(s=t.message)}catch{}return 401===e.status?(this.clearToken(),s="Authentication failed. Please log in again."):403===e.status?s="Access denied. You don't have permission for this action.":404===e.status?s="Resource not found.":e.status>=500&&(s="Server error. Please try again later."),{data:null,success:!1,message:s}}let n=await e.json();return{data:n,success:!0}}catch(s){console.error("API request failed:",s);let e="Unknown error occurred";return s instanceof TypeError&&s.message.includes("fetch")?e="Connection failed. Please check your internet connection or VPN.":s instanceof DOMException&&"AbortError"===s.name?e="Request timed out. Please try again.":s instanceof Error&&(e=s.message),{data:null,success:!1,message:e}}}async login(e,s){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:s})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async getCurrentUser(){return this.request("/users/me")}async getOrganizations(){return this.request("/organizations")}async getOrganization(e){return this.request(`/organizations/${e}`)}async createOrganization(e){return this.request("/organizations",{method:"POST",body:JSON.stringify(e)})}async updateOrganization(e,s){return this.request(`/organizations/${e}`,{method:"PUT",body:JSON.stringify(s)})}async getDomains(e){return this.request(`/organizations/${e}/domains`)}async getDomain(e){return this.request(`/domains/${e}`)}async createDomain(e,s){return this.request(`/organizations/${e}/domains`,{method:"POST",body:JSON.stringify(s)})}async updateDomain(e,s){return this.request(`/domains/${e}`,{method:"PUT",body:JSON.stringify(s)})}async deleteDomain(e){return this.request(`/domains/${e}`,{method:"DELETE"})}async getDomainTemplates(){return this.request("/domain-templates")}async getDomainTemplate(e){return this.request(`/domain-templates/${e}`)}async sendMessage(e){return this.request("/chat",{method:"POST",body:JSON.stringify(e)})}async getChatSessions(e){let s=e?`/chat/sessions?domain=${e}`:"/chat/sessions";return this.request(s)}async getChatSession(e){return this.request(`/chat/sessions/${e}`)}async createChatSession(e){return this.request("/chat/sessions",{method:"POST",body:JSON.stringify({domainId:e})})}async uploadFile(e,s){if(0===e.size)throw Error("File is empty and cannot be uploaded");let t=new FormData;return t.append("file",e),t.append("domain",s),this.request("/files/upload",{method:"POST",body:t})}async getFiles(e){let s=e?`/files?domain=${e}`:"/files";return this.request(s)}async getFile(e){return this.request(`/files/${e}`)}async deleteFile(e){return this.request(`/files/${e}`,{method:"DELETE"})}async getProcessingStatus(e){let s=e?`?domain=${e}`:"";return this.request(`/files/processing-status${s}`)}async reindexFiles(e,s=!1){return this.request("/files/reindex",{method:"POST",body:JSON.stringify({domain:e,force:s})})}async search(e){let s={query:e.query,domain:void e.domainId,domains:e.domainId?[e.domainId]:void 0,filters:e.filters||{},mode:e.mode||"hybrid",limit:e.limit||20,offset:e.offset||0,min_confidence:e.filters?.confidence||.3,include_content_types:e.filters?.documentTypes,exclude_content_types:void 0};return this.request("/search",{method:"POST",body:JSON.stringify(s)})}async getSearchSuggestions(e,s){let t=new URLSearchParams({query:e});return s&&t.append("domain_id",s),this.request(`/search/suggestions?${t}`)}async getAnalytics(e,s){let t=new URLSearchParams;e&&t.append("domain_id",e),s&&t.append("time_range",s);let a=`/analytics${t.toString()?`?${t}`:""}`;return this.request(a)}async getClassificationAnalytics(){return this.request("/analytics/classification")}async getRagAnalytics(){return this.request("/analytics/rag")}async getAuditAnalytics(){return this.request("/analytics/audit")}async getConnectors(e){return this.request(`/domains/${e}/connectors`)}async createConnector(e,s){return this.request(`/domains/${e}/connectors`,{method:"POST",body:JSON.stringify(s)})}async updateConnector(e,s,t){return this.request(`/domains/${e}/connectors/${s}`,{method:"PUT",body:JSON.stringify(t)})}async deleteConnector(e,s){return this.request(`/domains/${e}/connectors/${s}`,{method:"DELETE"})}async testConnector(e,s){return this.request(`/domains/${e}/connectors/${s}/test`,{method:"POST"})}async syncConnector(e,s){return this.request(`/domains/${e}/connectors/${s}/sync`,{method:"POST"})}async getHealthStatus(){return this.request("/health")}async getServiceStatus(){return this.request("/health/services")}async startWebScraping(e){return this.request("/web-scraping/start",{method:"POST",body:JSON.stringify(e)})}async getCrawlStatus(e){return this.request(`/web-scraping/${e}/status`)}async previewWebScraper(e,s){return this.request(`/domains/${e}/connectors/${s}/preview`,{method:"POST"})}async testWebScraperConfig(e,s,t){return this.request(`/domains/${e}/connectors/${s}/test-config`,{method:"POST",body:JSON.stringify(t)})}async getWebScraperStats(e,s){return this.request(`/domains/${e}/connectors/${s}/crawl-stats`)}async updateCrawlRules(e,s,t){return this.request(`/domains/${e}/connectors/${s}/crawl-rules`,{method:"PUT",body:JSON.stringify(t)})}async getCrawledPages(e,s,t){let a=new URLSearchParams;t?.page&&a.append("page",t.page.toString()),t?.page_size&&a.append("page_size",t.page_size.toString()),t?.status_filter&&a.append("status_filter",t.status_filter),t?.search_query&&a.append("search_query",t.search_query);let n=a.toString(),r=`/domains/${e}/connectors/${s}/crawled-pages${n?`?${n}`:""}`;return this.request(r)}async deleteCrawledPage(e,s,t){return this.request(`/domains/${e}/connectors/${s}/crawled-pages/${t}`,{method:"DELETE"})}async validateCrawlPatterns(e){return this.request("/utils/validate-regex-patterns",{method:"POST",body:JSON.stringify({patterns:e})})}async getCrawlInsights(e,s){return this.request(`/domains/${e}/connectors/${s}/crawl-insights`)}async scheduleWebScraperCrawl(e,s){return this.request(`/domains/${e}/connectors/${s}/schedule-crawl`,{method:"POST"})}async getWebScraperPerformanceMetrics(e,s){return this.request(`/domains/${e}/connectors/${s}/performance-metrics`)}async getWebScraperOptimizationSuggestions(e,s){return this.request(`/domains/${e}/connectors/${s}/optimization-suggestions`)}async applyWebScraperOptimization(e,s,t){return this.request(`/domains/${e}/connectors/${s}/apply-optimization`,{method:"POST",body:JSON.stringify(t)})}async getOrganizationMembers(e){return this.request(`/organizations/${e}/members`)}async inviteOrganizationMember(e,s){return this.request(`/organizations/${e}/members/invite`,{method:"POST",body:JSON.stringify(s)})}async updateOrganizationMember(e,s,t){return this.request(`/organizations/${e}/members/${s}?role=${t}`,{method:"PUT"})}async removeOrganizationMember(e,s){return this.request(`/organizations/${e}/members/${s}`,{method:"DELETE"})}async updateUserProfile(e){return this.request("/users/me",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e){return this.request("/users/me/password",{method:"PUT",body:JSON.stringify(e)})}async getUserPreferences(){return this.request("/users/me/preferences")}async updateUserPreferences(e){return this.request("/users/me/preferences",{method:"PUT",body:JSON.stringify(e)})}async getWebScraperContentAnalytics(e,s){return this.request(`/domains/${e}/connectors/${s}/content-analytics`)}async getCrawlSessionStatus(e,s){return this.request(`/domains/${e}/connectors/${s}/crawl-session-status`)}async startIntelligentCrawl(e,s,t){return this.request(`/domains/${e}/connectors/${s}/intelligent-crawl`,{method:"POST",body:JSON.stringify(t||{})})}async getContentQualityReport(e,s){return this.request(`/domains/${e}/connectors/${s}/content-quality-report`)}async updateEnhancedWebScraperConfig(e,s,t){return this.request(`/domains/${e}/connectors/${s}/enhanced-config`,{method:"PUT",body:JSON.stringify(t)})}async getDuplicateContentAnalysis(e,s,t=.8){return this.request(`/domains/${e}/connectors/${s}/duplicate-analysis?threshold=${t}`)}};let k=new ApiClient,organization_OrganizationDashboard=({organization:e,onCreateDomain:s,onManageTeam:t,onViewBilling:r})=>{let[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)([]),[h,u]=(0,n.useState)(null),[p,j]=(0,n.useState)(!0);(0,n.useEffect)(()=>{loadDashboardData()},[e.id]);let loadDashboardData=async()=>{j(!0);try{let[s,t]=await Promise.all([k.getDomains(e.id),k.getAnalytics()]);s.success&&o(s.data),t.success&&u(t.data)}catch(e){console.error("Failed to load dashboard data:",e)}finally{j(!1)}},getStatusColor=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"draft":return"text-yellow-600 bg-yellow-100";case"configuring":return"text-blue-600 bg-blue-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100"}},getDomainIcon=e=>{let s={support:a.jsx(y.Z,{className:"h-5 w-5"}),sales:a.jsx(f.Z,{className:"h-5 w-5"}),engineering:a.jsx(g.Z,{className:"h-5 w-5"}),product:a.jsx(b.Z,{className:"h-5 w-5"}),general:a.jsx(c.Z,{className:"h-5 w-5"})},t=(e.domain_name||e.display_name||e.name||"").toLowerCase();return s[t]||a.jsx(c.Z,{className:"h-5 w-5"})};return p?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(l.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name}),a.jsx("p",{className:"text-gray-500",children:e.description||"Organization Dashboard"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx(Button,{variant:"outline",onClick:t,icon:a.jsx(N.Z,{className:"h-4 w-4"}),children:"Manage Team"}),a.jsx(Button,{onClick:s,icon:a.jsx(i.Z,{className:"h-4 w-4"}),children:"Create Domain"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(c.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Domains"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>e.is_active).length})]})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(v.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.member_count})]})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(w.Z,{className:"h-8 w-8 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Queries"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.totalQueries.toLocaleString()||"0"})]})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(b.Z,{className:"h-8 w-8 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.activeUsers||"0"})]})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(CardTitle,{children:"Domains"}),(0,a.jsxs)(Button,{variant:"outline",size:"sm",onClick:s,children:[a.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"New Domain"]})]})}),a.jsx(CardContent,{children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No domains yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first domain to get started with AI-powered knowledge management."}),a.jsx(Button,{onClick:s,children:"Create Your First Domain"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${e.color||"bg-blue-100"}`,children:getDomainIcon(e)}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.display_name||e.name}),a.jsx("p",{className:"text-sm text-gray-500",children:e.description})]})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(e.is_active?"active":"inactive")}`,children:e.is_active?"active":"inactive"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[a.jsx(C.Z,{className:"h-4 w-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),a.jsx("span",{className:"text-blue-600",children:"Domain"})]})]},e.id))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Recent Activity"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-4",children:h?.topQueries?.slice(0,5).map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.query}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e.count," queries"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-900",children:[(100*e.averageConfidence).toFixed(1),"%"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"confidence"})]})]},s))||a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Quick Actions"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(Button,{variant:"outline",className:"w-full justify-start",onClick:s,icon:a.jsx(i.Z,{className:"h-4 w-4"}),children:"Create New Domain"}),a.jsx(Button,{variant:"outline",className:"w-full justify-start",onClick:t,icon:a.jsx(v.Z,{className:"h-4 w-4"}),children:"Invite Team Members"}),a.jsx(Button,{variant:"outline",className:"w-full justify-start",onClick:r,icon:a.jsx(_.Z,{className:"h-4 w-4"}),children:"View Billing & Usage"}),a.jsx(Button,{variant:"outline",className:"w-full justify-start",icon:a.jsx(g.Z,{className:"h-4 w-4"}),children:"Organization Settings"})]})})]})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Subscription & Usage"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current Plan"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.subscription_tier})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Domains Used"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[d.length," / ",e.max_domains]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.member_count," / ",e.max_users]})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(Button,{variant:"outline",onClick:r,children:"Manage Subscription"})})]})]})]})};var T=t(6206),P=t(1264),D=t(9494),Z=t(6303),A=t(9490);let organization_TeamManagement=({organizationId:e,onClose:s})=>{let[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(""),[x,h]=(0,n.useState)("user"),[u,g]=(0,n.useState)(!1),[p,y]=(0,n.useState)(null),[f,b]=(0,n.useState)(""),[w,C]=(0,n.useState)(null),[_,S]=(0,n.useState)(null),[z,q]=(0,n.useState)("checking");(0,n.useEffect)(()=>{loadMembers(),checkConnection()},[e]);let checkConnection=async()=>{try{let e=await k.getHealthStatus();q(e.success?"connected":"disconnected")}catch(e){q("disconnected")}},loadMembers=async()=>{i(!0),C(null);try{let s=await k.getOrganizationMembers(e);if(s.success)r(s.data),q("connected");else{let e="string"==typeof s.message?s.message:"Failed to load team members";C(e),s.message?.includes("Connection failed")&&q("disconnected")}}catch(e){console.error("Failed to load members:",e),C("Failed to load team members. Please check your connection."),q("disconnected")}finally{i(!1)}},handleInviteMember=async()=>{if(!o.trim()){C("Email is required");return}g(!0),C(null);try{let s=await k.inviteOrganizationMember(e,{email:o,role:x});if(s.success)S(`Invitation sent to ${o}`),m(""),h("user"),d(!1);else{let e="string"==typeof s.message?s.message:"Failed to send invitation";C(e)}}catch(e){console.error("Failed to invite member:",e),C("Failed to send invitation")}finally{g(!1)}},handleUpdateRole=async(s,t)=>{try{let a=await k.updateOrganizationMember(e,s,t);if(a.success)r(e=>e.map(e=>e.id===s?{...e,role:t}:e)),y(null),S("Member role updated successfully");else{let e="string"==typeof a.message?a.message:"Failed to update member role";C(e)}}catch(e){console.error("Failed to update member:",e),C("Failed to update member role")}},handleRemoveMember=async(s,t)=>{if(confirm(`Are you sure you want to remove ${t} from the organization?`))try{let t=await k.removeOrganizationMember(e,s);if(t.success)r(e=>e.filter(e=>e.id!==s)),S("Member removed successfully");else{let e="string"==typeof t.message?t.message:"Failed to remove member";C(e)}}catch(e){console.error("Failed to remove member:",e),C("Failed to remove member")}},getRoleColor=e=>{switch(e){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},formatDate=e=>new Date(e).toLocaleDateString();return l?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading team members..."})]})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(v.Z,{className:"h-6 w-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Team Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${"connected"===z?"bg-green-500":"disconnected"===z?"bg-red-500":"bg-yellow-500"}`}),a.jsx("span",{className:"text-xs text-gray-500",children:"connected"===z?"Connected":"disconnected"===z?"Disconnected":"Checking..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(Button,{onClick:()=>d(!0),icon:a.jsx(N.Z,{className:"h-4 w-4"}),children:"Invite Member"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(T.Z,{className:"h-6 w-6"})})]})]}),w&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[a.jsx(j.Z,{className:"h-5 w-5 text-red-600 mr-3"}),a.jsx("span",{className:"text-red-800 flex-1",children:w}),"disconnected"===z&&a.jsx(Button,{size:"sm",variant:"outline",onClick:()=>{C(null),loadMembers(),checkConnection()},className:"mr-2",children:"Retry"}),a.jsx("button",{onClick:()=>C(null),className:"text-red-600 hover:text-red-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),_&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[a.jsx(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),a.jsx("span",{className:"text-green-800",children:_}),a.jsx("button",{onClick:()=>S(null),className:"ml-auto text-green-600 hover:text-green-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[t.map(e=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:(e.full_name||e.username||e.email).charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.full_name||e.username}),a.jsx("p",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getRoleColor(e.role)}`,children:e.role}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Joined ",formatDate(e.joined_at)]}),e.last_active&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Last active ",formatDate(e.last_active)]})]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:p===e.id?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"viewer",children:"Viewer"}),a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx(Button,{size:"sm",onClick:()=>handleUpdateRole(e.id,f),icon:a.jsx(P.Z,{className:"h-3 w-3"}),children:"Save"}),a.jsx(Button,{size:"sm",variant:"outline",onClick:()=>y(null),icon:a.jsx(T.Z,{className:"h-3 w-3"}),children:"Cancel"})]}):a.jsx("div",{className:"flex items-center space-x-2",children:"owner"!==e.role&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(Button,{size:"sm",variant:"outline",onClick:()=>{y(e.id),b(e.role)},icon:a.jsx(D.Z,{className:"h-3 w-3"}),children:"Edit Role"}),a.jsx(Button,{size:"sm",variant:"outline",onClick:()=>handleRemoveMember(e.id,e.email),icon:a.jsx(Z.Z,{className:"h-3 w-3"}),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Remove"})]})})})]})},e.id)),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(v.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No team members"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Invite team members to collaborate on this organization."}),a.jsx(Button,{onClick:()=>d(!0),children:"Invite Your First Member"})]})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Invite Team Member"}),a.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(T.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsx(Input,{type:"email",value:o,onChange:e=>m(e.target.value),placeholder:"colleague@company.com",icon:a.jsx(A.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,a.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"viewer",children:"Viewer - Can view content only"}),a.jsx("option",{value:"user",children:"User - Can view and interact"}),a.jsx("option",{value:"manager",children:"Manager - Can manage content"}),a.jsx("option",{value:"admin",children:"Admin - Full access"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Button,{onClick:handleInviteMember,disabled:u,className:"flex-1",children:u?"Sending...":"Send Invitation"}),a.jsx(Button,{variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})})},organization_OrganizationSettings=({organization:e,onClose:s,onOrganizationUpdate:t})=>{let[r,i]=(0,n.useState)("general"),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[u,p]=(0,n.useState)({name:e.name,description:e.description||"",website:e.website||"",industry:e.industry||""}),handleOrganizationUpdate=async()=>{if(!u.name.trim()){m("Organization name is required");return}d(!0),m(null);try{let s=await k.updateOrganization(e.id,{name:u.name,description:u.description,website:u.website,industry:u.industry});if(s.success)h("Organization updated successfully"),t(s.data);else{let e="string"==typeof s.message?s.message:"Failed to update organization";m(e)}}catch(e){console.error("Failed to update organization:",e),m("Failed to update organization")}finally{d(!1)}},y=[{id:"general",label:"General",icon:a.jsx(l.Z,{className:"h-4 w-4"})},{id:"billing",label:"Billing & Usage",icon:a.jsx(_.Z,{className:"h-4 w-4"})}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(g.Z,{className:"h-6 w-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Organization Settings"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(T.Z,{className:"h-6 w-6"})})]}),o&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[a.jsx(j.Z,{className:"h-5 w-5 text-red-600 mr-3"}),a.jsx("span",{className:"text-red-800",children:o}),a.jsx("button",{onClick:()=>m(null),className:"ml-auto text-red-600 hover:text-red-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),x&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[a.jsx(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),a.jsx("span",{className:"text-green-800",children:x}),a.jsx("button",{onClick:()=>h(null),className:"ml-auto text-green-600 hover:text-green-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:y.map(e=>(0,a.jsxs)("button",{onClick:()=>i(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.icon,a.jsx("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["general"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Organization Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name"}),a.jsx(Input,{type:"text",value:u.name,onChange:e=>p(s=>({...s,name:e.target.value})),placeholder:"Enter organization name",icon:a.jsx(l.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:u.description,onChange:e=>p(s=>({...s,description:e.target.value})),placeholder:"Describe your organization",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),a.jsx(Input,{type:"url",value:u.website,onChange:e=>p(s=>({...s,website:e.target.value})),placeholder:"https://yourcompany.com"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),(0,a.jsxs)("select",{value:u.industry,onChange:e=>p(s=>({...s,industry:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select an industry"}),a.jsx("option",{value:"technology",children:"Technology"}),a.jsx("option",{value:"healthcare",children:"Healthcare"}),a.jsx("option",{value:"finance",children:"Finance"}),a.jsx("option",{value:"education",children:"Education"}),a.jsx("option",{value:"retail",children:"Retail"}),a.jsx("option",{value:"manufacturing",children:"Manufacturing"}),a.jsx("option",{value:"consulting",children:"Consulting"}),a.jsx("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Slug"}),a.jsx(Input,{type:"text",value:e.slug,disabled:!0,className:"bg-gray-50"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Organization slug cannot be changed"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Button,{onClick:handleOrganizationUpdate,disabled:c,children:c?"Updating...":"Update Organization"})})]}),"billing"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Plan"}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 capitalize",children:[e.subscription_tier," Plan"]}),(0,a.jsxs)("p",{className:"text-gray-500",children:["basic"===e.subscription_tier&&"Perfect for small teams","professional"===e.subscription_tier&&"Great for growing businesses","enterprise"===e.subscription_tier&&"Full-featured for large organizations"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["basic"===e.subscription_tier&&"$0","professional"===e.subscription_tier&&"$29","enterprise"===e.subscription_tier&&"$99"]}),a.jsx("p",{className:"text-sm text-gray-500",children:"per month"})]})]}),a.jsx("div",{className:"border-t border-gray-200 pt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Team Members"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.member_count," / ",e.max_users]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Domains"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[e.domain_count," / ",e.max_domains]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Storage"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["0 GB / ",e.max_storage_gb," GB"]})]})]})})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Plans"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(Card,{className:"basic"===e.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Basic"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$0"}),a.jsx("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 10 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"3 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"10 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Basic support"]})]}),a.jsx(Button,{variant:"basic"===e.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"basic"===e.subscription_tier,children:"basic"===e.subscription_tier?"Current Plan":"Downgrade"})]})}),a.jsx(Card,{className:"professional"===e.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Professional"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$29"}),a.jsx("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 50 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"10 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"100 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Priority support"]})]}),a.jsx(Button,{variant:"professional"===e.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"professional"===e.subscription_tier,children:"professional"===e.subscription_tier?"Current Plan":"Upgrade"})]})}),a.jsx(Card,{className:"enterprise"===e.subscription_tier?"ring-2 ring-blue-500":"",children:(0,a.jsxs)(CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Enterprise"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:"$99"}),a.jsx("p",{className:"text-gray-500",children:"per month"})]}),(0,a.jsxs)("ul",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Up to 1000 team members"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"50 domains"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"1000 GB storage"]}),(0,a.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(P.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"24/7 dedicated support"]})]}),a.jsx(Button,{variant:"enterprise"===e.subscription_tier?"outline":"primary",className:"w-full mt-6",disabled:"enterprise"===e.subscription_tier,children:"enterprise"===e.subscription_tier?"Current Plan":"Upgrade"})]})})]})]})]})]})]})})};var z=t(3294),q=t(3250),$=t(8626);let auth_UserProfile=({user:e,onClose:s,onUserUpdate:t})=>{let[r,l]=(0,n.useState)("profile"),[i,c]=(0,n.useState)(!1),[o,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[u,p]=(0,n.useState)("checking"),[y,f]=(0,n.useState)({full_name:e.full_name||"",email:e.email||""}),[b,N]=(0,n.useState)({current_password:"",new_password:"",confirm_password:""}),[v,w]=(0,n.useState)({current:!1,new:!1,confirm:!1}),[C,_]=(0,n.useState)({theme:"light",language:"en",timezone:"UTC",notifications:{email:!0,push:!1,inApp:!0,frequency:"immediate"}});(0,n.useEffect)(()=>{loadUserPreferences(),checkConnection()},[]);let checkConnection=async()=>{try{let e=await k.getHealthStatus();p(e.success?"connected":"disconnected")}catch(e){p("disconnected")}},loadUserPreferences=async()=>{try{let e=await k.getUserPreferences();e.success?(_(s=>({...s,...e.data})),p("connected")):e.message?.includes("Connection failed")&&p("disconnected")}catch(e){console.error("Failed to load preferences:",e),p("disconnected")}},handleProfileUpdate=async()=>{if(!y.full_name.trim()||!y.email.trim()){m("Name and email are required");return}c(!0),m(null);try{let e=await k.updateUserProfile({full_name:y.full_name,email:y.email});if(e.success)h("Profile updated successfully"),t(e.data);else{let s="string"==typeof e.message?e.message:"Failed to update profile";m(s)}}catch(e){console.error("Failed to update profile:",e),m("Failed to update profile")}finally{c(!1)}},handlePasswordChange=async()=>{if(!b.current_password||!b.new_password){m("Current password and new password are required");return}if(b.new_password!==b.confirm_password){m("New passwords do not match");return}if(b.new_password.length<8){m("New password must be at least 8 characters long");return}c(!0),m(null);try{let e=await k.changePassword({current_password:b.current_password,new_password:b.new_password});if(e.success)h("Password changed successfully"),N({current_password:"",new_password:"",confirm_password:""});else{let s="string"==typeof e.message?e.message:"Failed to change password";m(s)}}catch(e){console.error("Failed to change password:",e),m("Failed to change password")}finally{c(!1)}},handlePreferencesUpdate=async()=>{c(!0),m(null);try{let e=await k.updateUserPreferences(C);if(e.success)h("Preferences updated successfully");else{let s="string"==typeof e.message?e.message:"Failed to update preferences";m(s)}}catch(e){console.error("Failed to update preferences:",e),m("Failed to update preferences")}finally{c(!1)}},S=[{id:"profile",label:"Profile",icon:a.jsx(d.Z,{className:"h-4 w-4"})},{id:"security",label:"Security",icon:a.jsx(z.Z,{className:"h-4 w-4"})},{id:"preferences",label:"Preferences",icon:a.jsx(g.Z,{className:"h-4 w-4"})}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:(e.full_name||e.username||e.email).charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Profile"}),a.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(T.Z,{className:"h-6 w-6"})})]}),o&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[a.jsx(j.Z,{className:"h-5 w-5 text-red-600 mr-3"}),a.jsx("span",{className:"text-red-800",children:o}),a.jsx("button",{onClick:()=>m(null),className:"ml-auto text-red-600 hover:text-red-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),x&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[a.jsx(P.Z,{className:"h-5 w-5 text-green-600 mr-3"}),a.jsx("span",{className:"text-green-800",children:x}),a.jsx("button",{onClick:()=>h(null),className:"ml-auto text-green-600 hover:text-green-800",children:a.jsx(T.Z,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:S.map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.icon,a.jsx("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["profile"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx(Input,{type:"text",value:y.full_name,onChange:e=>f(s=>({...s,full_name:e.target.value})),placeholder:"Enter your full name",icon:a.jsx(d.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsx(Input,{type:"email",value:y.email,onChange:e=>f(s=>({...s,email:e.target.value})),placeholder:"Enter your email",icon:a.jsx(A.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx(Input,{type:"text",value:e.username,disabled:!0,className:"bg-gray-50"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username cannot be changed"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Button,{onClick:handleProfileUpdate,disabled:i,children:i?"Updating...":"Update Profile"})})]}),"security"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Input,{type:v.current?"text":"password",value:b.current_password,onChange:e=>N(s=>({...s,current_password:e.target.value})),placeholder:"Enter current password",icon:a.jsx(z.Z,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:()=>w(e=>({...e,current:!e.current})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v.current?a.jsx(q.Z,{className:"h-4 w-4"}):a.jsx($.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Input,{type:v.new?"text":"password",value:b.new_password,onChange:e=>N(s=>({...s,new_password:e.target.value})),placeholder:"Enter new password",icon:a.jsx(z.Z,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:()=>w(e=>({...e,new:!e.new})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v.new?a.jsx(q.Z,{className:"h-4 w-4"}):a.jsx($.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Input,{type:v.confirm?"text":"password",value:b.confirm_password,onChange:e=>N(s=>({...s,confirm_password:e.target.value})),placeholder:"Confirm new password",icon:a.jsx(z.Z,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:()=>w(e=>({...e,confirm:!e.confirm})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v.confirm?a.jsx(q.Z,{className:"h-4 w-4"}):a.jsx($.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• At least 8 characters long"}),a.jsx("li",{children:"• Include uppercase and lowercase letters"}),a.jsx("li",{children:"• Include at least one number"}),a.jsx("li",{children:"• Include at least one special character"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Button,{onClick:handlePasswordChange,disabled:i,children:i?"Changing...":"Change Password"})})]}),"preferences"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Appearance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),a.jsx("div",{className:"flex space-x-3",children:["light","dark","auto"].map(e=>a.jsx("button",{onClick:()=>_(s=>({...s,theme:e})),className:`px-4 py-2 rounded-lg border text-sm font-medium capitalize ${C.theme===e?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,a.jsxs)("select",{value:C.language,onChange:e=>_(s=>({...s,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"de",children:"German"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,a.jsxs)("select",{value:C.timezone,onChange:e=>_(s=>({...s,timezone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"UTC",children:"UTC"}),a.jsx("option",{value:"America/New_York",children:"Eastern Time"}),a.jsx("option",{value:"America/Chicago",children:"Central Time"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx("option",{value:"Europe/London",children:"London"}),a.jsx("option",{value:"Europe/Paris",children:"Paris"}),a.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notifications"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]}),a.jsx("button",{onClick:()=>_(e=>({...e,notifications:{...e.notifications,email:!e.notifications.email}})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${C.notifications.email?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${C.notifications.email?"translate-x-6":"translate-x-1"}`})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"In-App Notifications"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Show notifications in the application"})]}),a.jsx("button",{onClick:()=>_(e=>({...e,notifications:{...e.notifications,inApp:!e.notifications.inApp}})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${C.notifications.inApp?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${C.notifications.inApp?"translate-x-6":"translate-x-1"}`})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notification Frequency"}),(0,a.jsxs)("select",{value:C.notifications.frequency,onChange:e=>_(s=>({...s,notifications:{...s.notifications,frequency:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"immediate",children:"Immediate"}),a.jsx("option",{value:"daily",children:"Daily Digest"}),a.jsx("option",{value:"weekly",children:"Weekly Summary"}),a.jsx("option",{value:"never",children:"Never"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Button,{onClick:handlePreferencesUpdate,disabled:i,children:i?"Saving...":"Save Preferences"})})]})]})]})})};var F=t(6087),I=t(6315),U=t(1814),O=t(2571),E=t(9214),B=t(9803),R=t(7631);let domains_DomainCreationWizard=({organizationId:e,onComplete:s,onCancel:t})=>{let[r,l]=(0,n.useState)(0),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)({currentStep:0,basicConfig:{},dataSourceConfig:{connectors:[],syncSchedule:{frequency:"daily"},dataRetention:{retentionDays:365,autoArchive:!1,autoDelete:!1}},aiConfig:{provider:"ollama",model:"llama2",temperature:.7,maxTokens:2048,confidenceThreshold:.8,enableStreaming:!0},securityConfig:{accessControl:"private",enableAuditLogging:!0,dataEncryption:!0},isValid:!1}),[h,u]=(0,n.useState)(!1),[p,j]=(0,n.useState)([]),[N,w]=(0,n.useState)(!1),[C,_]=(0,n.useState)([""]),[S,D]=(0,n.useState)([]),[Z,A]=(0,n.useState)(!1),z=[{id:"template",title:"Choose Template",description:"Select a pre-built domain template",icon:c.Z},{id:"basic",title:"Basic Configuration",description:"Set up domain name and description",icon:g.Z},{id:"datasources",title:"Data Sources",description:"Connect external data sources",icon:F.Z},{id:"documents",title:"Upload Documents",description:"Add initial documents",icon:I.Z},{id:"ai",title:"AI Configuration",description:"Configure AI settings",icon:U.Z},{id:"permissions",title:"Permissions",description:"Set up access control",icon:v.Z},{id:"testing",title:"Testing",description:"Test your configuration",icon:O.Z},{id:"launch",title:"Launch",description:"Deploy your domain",icon:E.Z}];(0,n.useEffect)(()=>{loadTemplates()},[]);let loadTemplates=async()=>{let e=await k.getDomainTemplates();e.success&&o(e.data)},updateState=e=>{x(s=>({...s,...e}))},createDomain=async()=>{u(!0);try{let t=m.basicConfig.name?.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),a={domain_name:t,display_name:m.basicConfig.name,description:m.basicConfig.description,...m.template?.id&&m.template.id.length>10?{template_id:m.template.id}:{},icon:m.template?.icon||"globe",color:m.template?.color?.includes("green")?"green":m.template?.color?.includes("orange")?"orange":m.template?.color?.includes("purple")?"purple":m.template?.color?.includes("pink")?"pink":(m.template?.color?.includes("blue"),"blue"),settings:{aiConfig:{provider:m.aiConfig?.provider||"ollama",model:m.aiConfig?.model||"llama2",temperature:m.aiConfig?.temperature||.7,maxTokens:m.aiConfig?.maxTokens||2048,confidenceThreshold:m.aiConfig?.confidenceThreshold||.8,enableStreaming:m.aiConfig?.enableStreaming||!0,systemPrompt:m.aiConfig?.systemPrompt||""},searchConfig:{mode:"hybrid",vectorWeight:.7,keywordWeight:.3,maxResults:20,enableFacets:!0,enableSuggestions:!0},dataSourceConfig:{connectors:m.dataSourceConfig?.connectors||[],syncSchedule:m.dataSourceConfig?.syncSchedule||{frequency:"daily"},dataRetention:m.dataSourceConfig?.dataRetention||{retentionDays:365,autoArchive:!1,autoDelete:!1}},securityConfig:{accessControl:m.securityConfig?.accessControl||"private",enableAuditLogging:m.securityConfig?.enableAuditLogging||!0,dataEncryption:m.securityConfig?.dataEncryption||!0},uiConfig:{theme:"light",primaryColor:m.template?.color||"#3B82F6",enableVoiceInput:!1,enableExport:!0}}},n=await k.createDomain(e,a);if(n.success){let e=n.data;if(S.length>0){A(!0);for(let s=0;s<S.length;s++){let t=S[s];try{let s=await k.uploadFile(t,e.id);s.success}catch(e){}}A(!1)}if(C.length>0&&C[0])try{await k.startWebScraping({urls:C.filter(e=>e.trim()),domain:e.id,max_depth:2,max_pages:100,delay:1})}catch(e){}s(e)}}catch(e){console.error("Failed to create domain:",e)}finally{u(!1)}},renderTemplateSelection=()=>{let e=d.length>0?d:[{id:"support",name:"Customer Support",description:"Help desk and customer service knowledge base",icon:"shield",color:"bg-green-100 text-green-600",category:"Support",defaultSettings:{},requiredConnectors:["jira","zendesk"]},{id:"sales",name:"Sales & Marketing",description:"Sales materials, proposals, and marketing content",icon:"trending-up",color:"bg-orange-100 text-orange-600",category:"Sales",defaultSettings:{},requiredConnectors:["hubspot","salesforce"]},{id:"engineering",name:"Engineering",description:"Technical documentation and code repositories",icon:"settings",color:"bg-purple-100 text-purple-600",category:"Engineering",defaultSettings:{},requiredConnectors:["github","confluence"]},{id:"product",name:"Product Management",description:"Product specs, roadmaps, and user research",icon:"activity",color:"bg-pink-100 text-pink-600",category:"Product",defaultSettings:{},requiredConnectors:["jira","confluence"]},{id:"general",name:"General Knowledge",description:"Company-wide information and policies",icon:"globe",color:"bg-blue-100 text-blue-600",category:"General",defaultSettings:{}},{id:"custom",name:"Custom Domain",description:"Start from scratch with custom configuration",icon:"settings",color:"bg-gray-100 text-gray-600",category:"Custom",defaultSettings:{}}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose a Domain Template"}),a.jsx("p",{className:"text-gray-600",children:"Select a pre-built template to get started quickly, or create a custom domain."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,a.jsxs)("div",{onClick:()=>updateState({template:e}),className:`border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 ${m.template?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:[(0,a.jsxs)("div",{className:`w-12 h-12 rounded-lg ${e.color} flex items-center justify-center mb-4`,children:["shield"===e.icon&&a.jsx(y.Z,{className:"h-6 w-6"}),"trending-up"===e.icon&&a.jsx(f.Z,{className:"h-6 w-6"}),"settings"===e.icon&&a.jsx(g.Z,{className:"h-6 w-6"}),"activity"===e.icon&&a.jsx(b.Z,{className:"h-6 w-6"}),"globe"===e.icon&&a.jsx(c.Z,{className:"h-6 w-6"})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),e.requiredConnectors&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.requiredConnectors.map(e=>a.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e},e))})]},e.id))})]})},renderBasicConfiguration=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Basic Configuration"}),a.jsx("p",{className:"text-gray-600",children:"Set up your domain name and description."})]}),(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsx(Input,{label:"Domain Name",placeholder:"e.g., Customer Support",value:m.basicConfig.name||"",onChange:e=>updateState({basicConfig:{...m.basicConfig,name:e.target.value}}),fullWidth:!0}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe what this domain will be used for...",value:m.basicConfig.description||"",onChange:e=>updateState({basicConfig:{...m.basicConfig,description:e.target.value}})})]}),m.template&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Template"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded ${m.template.color} flex items-center justify-center`,children:a.jsx(c.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:m.template.name}),a.jsx("p",{className:"text-sm text-gray-600",children:m.template.description})]})]})]})]})]}),renderDataSources=()=>{let e=[{type:"jira",name:"Jira",description:"Import tickets and issues",icon:a.jsx(g.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"github",name:"GitHub",description:"Import repositories and issues",icon:a.jsx(g.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"confluence",name:"Confluence",description:"Import wiki pages",icon:a.jsx(g.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"hubspot",name:"HubSpot",description:"Import CRM data",icon:a.jsx(f.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"slack",name:"Slack",description:"Import conversations",icon:a.jsx(g.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"google-drive",name:"Google Drive",description:"Import documents and folders",icon:a.jsx(c.Z,{className:"h-5 w-5"}),needsAuth:!0},{type:"web-scraper",name:"Web Scraper",description:"Crawl and index websites",icon:a.jsx(c.Z,{className:"h-5 w-5"}),needsAuth:!1}],toggleConnector=e=>{if("web-scraper"===e){w(!N);return}j(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},updateWebUrl=(e,s)=>{let t=C.map((t,a)=>a===e?s:t);_(t),updateState({...m,webUrls:t})},removeWebUrl=e=>{let s=C.filter((s,t)=>t!==e);_(s),updateState({...m,webUrls:s})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connect Data Sources"}),a.jsx("p",{className:"text-gray-600",children:"Choose which external systems to connect to your domain."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>a.jsx("div",{className:`border rounded-lg p-4 hover:shadow-md transition-all duration-200 cursor-pointer ${p.includes(e.type)||"web-scraper"===e.type&&N?"border-blue-500 bg-blue-50":"border-gray-200"}`,onClick:()=>toggleConnector(e.type),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${p.includes(e.type)||"web-scraper"===e.type&&N?"bg-blue-100":"bg-gray-100"}`,children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.needsAuth&&a.jsx("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded",children:"Auth Required"}),a.jsx(Button,{variant:p.includes(e.type)||"web-scraper"===e.type&&N?"primary":"outline",size:"sm",onClick:s=>{s.stopPropagation(),toggleConnector(e.type)},children:p.includes(e.type)||"web-scraper"===e.type&&N?"Connected":"Connect"})]})]})},e.type))}),N&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Web Scraper Configuration"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URLs to Crawl"}),C.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Input,{placeholder:"https://example.com",value:e,onChange:e=>updateWebUrl(s,e.target.value),fullWidth:!0}),C.length>1&&a.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>removeWebUrl(s),children:a.jsx(T.Z,{className:"h-4 w-4"})})]},s)),(0,a.jsxs)(Button,{variant:"outline",size:"sm",onClick:()=>{let e=[...C,""];_(e),updateState({...m,webUrls:e})},children:[a.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"Add URL"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Depth"}),a.jsx(Input,{type:"number",defaultValue:"2",min:"1",max:"5"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Pages"}),a.jsx(Input,{type:"number",defaultValue:"100",min:"1",max:"1000"})]})]})]})})]}),a.jsx("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Selected: ",p.length+(N?1:0)," data source(s). You can configure authentication and add more sources after creating the domain."]})})]})},renderDocumentUpload=()=>{let removeFile=e=>{let s=S.filter((s,t)=>t!==e);D(s),updateState({...m,uploadedFiles:s})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Initial Documents"}),a.jsx("p",{className:"text-gray-600",children:"Add some documents to get started with your knowledge base."})]}),(0,a.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",onDrop:e=>{e.preventDefault();let s=Array.from(e.dataTransfer.files),t=[...S,...s];D(t),updateState({...m,uploadedFiles:t})},onDragOver:e=>e.preventDefault(),children:[a.jsx(I.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"or click to browse"}),a.jsx("input",{type:"file",multiple:!0,accept:".pdf,.docx,.txt,.md,.json,.csv",onChange:e=>{let s=Array.from(e.target.files||[]),t=[...S,...s];D(t),updateState({...m,uploadedFiles:t})},className:"hidden",id:"file-upload"}),a.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:a.jsx(Button,{variant:"outline",type:"button",children:"Choose Files"})})]}),S.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Selected Files:"}),S.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e.name}),a.jsx("button",{onClick:()=>removeFile(s),className:"text-red-500 hover:text-red-700",children:a.jsx(T.Z,{className:"h-4 w-4"})})]},s))]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[a.jsx("p",{children:"Supported formats: PDF, DOCX, TXT, MD, JSON, CSV"}),a.jsx("p",{children:"Maximum file size: 50MB"})]})]})]})},renderAIConfiguration=()=>{let e=(()=>{let e=m.template?.name.toLowerCase()||"",s={"customer support":{systemPrompt:`You are a helpful customer support AI assistant. Your role is to:
- Provide accurate, empathetic responses to customer inquiries
- Search through support documentation, FAQs, and knowledge base
- Escalate complex issues to human agents when needed
- Maintain a professional, friendly tone
- Always prioritize customer satisfaction and resolution

When you don't know something, admit it and offer to connect them with a human agent.`,examples:["How can I reset my password?","I'm having trouble with my billing","The product isn't working as expected"]},"sales & marketing":{systemPrompt:`You are a sales and marketing AI assistant. Your role is to:
- Help prospects understand product features and benefits
- Provide pricing information and comparisons
- Generate leads and qualify prospects
- Share case studies and success stories
- Support the sales team with research and insights

Always be helpful, informative, and focused on solving customer problems.`,examples:["What are the key features of your product?","Can you show me pricing options?","Do you have case studies for my industry?"]},engineering:{systemPrompt:`You are a technical AI assistant for engineering teams. Your role is to:
- Help with code reviews, debugging, and technical documentation
- Search through technical specs, API docs, and code repositories
- Provide architectural guidance and best practices
- Assist with troubleshooting and problem-solving
- Maintain accuracy and technical precision

Always provide code examples and technical details when relevant.`,examples:["How do I implement authentication in our API?","What's the best practice for error handling?","Can you review this code snippet?"]},"product management":{systemPrompt:`You are a product management AI assistant. Your role is to:
- Help with product roadmap planning and feature prioritization
- Analyze user feedback and market research
- Support product requirement documentation
- Provide insights on user experience and product metrics
- Assist with stakeholder communication

Focus on data-driven insights and strategic thinking.`,examples:["What features should we prioritize next quarter?","How do users feel about the new feature?","What are the key metrics for this product?"]},"general knowledge":{systemPrompt:`You are a general knowledge AI assistant for the organization. Your role is to:
- Answer questions about company policies, procedures, and information
- Help employees find relevant documents and resources
- Provide general assistance with work-related queries
- Maintain confidentiality and professionalism
- Direct users to appropriate departments when needed

Be helpful, accurate, and maintain a professional tone.`,examples:["What's our vacation policy?","Where can I find the employee handbook?","Who should I contact about IT issues?"]}};return s[e]||s["general knowledge"]})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Configuration"}),a.jsx("p",{className:"text-gray-600",children:"Configure how the AI assistant will behave in this domain."})]}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Provider"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:m.aiConfig?.provider||"ollama",onChange:e=>updateState({aiConfig:{...m.aiConfig,provider:e.target.value}}),children:[a.jsx("option",{value:"ollama",children:"Ollama (Local)"}),a.jsx("option",{value:"openai",children:"OpenAI"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),a.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:m.aiConfig?.model||"llama2",onChange:e=>updateState({aiConfig:{...m.aiConfig,model:e.target.value}}),children:m.aiConfig?.provider==="ollama"?(0,a.jsxs)(a.Fragment,{children:[a.jsx("option",{value:"llama2",children:"Llama 2 (7B)"}),a.jsx("option",{value:"llama2:13b",children:"Llama 2 (13B)"}),a.jsx("option",{value:"codellama",children:"Code Llama"}),a.jsx("option",{value:"mistral",children:"Mistral 7B"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),a.jsx("option",{value:"gpt-4",children:"GPT-4"}),a.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Input,{label:"Temperature",type:"number",min:"0",max:"2",step:"0.1",value:m.aiConfig?.temperature||.7,onChange:e=>updateState({aiConfig:{...m.aiConfig,temperature:parseFloat(e.target.value)}}),helperText:"Controls creativity (0 = focused, 2 = creative)",fullWidth:!0}),a.jsx(Input,{label:"Confidence Threshold",type:"number",min:"0",max:"1",step:"0.1",value:m.aiConfig?.confidenceThreshold||.8,onChange:e=>updateState({aiConfig:{...m.aiConfig,confidenceThreshold:parseFloat(e.target.value)}}),helperText:"Minimum confidence for responses",fullWidth:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"System Prompt"}),a.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{updateState({aiConfig:{...m.aiConfig,systemPrompt:e.systemPrompt}})},children:"Use Template Example"})]}),a.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"You are a helpful AI assistant for...",value:m.aiConfig?.systemPrompt||"",onChange:e=>updateState({aiConfig:{...m.aiConfig,systemPrompt:e.target.value}})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)(CardTitle,{children:["Example Queries for ",m.template?.name||"This Domain"]})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-2",children:e.examples.map((e,s)=>a.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:['"',e,'"']})},s))})})]}),m.aiConfig?.provider==="ollama"&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Local Ollama Integration"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Connected to local Ollama instance"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:a.jsx("strong",{children:"Benefits:"})}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[a.jsx("li",{children:"Complete data privacy - all processing stays local"}),a.jsx("li",{children:"No API costs or rate limits"}),a.jsx("li",{children:"Customizable models for your specific domain"}),a.jsx("li",{children:"Works with your RAG system for contextual responses"})]})]}),a.jsx("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"RAG Integration:"})," Your documents will be embedded using the same model for optimal semantic search and retrieval."]})})]})})]})]})]})},renderPermissions=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Control"}),a.jsx("p",{className:"text-gray-600",children:"Configure who can access this domain."})]}),a.jsx("div",{className:"max-w-md mx-auto space-y-4",children:(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Level"}),a.jsx("div",{className:"space-y-2",children:[{value:"public",label:"Public",description:"Anyone in the organization can access"},{value:"private",label:"Private",description:"Only invited users can access"},{value:"restricted",label:"Restricted",description:"Specific roles only"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"accessControl",value:e.value,checked:m.securityConfig?.accessControl===e.value,onChange:e=>updateState({securityConfig:{...m.securityConfig,accessControl:e.target.value}}),className:"mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.label}),a.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.value))})]})})]}),renderTesting=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Test Your Configuration"}),a.jsx("p",{className:"text-gray-600",children:"Make sure everything is working correctly before launching."})]}),(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-4",children:[a.jsx(Card,{children:a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(P.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-gray-900",children:"Domain configuration valid"})]}),a.jsx("span",{className:"text-green-600 text-sm",children:"✓"})]})})}),a.jsx(Card,{children:a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(P.Z,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-gray-900",children:"AI provider connection"})]}),a.jsx("span",{className:"text-green-600 text-sm",children:"✓"})]})})}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Test Query"}),a.jsx(Input,{placeholder:"Ask a test question...",fullWidth:!0}),a.jsx(Button,{className:"mt-2",size:"sm",children:"Test AI Response"})]})]})]}),renderLaunch=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Launch!"}),a.jsx("p",{className:"text-gray-600",children:"Your domain is configured and ready to deploy."})]}),a.jsx("div",{className:"max-w-lg mx-auto",children:a.jsx(Card,{children:a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(E.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m.basicConfig.name}),a.jsx("p",{className:"text-gray-600",children:m.basicConfig.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Template"}),a.jsx("p",{className:"font-medium",children:m.template?.name})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Access"}),a.jsx("p",{className:"font-medium capitalize",children:m.securityConfig?.accessControl})]})]})]})})})})]});return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:z.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${s<r?"bg-blue-600 border-blue-600 text-white":s===r?"border-blue-600 text-blue-600":"border-gray-300 text-gray-400"}`,children:s<r?a.jsx(P.Z,{className:"h-5 w-5"}):a.jsx(e.icon,{className:"h-5 w-5"})}),s<z.length-1&&a.jsx("div",{className:`w-12 h-0.5 mx-2 ${s<r?"bg-blue-600":"bg-gray-300"}`})]},e.id))}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Step ",r+1," of ",z.length,": ",z[r].title]})})]}),a.jsx(Card,{className:"mb-8",children:a.jsx(CardContent,{className:"p-8",children:(()=>{switch(r){case 0:return renderTemplateSelection();case 1:return renderBasicConfiguration();case 2:return renderDataSources();case 3:return renderDocumentUpload();case 4:return renderAIConfiguration();case 5:return renderPermissions();case 6:return renderTesting();case 7:return renderLaunch();default:return null}})()})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(Button,{variant:"outline",onClick:0===r?t:()=>{r>0&&l(r-1)},icon:a.jsx(B.Z,{className:"h-4 w-4"}),children:0===r?"Cancel":"Previous"}),a.jsx("div",{className:"flex space-x-3",children:r===z.length-1?a.jsx(Button,{onClick:createDomain,loading:h,icon:a.jsx(E.Z,{className:"h-4 w-4"}),children:"Launch Domain"}):a.jsx(Button,{onClick:()=>{r<z.length-1&&l(r+1)},disabled:!(()=>{switch(r){case 0:return!!m.template;case 1:return!!(m.basicConfig.name&&m.basicConfig.description);case 2:case 3:case 4:case 5:case 6:case 7:return!0;default:return!1}})(),icon:a.jsx(R.Z,{className:"h-4 w-4"}),children:"Next"})})]})]})};var M=t(9546),L=t(169),W=t(2029),H=t(5574),J=t(8089),G=t(1188),V=t(7634),Y=t(5688);let SourceModal=({source:e,isOpen:s,onClose:t})=>{let[r,l]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1);if(!s)return null;let d=e.full_content&&(e.full_content.endsWith("...")||e.full_content.length<.8*e.content_length||!e.full_content.trim().endsWith(".")&&!e.full_content.trim().endsWith("!")&&!e.full_content.trim().endsWith("?")),loadFullDocument=async()=>{c(!0);try{let s=await fetch(`http://localhost:8001/sources/${e.id}/content?chunk_index=${e.chunk_index}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok){let e=await s.json();l(e.content||e.full_content)}}catch(e){console.error("Failed to load full document content:",e)}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[85vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Confidence: ",e.confidence_score," • ",e.word_count," words • Chunk ",e.chunk_index+1]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(T.Z,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[70vh]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Preview"}),a.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.excerpt||e.preview})]}),e.full_content&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Content (This Chunk)"}),d&&a.jsx("button",{onClick:loadFullDocument,disabled:i,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:i?"Loading...":"Load Full Document"})]}),d&&a.jsx("div",{className:"mb-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:'⚠️ This content appears to be truncated. Click "Load Full Document" to see the complete text.'}),a.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg max-h-96 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:r||e.full_content})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Domain: ",e.domain," • Chunk: ",e.chunk_index+1," • Length: ",e.content_length," chars"]}),e.url&&(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[a.jsx(Y.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Open Source"})]})]})]})})]})})},ui_CitationText=({content:e,sources:s=[],className:t=""})=>{let[r,l]=(0,n.useState)(null),handleCitationClick=e=>{let t=s[e.sourceIndex];t&&l(t)},i=(e=>{let s;let t=[],a=/<cite\s+data-citation-id="([^"]+)"\s+data-source-index="([^"]+)">(\[(\d+)\])<\/cite>/g,n=0;for(;null!==(s=a.exec(e));)s.index>n&&t.push(e.slice(n,s.index)),t.push({citationId:s[1],sourceIndex:parseInt(s[2]),number:s[4]}),n=s.index+s[0].length;return n<e.length&&t.push(e.slice(n)),t})(e);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:t,children:i.map((e,t)=>{if("string"==typeof e)return a.jsx("span",{children:e},t);{let n=s[e.sourceIndex];return(0,a.jsxs)("button",{onClick:()=>handleCitationClick(e),className:"inline-flex items-center text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded px-1 transition-colors cursor-pointer font-medium",title:n?`Click to view: ${n.title}`:"View source",children:["[",e.number,"]"]},t)}})}),r&&a.jsx(SourceModal,{source:r,isOpen:!!r,onClose:()=>l(null)})]})},Modal=({isOpen:e,onClose:s,title:t,size:r="md",children:l,className:i=""})=>((0,n.useEffect)(()=>{let handleEscape=t=>{"Escape"===t.key&&e&&s()};return e&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[e,s]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsxs)("div",{className:`
            relative w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[95vw] h-[95vh]"}[r]} 
            bg-white rounded-lg shadow-xl 
            transform transition-all
            ${"full"===r?"overflow-hidden":"max-h-[90vh] overflow-y-auto"}
            ${i}
          `,onClick:e=>e.stopPropagation(),children:[t&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t}),a.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:a.jsx(T.Z,{className:"h-5 w-5 text-gray-500"})})]}),a.jsx("div",{className:`p-6 ${"full"===r?"overflow-y-auto":""}`,children:l}),!t&&a.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:a.jsx(T.Z,{className:"h-5 w-5 text-gray-500"})})]})})]}):null;var Q=t(1619),K=t(8878);let X=[{type:"jira",name:"Jira",description:"Import tickets, issues, and project data from Atlassian Jira",icon:a.jsx(g.Z,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-600",authType:"api_key",fields:[{key:"base_url",label:"Jira Base URL",type:"url",required:!0,placeholder:"https://yourcompany.atlassian.net"},{key:"username",label:"Username/Email",type:"text",required:!0,placeholder:"your-email@company.com"},{key:"api_token",label:"API Token",type:"password",required:!0,placeholder:"Your Jira API token"},{key:"project_keys",label:"Project Keys",type:"text",required:!1,placeholder:"PROJECT1,PROJECT2 (optional)"}]},{type:"github",name:"GitHub",description:"Import repositories, issues, pull requests, and documentation",icon:a.jsx(Q.Z,{className:"h-5 w-5"}),color:"bg-gray-100 text-gray-600",authType:"api_key",fields:[{key:"access_token",label:"GitHub Token",type:"password",required:!0,placeholder:"ghp_xxxxxxxxxxxx"},{key:"owner",label:"Repository Owner",type:"text",required:!0,placeholder:"username or organization"},{key:"repositories",label:"Repositories",type:"text",required:!1,placeholder:"repo1,repo2 (or leave empty for all)"}]},{type:"confluence",name:"Confluence",description:"Import wiki pages, spaces, and documentation",icon:a.jsx(M.Z,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-600",authType:"api_key",fields:[{key:"base_url",label:"Confluence Base URL",type:"url",required:!0,placeholder:"https://yourcompany.atlassian.net/wiki"},{key:"username",label:"Username/Email",type:"text",required:!0,placeholder:"your-email@company.com"},{key:"api_token",label:"API Token",type:"password",required:!0,placeholder:"Your Confluence API token"},{key:"space_keys",label:"Space Keys",type:"text",required:!1,placeholder:"SPACE1,SPACE2 (optional)"}]},{type:"slack",name:"Slack",description:"Import conversations, channels, and shared files",icon:a.jsx(K.Z,{className:"h-5 w-5"}),color:"bg-green-100 text-green-600",authType:"oauth",fields:[{key:"workspace_url",label:"Slack Workspace URL",type:"url",required:!0,placeholder:"https://yourworkspace.slack.com"}]},{type:"hubspot",name:"HubSpot",description:"Import CRM data, contacts, deals, and marketing content",icon:a.jsx(f.Z,{className:"h-5 w-5"}),color:"bg-orange-100 text-orange-600",authType:"api_key",fields:[{key:"api_key",label:"HubSpot API Key",type:"password",required:!0,placeholder:"Your HubSpot API key"},{key:"portal_id",label:"Portal ID",type:"text",required:!0,placeholder:"Your HubSpot Portal ID"}]},{type:"web_scraper",name:"Web Scraper",description:"Crawl and index websites automatically",icon:a.jsx(c.Z,{className:"h-5 w-5"}),color:"bg-purple-100 text-purple-600",authType:"api_key",fields:[{key:"start_urls",label:"Start URLs",type:"text",required:!0,placeholder:"https://example.com,https://docs.example.com"},{key:"max_depth",label:"Max Crawl Depth",type:"select",required:!0,options:["1","2","3","4","5"]},{key:"max_pages",label:"Max Pages",type:"select",required:!0,options:["50","100","250","500","1000"]},{key:"delay_ms",label:"Delay (ms)",type:"select",required:!0,options:["1000","2000","3000","5000"]},{key:"include_patterns",label:"Include URL Patterns (Regex)",type:"textarea",required:!1,placeholder:".*\\/docs\\/.*\n.*\\/help\\/.*"},{key:"exclude_patterns",label:"Exclude URL Patterns (Regex)",type:"textarea",required:!1,placeholder:".*\\/admin\\/.*\n.*\\.pdf$"},{key:"follow_external",label:"Follow External Links",type:"checkbox",required:!1},{key:"respect_robots",label:"Respect robots.txt",type:"checkbox",required:!1}]}],ConnectorConfigModal=({isOpen:e,onClose:s,domainId:t,onConnectorCreated:r})=>{let[l,i]=(0,n.useState)("select"),[c,d]=(0,n.useState)(null),[o,m]=(0,n.useState)(""),[x,h]=(0,n.useState)({}),[u,g]=(0,n.useState)(!1),[p,y]=(0,n.useState)(null),[f,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{e&&(i("select"),d(null),m(""),h({}),y(null),b(null))},[e]);let handleTemplateSelect=e=>{d(e),m(`${e.name} Integration`),i("configure");let s={};e.fields.forEach(e=>{"select"===e.type&&e.options?s[e.key]=e.options[0]:s[e.key]=""}),h(s)},handleConfigChange=(e,s)=>{h(t=>({...t,[e]:s}))},handleTestConnection=async()=>{if(c){g(!0),y(null),b(null);try{c.type,c.authType;let e=c.fields.filter(e=>e.required),s=e.filter(e=>!x[e.key]);s.length>0?b({success:!1,message:`Missing required fields: ${s.map(e=>e.label).join(", ")}`}):(b({success:!0,message:"Configuration looks good! Ready to create connector."}),i("test"))}catch(s){let e=s instanceof Error?s.message:"Failed to test connection";y(e)}finally{g(!1)}}},handleCreateConnector=async()=>{if(c){g(!0),y(null);try{let e={name:o,connector_type:c.type,auth_config:{type:c.authType,...x},sync_config:{frequency:"daily",schedule:"0 2 * * *",batch_size:100,enable_incremental_sync:!0},mapping_config:{},is_enabled:!0},a=await k.createConnector(t,e);if(a.success&&a.data)r?.(a.data),s();else{let e="string"==typeof a.message?a.message:"Failed to create connector";y(e)}}catch(s){let e=s instanceof Error?s.message:"Failed to create connector";y(e)}finally{g(!1)}}};return a.jsx(Modal,{isOpen:e,onClose:s,title:"Add Data Source Integration",size:"lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[p&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(j.Z,{className:"h-4 w-4 text-red-600"}),a.jsx("p",{className:"text-sm text-red-700",children:p})]})}),"select"===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose Integration Type"}),a.jsx("p",{className:"text-gray-600",children:"Select the type of data source you want to connect."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:X.map(e=>a.jsx(Card,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:border-blue-300",onClick:()=>handleTemplateSelect(e),children:a.jsx(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),a.jsx("div",{className:"mt-2 flex items-center space-x-2",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${"oauth"===e.authType?"bg-green-100 text-green-700":"api_key"===e.authType?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"oauth"===e.authType?"OAuth":"api_key"===e.authType?"API Key":"No Auth"})})]})]})})},e.type))})]}),"configure"===l&&(c?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${c.color}`,children:c.icon}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[c.name," Configuration"]}),a.jsx("p",{className:"text-gray-600",children:c.description})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Integration Name"}),a.jsx(Input,{value:o,onChange:e=>m(e.target.value),placeholder:"Enter a name for this integration"})]}),c.fields.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?a.jsx("select",{value:x[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.options?.map(e=>a.jsx("option",{value:e,children:e},e))}):"textarea"===e.type?a.jsx("textarea",{value:Array.isArray(x[e.key])?x[e.key].join("\n"):x[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value.split("\n").filter(e=>e.trim())),placeholder:e.placeholder,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):"checkbox"===e.type?(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:x[e.key]||!1,onChange:s=>handleConfigChange(e.key,s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["Enable ",e.label]})]}):a.jsx(Input,{type:e.type,value:x[e.key]||"",onChange:s=>handleConfigChange(e.key,s.target.value),placeholder:e.placeholder,required:e.required})]},e.key)),"oauth"===c.authType&&a.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(j.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["OAuth authentication will be set up in the next step. You'll be redirected to ",c.name," to authorize access."]})]})})]})]}):null),"test"===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:`mx-auto w-12 h-12 rounded-full flex items-center justify-center mb-4 ${f?.success?"bg-green-100":"bg-red-100"}`,children:f?.success?a.jsx(P.Z,{className:"h-6 w-6 text-green-600"}):a.jsx(j.Z,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connection Test"}),a.jsx("p",{className:`text-sm ${f?.success?"text-green-700":"text-red-700"}`,children:f?.message})]}),f?.success&&a.jsx("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Sync Configuration"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Frequency:"})," Daily at 2:00 AM"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Batch Size:"})," 100 records"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Incremental Sync:"})," Enabled"]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsx("div",{children:"select"!==l&&a.jsx(Button,{variant:"outline",onClick:()=>{"configure"===l?i("select"):"test"===l&&i("configure")},children:"Back"})}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx(Button,{variant:"outline",onClick:s,children:"Cancel"}),"configure"===l&&a.jsx(Button,{onClick:handleTestConnection,loading:u,disabled:!o||!c,children:"Test Connection"}),"test"===l&&f?.success&&a.jsx(Button,{onClick:handleCreateConnector,loading:u,children:"Create Integration"})]})]})]})})};var ee=t(7552),es=t(2032),et=t(1057),ea=t(644);let en=(0,n.createContext)(void 0),Tabs=({children:e,defaultValue:s,value:t,onValueChange:r,className:l=""})=>{let[i,c]=(0,n.useState)(s);return a.jsx(en.Provider,{value:{activeTab:t??i,setActiveTab:e=>{t||c(e),r?.(e)}},children:a.jsx("div",{className:l,children:e})})},TabsList=({children:e,className:s=""})=>a.jsx("div",{className:`flex border-b border-gray-200 ${s}`,children:e}),TabsTrigger=({children:e,value:s,className:t="",disabled:r=!1})=>{let l=(0,n.useContext)(en);if(!l)throw Error("TabsTrigger must be used within Tabs");let{activeTab:i,setActiveTab:c}=l,d=i===s;return a.jsx("button",{className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors duration-200 ${d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${t}`,onClick:()=>!r&&c(s),disabled:r,type:"button",children:e})},TabsContent=({children:e,value:s,className:t=""})=>{let r=(0,n.useContext)(en);if(!r)throw Error("TabsContent must be used within Tabs");let{activeTab:l}=r;return l!==s?null:a.jsx("div",{className:`mt-4 ${t}`,children:e})},WebScraperManager=({connector:e,domainId:s,onConnectorUpdated:t})=>{let[r,l]=(0,n.useState)("overview"),[i,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),[f,b]=(0,n.useState)(null),[N,v]=(0,n.useState)(null),[_,S]=(0,n.useState)(null),[T,P]=(0,n.useState)(null),[D,Z]=(0,n.useState)({include_patterns:e.authConfig?.include_patterns||[],exclude_patterns:e.authConfig?.exclude_patterns||[],follow_external:e.authConfig?.follow_external||!1,respect_robots:e.authConfig?.respect_robots!==!1,max_file_size:e.authConfig?.max_file_size||5242880,custom_user_agent:e.authConfig?.custom_user_agent||"RAG-Searcher-Bot/1.0",crawl_frequency_hours:e.authConfig?.crawl_frequency_hours||24,content_filters:{min_word_count:e.authConfig?.content_filters?.min_word_count||10,exclude_nav_elements:e.authConfig?.content_filters?.exclude_nav_elements!==!1,exclude_footer_elements:e.authConfig?.content_filters?.exclude_footer_elements!==!1,extract_metadata:e.authConfig?.content_filters?.extract_metadata!==!1}}),[A,z]=(0,n.useState)(null),[q,I]=(0,n.useState)({}),[U,E]=(0,n.useState)(null),[B,R]=(0,n.useState)(null),[M,L]=(0,n.useState)(null),[H,J]=(0,n.useState)(null),[G,V]=(0,n.useState)({intelligent_discovery:!0,real_time_monitoring:!0,quality_threshold:.3,duplicate_threshold:.85,max_depth:e.authConfig?.max_depth||2,max_pages:e.authConfig?.max_pages||100}),[Y,Q]=(0,n.useState)(!1),[K,X]=(0,n.useState)({intelligent_discovery:e.authConfig?.intelligent_discovery!==!1,real_time_monitoring:e.authConfig?.real_time_monitoring!==!1,adaptive_scheduling:e.authConfig?.adaptive_scheduling!==!1,quality_threshold:e.authConfig?.quality_threshold||.3,duplicate_threshold:e.authConfig?.duplicate_threshold||.85,max_file_size:e.authConfig?.max_file_size||5242880,content_filters:{min_word_count:e.authConfig?.content_filters?.min_word_count||10,exclude_nav_elements:e.authConfig?.content_filters?.exclude_nav_elements!==!1,exclude_footer_elements:e.authConfig?.content_filters?.exclude_footer_elements!==!1,extract_metadata:e.authConfig?.content_filters?.extract_metadata!==!1},crawl_frequency_hours:e.authConfig?.crawl_frequency_hours||24,custom_user_agent:e.authConfig?.custom_user_agent||"RAG-Searcher-Bot/1.0"});(0,n.useEffect)(()=>{"stats"===r?loadStats():"content"===r?loadCrawledPages():"performance"===r?(loadPerformanceMetrics(),loadOptimizationSuggestions()):"analytics"===r?loadContentAnalytics():"quality"===r?loadQualityReport():"monitoring"===r?loadCrawlSessionStatus():"duplicates"===r&&loadDuplicateAnalysis()},[r]);let loadPreview=async()=>{d(!0),z(null);try{let t=await k.previewWebScraper(s,e.id);t.success?m(t.data):z(t.message||"Failed to load preview")}catch(e){z(e instanceof Error?e.message:"Failed to load preview")}finally{d(!1)}},loadStats=async()=>{d(!0),z(null);try{let t=await k.getWebScraperStats(s,e.id);t.success?h(t.data):z(t.message||"Failed to load stats")}catch(e){z(e instanceof Error?e.message:"Failed to load stats")}finally{d(!1)}},testConfiguration=async()=>{d(!0),z(null),p(null);try{let t=await k.testWebScraperConfig(s,e.id,{...e.authConfig,...D});t.success?p(t.data):z(t.message||"Configuration test failed")}catch(e){z(e instanceof Error?e.message:"Configuration test failed")}finally{d(!1)}},updateCrawlRules=async()=>{d(!0),z(null);try{let a=await k.updateCrawlRules(s,e.id,D);if(a.success){let s={...e,authConfig:{...e.authConfig,...a.data.updated_rules}};t?.(s),z("Crawl rules updated successfully!"),setTimeout(()=>z(null),3e3)}else z(a.message||"Failed to update crawl rules")}catch(e){z(e instanceof Error?e.message:"Failed to update crawl rules")}finally{d(!1)}},startSync=async()=>{d(!0),z(null);try{let t=await k.syncConnector(s,e.id);t.success?(z("Sync started successfully!"),setTimeout(()=>z(null),3e3),"stats"===r&&setTimeout(()=>loadStats(),2e3)):z(t.message||"Failed to start sync")}catch(e){z(e instanceof Error?e.message:"Failed to start sync")}finally{d(!1)}},loadCrawledPages=async t=>{d(!0),z(null);try{let a=await k.getCrawledPages(s,e.id,{page:t?.page||q.page||1,page_size:20,status_filter:t?.status||q.status,search_query:t?.search||q.search});a.success?b(a.data):z(a.message||"Failed to load crawled pages")}catch(e){z(e instanceof Error?e.message:"Failed to load crawled pages")}finally{d(!1)}},deletePage=async t=>{if(confirm("Are you sure you want to delete this crawled page?")){d(!0);try{let a=await k.deleteCrawledPage(s,e.id,t);a.success?loadCrawledPages():z(a.message||"Failed to delete page")}catch(e){z(e instanceof Error?e.message:"Failed to delete page")}finally{d(!1)}}},handleContentFilterChange=e=>{let s={...q,...e};I(s),loadCrawledPages(s)},loadPerformanceMetrics=async()=>{d(!0);try{let t=await k.getWebScraperPerformanceMetrics(s,e.id);t.success?v(t.data.metrics):z(t.message||"Failed to load performance metrics")}catch(e){z("Failed to load performance metrics")}finally{d(!1)}},loadOptimizationSuggestions=async()=>{d(!0);try{let t=await k.getWebScraperOptimizationSuggestions(s,e.id);t.success?S(t.data):z(t.message||"Failed to load optimization suggestions")}catch(e){z("Failed to load optimization suggestions")}finally{d(!1)}},applyOptimization=async()=>{if(_?.recommended_settings){d(!0);try{let a=await k.applyWebScraperOptimization(s,e.id,{recommended_settings:_.recommended_settings});a.success?(t&&window.location.reload(),await loadOptimizationSuggestions()):z(a.message||"Failed to apply optimization")}catch(e){z("Failed to apply optimization")}finally{d(!1)}}},formatDate=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",loadContentAnalytics=async()=>{d(!0),z(null);try{let t=await k.getWebScraperContentAnalytics(s,e.id);t.success?E(t.data):z(t.message||"Failed to load content analytics")}catch(e){z(e instanceof Error?e.message:"Failed to load content analytics")}finally{d(!1)}},loadCrawlSessionStatus=async()=>{d(!0),z(null);try{let t=await k.getCrawlSessionStatus(s,e.id);t.success?R(t.data):z(t.message||"Failed to load session status")}catch(e){z(e instanceof Error?e.message:"Failed to load session status")}finally{d(!1)}},loadQualityReport=async()=>{d(!0),z(null);try{let t=await k.getContentQualityReport(s,e.id);t.success?L(t.data):z(t.message||"Failed to load quality report")}catch(e){z(e instanceof Error?e.message:"Failed to load quality report")}finally{d(!1)}},loadDuplicateAnalysis=async()=>{d(!0),z(null);try{let t=await k.getDuplicateContentAnalysis(s,e.id);t.success?J(t.data):z(t.message||"Failed to load duplicate analysis")}catch(e){z(e instanceof Error?e.message:"Failed to load duplicate analysis")}finally{d(!1)}},startIntelligentCrawl=async()=>{Q(!0),z(null);try{let t=await k.startIntelligentCrawl(s,e.id,G);if(t.success){let t=setInterval(async()=>{let a=await k.getCrawlSessionStatus(s,e.id);a.success&&(R(a.data),"inactive"===a.data.status&&(clearInterval(t),Q(!1),loadStats(),loadCrawledPages(),loadContentAnalytics()))},5e3);setTimeout(()=>{clearInterval(t),Q(!1)},18e5)}else z(t.message||"Failed to start intelligent crawl"),Q(!1)}catch(e){z(e instanceof Error?e.message:"Failed to start intelligent crawl"),Q(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[A&&(0,a.jsxs)("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${A.includes("successfully")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[A.includes("successfully")?a.jsx(es.Z,{className:"h-5 w-5"}):a.jsx(j.Z,{className:"h-5 w-5"}),a.jsx("span",{children:A})]}),(0,a.jsxs)(Tabs,{value:r,onValueChange:l,className:"w-full",children:[(0,a.jsxs)(TabsList,{className:"grid w-full grid-cols-9",children:[a.jsx(TabsTrigger,{value:"overview",children:"Overview"}),a.jsx(TabsTrigger,{value:"preview",children:"Preview"}),a.jsx(TabsTrigger,{value:"content",children:"Content"}),a.jsx(TabsTrigger,{value:"settings",children:"Settings"}),a.jsx(TabsTrigger,{value:"performance",children:"Performance"}),a.jsx(TabsTrigger,{value:"stats",children:"Analytics"}),a.jsx(TabsTrigger,{value:"quality",children:"Quality"}),a.jsx(TabsTrigger,{value:"monitoring",children:"Monitoring"}),a.jsx(TabsTrigger,{value:"duplicates",children:"Duplicates"})]}),a.jsx(TabsContent,{value:"overview",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Configuration"})]})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Start URLs"}),a.jsx("div",{className:"mt-1 text-sm text-gray-600",children:e.authConfig?.start_urls?.split(",").map((e,s)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(F.Z,{className:"h-3 w-3"}),a.jsx("span",{className:"truncate",children:e.trim()})]},s))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Crawl Settings"}),(0,a.jsxs)("div",{className:"mt-1 space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["Max Depth: ",e.authConfig?.max_depth||2]}),(0,a.jsxs)("div",{children:["Max Pages: ",e.authConfig?.max_pages||100]}),(0,a.jsxs)("div",{children:["Delay: ",e.authConfig?.delay_ms||1e3,"ms"]})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(Button,{onClick:()=>{l("preview"),loadPreview()},className:"flex items-center space-x-2 h-12",variant:"outline",children:[a.jsx($.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Preview Crawl"})]}),(0,a.jsxs)(Button,{onClick:testConfiguration,className:"flex items-center space-x-2 h-12",variant:"outline",disabled:i,children:[a.jsx(O.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Test Config"})]}),(0,a.jsxs)(Button,{onClick:startSync,className:"flex items-center space-x-2 h-12",disabled:i,children:[a.jsx(ee.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Start Crawl"})]})]}),u&&a.jsx(Card,{children:a.jsx(CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:`flex items-center space-x-3 p-4 rounded-lg ${u.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[u.success?a.jsx(es.Z,{className:"h-5 w-5"}):a.jsx(et.Z,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:u.success?"Configuration Valid":"Configuration Error"}),u.result&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[u.result.accessible_urls||0," of ",u.result.total_urls||0," URLs accessible"]})]})]})})})]})}),a.jsx(TabsContent,{value:"preview",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Crawl Preview"}),(0,a.jsxs)(Button,{onClick:loadPreview,disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh Preview"})]})]}),i&&a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.summary.total_discovered}),a.jsx("div",{className:"text-sm text-gray-600",children:"Discovered"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.summary.total_allowed}),a.jsx("div",{className:"text-sm text-gray-600",children:"Allowed"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.summary.total_blocked}),a.jsx("div",{className:"text-sm text-gray-600",children:"Blocked"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.summary.robots_blocked}),a.jsx("div",{className:"text-sm text-gray-600",children:"Robots.txt"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.summary.external_urls}),a.jsx("div",{className:"text-sm text-gray-600",children:"External"})]})})]}),a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(C.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Estimated Crawl"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[o.preview.estimated_pages," pages in ",o.preview.estimated_duration.replace(/(\d+\.?\d*)\s*(seconds?|minutes?|hours?)/,"$1 $2")]})]})]}),(0,a.jsxs)(Button,{onClick:startSync,disabled:i||0===o.summary.total_allowed,className:"flex items-center space-x-2",children:[a.jsx(ee.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Start Crawl"})]})]})})}),(0,a.jsxs)(Tabs,{defaultValue:"allowed",className:"w-full",children:[(0,a.jsxs)(TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(TabsTrigger,{value:"allowed",children:["Allowed URLs (",o.summary.total_allowed,")"]}),(0,a.jsxs)(TabsTrigger,{value:"blocked",children:["Blocked URLs (",o.summary.total_blocked,")"]}),(0,a.jsxs)(TabsTrigger,{value:"robots",children:["Robots.txt (",o.summary.robots_blocked,")"]}),(0,a.jsxs)(TabsTrigger,{value:"external",children:["External (",o.summary.external_urls,")"]})]}),a.jsx(TabsContent,{value:"allowed",className:"mt-4",children:a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:o.preview.allowed_urls.length>0?o.preview.allowed_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(es.Z,{className:"h-3 w-3 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e})]},s)):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No allowed URLs found"})})})})}),a.jsx(TabsContent,{value:"blocked",className:"mt-4",children:a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:o.preview.blocked_urls.length>0?o.preview.blocked_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(et.Z,{className:"h-3 w-3 text-red-600 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e})]},s)):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No blocked URLs"})})})})}),a.jsx(TabsContent,{value:"robots",className:"mt-4",children:a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:o.preview.robots_blocked.length>0?o.preview.robots_blocked.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(y.Z,{className:"h-3 w-3 text-orange-600 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e})]},s)):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No robots.txt restrictions"})})})})}),a.jsx(TabsContent,{value:"external",className:"mt-4",children:a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:o.preview.external_urls.length>0?o.preview.external_urls.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(c.Z,{className:"h-3 w-3 text-purple-600 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e})]},s)):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No external URLs found"})})})})})]})]}),!o&&!i&&a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-8 text-center",children:[a.jsx($.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Preview Available"}),a.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Refresh Preview" to see what URLs would be crawled.'}),a.jsx(Button,{onClick:loadPreview,disabled:i,children:"Load Preview"})]})})]})}),a.jsx(TabsContent,{value:"content",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Crawled Content"}),(0,a.jsxs)(Button,{onClick:()=>loadCrawledPages(),disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),a.jsx(Card,{children:a.jsx(CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Filter"}),(0,a.jsxs)("select",{value:q.status||"",onChange:e=>handleContentFilterChange({status:e.target.value||void 0,page:1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"success",children:"Success"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"skipped",children:"Skipped"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Content"}),a.jsx(Input,{placeholder:"Search URLs, titles, or content...",value:q.search||"",onChange:e=>handleContentFilterChange({search:e.target.value||void 0,page:1}),className:"text-sm"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx(Button,{onClick:()=>{I({}),loadCrawledPages({})},variant:"outline",className:"w-full",children:"Clear Filters"})})]})})}),f&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.pagination.total_count}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.pages.filter(e=>"success"===e.status).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Successful"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.pages.filter(e=>"failed"===e.status).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Math.round(f.pages.reduce((e,s)=>e+s.word_count,0)/f.pages.length)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Words"})]})})]}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-0",children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"border-b bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"URL"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Title"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Words"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Last Crawled"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{children:f.pages.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"max-w-xs",children:a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm truncate block",title:e.url,children:e.url})})}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-sm truncate",title:e.title,children:e.title||"No title"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",title:e.content_preview,children:e.content_preview})]})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"success"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e.status}),e.error_message&&(0,a.jsxs)("div",{className:"text-xs text-red-600 mt-1",title:e.error_message,children:[e.error_message.substring(0,50),"..."]})]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.word_count.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(e.last_crawled).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(Button,{size:"sm",variant:"outline",onClick:()=>deletePage(e.id),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},e.id))})]})}),0===f.pages.length&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No crawled pages found"})]})}),f.pagination.total_pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(f.pagination.current_page-1)*f.pagination.page_size+1," to"," ",Math.min(f.pagination.current_page*f.pagination.page_size,f.pagination.total_count)," of"," ",f.pagination.total_count," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(Button,{size:"sm",variant:"outline",disabled:!f.pagination.has_previous,onClick:()=>handleContentFilterChange({page:f.pagination.current_page-1}),children:"Previous"}),a.jsx(Button,{size:"sm",variant:"outline",disabled:!f.pagination.has_next,onClick:()=>handleContentFilterChange({page:f.pagination.current_page+1}),children:"Next"})]})]})]})]})}),a.jsx(TabsContent,{value:"settings",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Configuration"}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"User Agent & Behavior"})]})}),(0,a.jsxs)(CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom User Agent"}),a.jsx(Input,{value:D.custom_user_agent||"",onChange:e=>Z({...D,custom_user_agent:e.target.value}),placeholder:"RAG-Searcher-Bot/1.0",className:"text-sm"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How the crawler identifies itself to websites"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crawl Frequency (hours)"}),(0,a.jsxs)("select",{value:D.crawl_frequency_hours||24,onChange:e=>Z({...D,crawl_frequency_hours:parseInt(e.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[a.jsx("option",{value:1,children:"Every hour"}),a.jsx("option",{value:6,children:"Every 6 hours"}),a.jsx("option",{value:12,children:"Every 12 hours"}),a.jsx("option",{value:24,children:"Daily"}),a.jsx("option",{value:168,children:"Weekly"})]})]})]})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[a.jsx(W.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Content Filtering"})]})}),(0,a.jsxs)(CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count"}),a.jsx(Input,{type:"number",value:D.content_filters?.min_word_count||10,onChange:e=>Z({...D,content_filters:{...D.content_filters,min_word_count:parseInt(e.target.value)||10}}),className:"text-sm",min:"1",max:"1000"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Skip pages with fewer words than this"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:D.content_filters?.exclude_nav_elements!==!1,onChange:e=>Z({...D,content_filters:{...D.content_filters,exclude_nav_elements:e.target.checked}}),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:"Exclude navigation elements"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:D.content_filters?.exclude_footer_elements!==!1,onChange:e=>Z({...D,content_filters:{...D.content_filters,exclude_footer_elements:e.target.checked}}),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:"Exclude footer elements"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:D.content_filters?.extract_metadata!==!1,onChange:e=>Z({...D,content_filters:{...D.content_filters,extract_metadata:e.target.checked}}),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:"Extract page metadata"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:(0,a.jsxs)(Button,{onClick:updateCrawlRules,disabled:i,className:"flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Save Settings"})]})})]})}),a.jsx(TabsContent,{value:"performance",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Performance & Optimization"}),(0,a.jsxs)(Button,{onClick:()=>{loadPerformanceMetrics(),loadOptimizationSuggestions()},disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),N&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.pages_per_second.toFixed(2)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pages/Second"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(100*N.error_rate).toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Error Rate"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[N.avg_response_time.toFixed(2),"s"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response"})]})})]}),_&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Optimization Suggestions"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Optimization Score:"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[(100*_.optimization_score).toFixed(0),"%"]})]}),_.suggestions.map((e,s)=>(0,a.jsxs)("div",{className:`p-3 rounded border-l-4 ${"high"===e.severity?"border-red-500 bg-red-50":"medium"===e.severity?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"}`,children:[a.jsx("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Recommended: ",e.recommended_action]})]},s)),Object.keys(_.recommended_settings).length>0&&a.jsx(Button,{onClick:applyOptimization,disabled:i,className:"w-full",children:"Apply Optimization Settings"})]})})]})]})}),a.jsx(TabsContent,{value:"stats",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Crawl Statistics"}),(0,a.jsxs)(Button,{onClick:loadStats,disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),i&&a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),x&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.crawl_stats.total_pages}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.crawl_stats.successful_crawls}),a.jsx("div",{className:"text-sm text-gray-600",children:"Successful"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.crawl_stats.failed_crawls}),a.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[x.crawl_stats.success_rate.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{className:"text-base",children:"Content Statistics"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total Words:"}),a.jsx("span",{className:"font-medium",children:x.crawl_stats.total_words.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Avg Words/Page:"}),a.jsx("span",{className:"font-medium",children:Math.round(x.crawl_stats.avg_word_count).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"First Crawl:"}),a.jsx("span",{className:"font-medium",children:formatDate(x.crawl_stats.first_crawl)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Last Crawl:"}),a.jsx("span",{className:"font-medium",children:formatDate(x.crawl_stats.last_crawl)})]})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{className:"text-base",children:"Recent Sync Jobs"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:x.recent_syncs.length>0?x.recent_syncs.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["completed"===e.status?a.jsx(es.Z,{className:"h-4 w-4 text-green-600"}):"failed"===e.status?a.jsx(et.Z,{className:"h-4 w-4 text-red-600"}):a.jsx(C.Z,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium capitalize",children:e.status})]}),a.jsx("div",{className:"text-xs text-gray-500",children:formatDate(e.completed_at||e.started_at)})]},e.id)):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No sync jobs yet"})})})]})]})]}),!x&&!i&&a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-8 text-center",children:[a.jsx(w.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Statistics Available"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Run a crawl to see statistics and performance data."}),a.jsx(Button,{onClick:startSync,disabled:i,children:"Start First Crawl"})]})})]})}),a.jsx(TabsContent,{value:"quality",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Content Quality Report"}),(0,a.jsxs)(Button,{onClick:loadQualityReport,disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M.report.total_pages}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.report.average_quality_score.toFixed(2)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Quality"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:M.report.quality_distribution.excellent}),a.jsx("div",{className:"text-sm text-gray-600",children:"Excellent"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:M.report.quality_distribution.poor}),a.jsx("div",{className:"text-sm text-gray-600",children:"Poor Quality"})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Quality Recommendations"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-3",children:M.report.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[a.jsx("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Action: ",e.action]})]},s))})})]}),M.top_pages&&M.top_pages.length>0&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Top Quality Pages"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-3",children:M.top_pages.slice(0,10).map((e,s)=>a.jsx("div",{className:"p-3 border rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium truncate",children:e.title}),a.jsx("div",{className:"text-sm text-gray-600 truncate",children:e.url})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"font-bold text-green-600",children:e.quality_score.toFixed(2)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.word_count," words"]})]})]})},s))})})]})]})]})}),a.jsx(TabsContent,{value:"monitoring",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Real-Time Monitoring"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(Button,{onClick:loadCrawlSessionStatus,disabled:i,variant:"outline",size:"sm",children:a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`})}),(0,a.jsxs)(Button,{onClick:startIntelligentCrawl,disabled:Y,className:"flex items-center space-x-2",children:[a.jsx(ee.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Start Intelligent Crawl"})]})]})]}),B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)(CardTitle,{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${"active"===B.status?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{children:"Crawl Session Status"})]})}),a.jsx(CardContent,{children:B.session?(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Pages Processed"}),a.jsx("div",{className:"text-lg font-bold",children:B.session.pages_processed})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[(100*B.session.success_rate).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response"}),(0,a.jsxs)("div",{className:"text-lg font-bold",children:[B.session.avg_response_time.toFixed(2),"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Queue Size"}),a.jsx("div",{className:"text-lg font-bold",children:B.session.current_queue_size})]})]}):a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No active crawl session"})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Intelligent Crawl Options"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Threshold"}),a.jsx(Input,{type:"number",step:"0.1",min:"0",max:"1",value:G.quality_threshold,onChange:e=>V({...G,quality_threshold:parseFloat(e.target.value)})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Pages"}),a.jsx(Input,{type:"number",min:"1",max:"1000",value:G.max_pages,onChange:e=>V({...G,max_pages:parseInt(e.target.value)})})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:G.intelligent_discovery,onChange:e=>V({...G,intelligent_discovery:e.target.checked}),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:"Intelligent URL Discovery"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:G.real_time_monitoring,onChange:e=>V({...G,real_time_monitoring:e.target.checked}),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:"Real-Time Monitoring"})]})]})]})]})]})]})}),a.jsx(TabsContent,{value:"duplicates",className:"mt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Duplicate Content Analysis"}),(0,a.jsxs)(Button,{onClick:loadDuplicateAnalysis,disabled:i,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(ea.Z,{className:`h-4 w-4 ${i?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]}),H&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:H.analysis.total_pages}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Pages"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:H.analysis.unique_pages}),a.jsx("div",{className:"text-sm text-gray-600",children:"Unique Pages"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:H.analysis.exact_duplicates}),a.jsx("div",{className:"text-sm text-gray-600",children:"Duplicates"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[(100*H.analysis.duplication_rate).toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Duplication Rate"})]})})]}),H.analysis.duplicate_groups.length>0&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Duplicate Groups"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-4",children:H.analysis.duplicate_groups.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.duplicate_count," similar pages"]}),a.jsx("span",{className:"text-sm text-gray-600",children:e.similarity_type})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.pages.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium truncate",children:e.title}),a.jsx("div",{className:"text-gray-600 truncate",children:e.url})]},s)),e.pages.length>3&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",e.pages.length-3," more"]})]})]},s))})})]}),H.recommendations.length>0&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Recommendations"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-3",children:H.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[a.jsx("div",{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Action: ",e.action]})]},s))})})]})]})]})})]})]})},workspace_DomainWorkspace=({domain:e,onEditDomain:s,onDeleteDomain:t})=>{let[l,i]=(0,n.useState)("knowledge"),[d,o]=(0,n.useState)([]),[m,h]=(0,n.useState)(""),[u,p]=(0,n.useState)([]),[j,N]=(0,n.useState)({documents:!0,conversations:!0,externalData:!0}),[C,_]=(0,n.useState)([]),[S,T]=(0,n.useState)(null),[P,A]=(0,n.useState)(!1),[z,q]=(0,n.useState)(!1),[O,E]=(0,n.useState)(null),[R,Y]=(0,n.useState)(!1),Q=r().useRef(null),[K,X]=(0,n.useState)(!1),[ee,es]=(0,n.useState)(null),[et,ea]=(0,n.useState)([]),[en,er]=(0,n.useState)(""),[el,ei]=(0,n.useState)(!1),[ec,ed]=(0,n.useState)(null),eo=r().useRef(null),em=[{id:"knowledge",label:"Knowledge Base",icon:M.Z,description:"Manage documents and files"},{id:"chat",label:"AI Assistant",icon:L.Z,description:"Chat with domain AI"},{id:"search",label:"Search & Discovery",icon:x.Z,description:"Advanced search capabilities"},{id:"sources",label:"Data Sources",icon:F.Z,description:"External integrations"},{id:"analytics",label:"Analytics",icon:w.Z,description:"Usage insights"},{id:"settings",label:"Settings",icon:g.Z,description:"Domain configuration"}];(0,n.useEffect)(()=>{loadWorkspaceData(),"knowledge"===l&&loadProcessingStatus()},[e.id,l]),(0,n.useEffect)(()=>{eo.current&&(eo.current.scrollTop=eo.current.scrollHeight)},[et]);let loadWorkspaceData=async()=>{A(!0);try{switch(l){case"knowledge":let s=await k.getFiles(e.id);if(s.success){let e=s.data?.files||[],t=e.map(e=>({...e,id:e.id,filename:e.filename,size:e.size_bytes,createdAt:e.upload_date,status:!0===e.processed?"indexed":"error"===e.processing_status?"error":"processing"}));o(t)}break;case"sources":console.log("Loading connectors for domain:",e.id);let t=await k.getConnectors(e.id);if(console.log("Connectors API response:",t),t.success&&t.data&&Array.isArray(t.data.connectors)){let e=t.data.connectors.map(e=>({id:e.id,type:e.connector_type,name:e.name,isEnabled:e.is_enabled,status:e.status,lastSync:e.last_sync_at,authConfig:e.auth_config||{},syncConfig:e.sync_config||{},mappingConfig:e.mapping_config||{}}));console.log("Mapped connectors:",e),_(e)}else console.warn("Failed to load connectors or invalid data format:",t),_([]);break;case"analytics":let a=await k.getAnalytics(e.id);a.success&&T(a.data)}}catch(e){console.error("Failed to load workspace data:",e)}finally{A(!1)}},getStatusColor=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"draft":return"text-yellow-600 bg-yellow-100";case"configuring":return"text-blue-600 bg-blue-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100"}},handleFilterChange=e=>{N(s=>({...s,[e]:!s[e]}))},handleSearch=async()=>{if(m.trim()){A(!0);try{let s=[];j.documents&&s.push("document/file","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","application/json","text/csv","application/x-yaml"),j.conversations&&s.push("chat/user","chat/assistant","conversation/session"),j.externalData&&s.push("api/jira","api/github","api/confluence","web/crawled");let t=await k.search({query:m,domainId:e.id,filters:{documentTypes:s.length>0?s:void 0},mode:"hybrid",limit:20,offset:0});if(t.success&&t.data){let e=t.data;p(e.results||[]),console.log("Search completed:",{query:m,totalFound:e.total_found,resultsCount:e.results?.length||0,searchTime:e.search_time_ms,filters:j})}}catch(e){console.error("Search failed:",e),p([])}finally{A(!1)}}},handleUploadClick=()=>{Q.current?.click()},handleFileSelect=async s=>{let t=Array.from(s.target.files||[]);if(0!==t.length){Y(!0);try{for(let s of t){let t=await k.uploadFile(s,e.id);t.success}await loadWorkspaceData()}catch(e){console.error("File upload failed:",e)}finally{Y(!1),Q.current&&(Q.current.value="")}}},loadProcessingStatus=async()=>{try{let s=await k.getProcessingStatus(e.id);s.success&&es(s.data)}catch(e){console.error("Failed to load processing status:",e)}},handleReindex=async(s=!1)=>{if(confirm(s?"This will reindex ALL documents in this domain, including already processed ones. This may take several minutes. Continue?":"This will reindex unprocessed and failed documents. Continue?")){X(!0);try{let t=await k.reindexFiles(e.id,s);if(t.success)alert(`Successfully queued ${t.data.files_queued} files for reindexing. Estimated completion: ${t.data.estimated_completion}`),await loadWorkspaceData(),await loadProcessingStatus();else{let e="string"==typeof t.message?t.message:"Unknown error occurred";alert(`Reindexing failed: ${e}`)}}catch(e){console.error("Reindexing failed:",e),alert("Reindexing failed. Please try again.")}finally{X(!1)}}},handleSendMessage=async()=>{if(!en.trim()||el)return;let s={id:Date.now().toString(),type:"user",content:en.trim(),timestamp:new Date};ea(e=>[...e,s]),er(""),ei(!0);try{let t=await k.sendMessage({message:s.content,domainId:e.id,sessionId:ec||void 0});if(t.success){let e={id:(Date.now()+1).toString(),type:"assistant",content:t.data.text||"I received your message but couldn't generate a response.",timestamp:new Date,sources:t.data.sources||[],confidence:t.data.confidence||0};ea(s=>[...s,e])}else{let e={id:(Date.now()+1).toString(),type:"assistant",content:`Sorry, I encountered an error: ${"string"==typeof t.message?t.message:"Unknown error occurred"}`,timestamp:new Date};ea(s=>[...s,e])}}catch(s){console.error("Chat error:",s);let e={id:(Date.now()+1).toString(),type:"assistant",content:"Sorry, I'm having trouble connecting right now. Please try again.",timestamp:new Date};ea(s=>[...s,e])}finally{ei(!1)}},handleChatKeyPress=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},formatTimestamp=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),handleConnectorUpdated=e=>{_(s=>s.map(s=>s.id===e.id?e:s))},handleConnectorSelect=e=>{E(e)},handleBackToConnectors=()=>{E(null)},renderKnowledgeBase=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Knowledge Base"}),a.jsx("p",{className:"text-gray-600",children:"Manage documents and files for this domain"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx(Button,{variant:"outline",icon:a.jsx(W.Z,{className:"h-4 w-4"}),children:"Filter"}),a.jsx(Button,{variant:"outline",icon:a.jsx(U.Z,{className:"h-4 w-4"}),onClick:()=>handleReindex(!1),loading:K,children:"Reindex Failed"}),a.jsx(Button,{variant:"outline",icon:a.jsx(b.Z,{className:"h-4 w-4"}),onClick:()=>handleReindex(!0),loading:K,children:"Force Reindex All"}),a.jsx(Button,{icon:a.jsx(I.Z,{className:"h-4 w-4"}),onClick:handleUploadClick,loading:R,children:"Upload Files"})]})]}),ee&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Processing Status"})}),(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Files"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{className:"font-medium",children:ee.files?.total||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Processed:"}),a.jsx("span",{className:"font-medium text-green-600",children:ee.files?.processed||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Pending:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:ee.files?.pending||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Failed:"}),a.jsx("span",{className:"font-medium text-red-600",children:ee.files?.failed||0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Embeddings"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Embeddings:"}),a.jsx("span",{className:"font-medium",children:ee.embeddings?.total_embeddings||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Files with Embeddings:"}),a.jsx("span",{className:"font-medium",children:ee.embeddings?.files_with_embeddings||0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Active Jobs"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Pending Jobs:"}),a.jsx("span",{className:"font-medium text-blue-600",children:ee.processing_jobs?.pending||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Running Jobs:"}),a.jsx("span",{className:"font-medium text-orange-600",children:ee.processing_jobs?.running||0})]})]})]})]}),(ee.processing_jobs?.active||0)>0&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(b.Z,{className:"h-4 w-4 text-blue-600 animate-spin"}),(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:["Processing ",ee.processing_jobs.active," files in the background..."]})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Documents"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>"indexed"===e.status).length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Indexed"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(e=>"processing"===e.status).length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Processing"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(d.reduce((e,s)=>e+(s.size||0),0)/1024/1024),"MB"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Size"})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Documents"})}),a.jsx(CardContent,{children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(M.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Upload your first document to get started."}),a.jsx(Button,{icon:a.jsx(I.Z,{className:"h-4 w-4"}),onClick:handleUploadClick,loading:R,children:"Upload Document"})]}):a.jsx("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(M.Z,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.filename}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[((e.size||0)/1024).toFixed(1),"KB • ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(e.status)}`,children:e.status}),a.jsx(Button,{variant:"ghost",size:"sm",icon:a.jsx($.Z,{className:"h-4 w-4"}),children:"View"}),a.jsx(Button,{variant:"ghost",size:"sm",icon:a.jsx(H.Z,{className:"h-4 w-4"}),children:"Download"}),a.jsx(Button,{variant:"ghost",size:"sm",icon:a.jsx(Z.Z,{className:"h-4 w-4"}),children:"Delete"})]})]},e.id))})})]})]}),renderChat=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Assistant"}),a.jsx("p",{className:"text-gray-600",children:"Chat with the domain-specific AI assistant about your uploaded documents"})]}),ec&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Session: ",ec.slice(0,8),"..."]})]}),a.jsx(Card,{className:"h-96",children:(0,a.jsxs)(CardContent,{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{ref:eo,className:"flex-1 p-4 bg-gray-50 rounded-lg mb-4 overflow-y-auto space-y-3",children:[0===et.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 h-full flex flex-col items-center justify-center",children:[a.jsx(U.Z,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"mb-2",children:"Start a conversation with the AI assistant"}),a.jsx("p",{className:"text-sm",children:"Ask questions about your uploaded documents, search for information, or get help with domain-specific topics."})]}):et.map(e=>a.jsx("div",{className:`flex ${"user"===e.type?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`max-w-xs lg:max-w-md px-3 py-2 rounded-lg ${"user"===e.type?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:["assistant"===e.type?a.jsx(ui_CitationText,{content:e.content,sources:e.sources,className:"text-sm"}):a.jsx("p",{className:"text-sm",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("span",{className:`text-xs ${"user"===e.type?"text-blue-100":"text-gray-500"}`,children:formatTimestamp(e.timestamp)}),"assistant"===e.type&&e.confidence&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"% confident"]})]}),e.sources&&e.sources.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Sources:"}),e.sources.slice(0,2).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["• ",e.title||"Document"]},s))]})]})},e.id)),el&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white border border-gray-200 text-gray-900 max-w-xs lg:max-w-md px-3 py-2 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),a.jsx("span",{className:"text-sm",children:"AI is thinking..."})]})})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(Input,{placeholder:"Ask a question about this domain...",value:en,onChange:e=>er(e.target.value),onKeyPress:handleChatKeyPress,disabled:el,fullWidth:!0}),a.jsx(Button,{onClick:handleSendMessage,disabled:el||!en.trim(),icon:a.jsx(J.Z,{className:"h-4 w-4"}),children:"Send"})]})]})})]}),renderSearch=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Search & Discovery"}),a.jsx("p",{className:"text-gray-600",children:"Advanced search across all domain content"})]})}),a.jsx(Card,{children:(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[a.jsx(Input,{placeholder:"Search documents, conversations, and data...",value:m,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSearch(),fullWidth:!0}),a.jsx(Button,{onClick:handleSearch,loading:P,icon:a.jsx(x.Z,{className:"h-4 w-4"}),children:"Search"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded",checked:j.documents,onChange:()=>handleFilterChange("documents")}),a.jsx("span",{children:"Documents"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded",checked:j.conversations,onChange:()=>handleFilterChange("conversations")}),a.jsx("span",{children:"Conversations"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded",checked:j.externalData,onChange:()=>handleFilterChange("externalData")}),a.jsx("span",{children:"External Data"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>N({documents:!0,conversations:!0,externalData:!0}),children:"Select All"}),a.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>N({documents:!1,conversations:!1,externalData:!1}),children:"Clear All"})]})]})]})}),u.length>0&&(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(CardTitle,{children:["Search Results (",u.length,")"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[a.jsx("span",{children:"Filters:"}),j.documents&&a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Documents"}),j.conversations&&a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Conversations"}),j.externalData&&a.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded",children:"External Data"})]})]})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-4",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 flex-1",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 ml-4",children:[a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.metadata?.contentType||e.type}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:[(100*e.confidence).toFixed(1),"%"]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2 leading-relaxed",children:e.snippet}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{children:["Source: ",e.metadata?.domain||"Unknown"]}),(0,a.jsxs)("span",{children:["Type: ",e.type]}),e.metadata?.chunk_index!==void 0&&(0,a.jsxs)("span",{children:["Chunk: ",e.metadata.chunk_index+1]})]}),(0,a.jsxs)("span",{children:["Score: ",e.score.toFixed(3)]})]})]},`${e.id}-${s}`))})})]}),m&&0===u.length&&!P&&a.jsx(Card,{children:a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms or check if documents are properly indexed in this domain."})]})})})]}),renderDataSources=()=>O?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(Button,{variant:"ghost",onClick:handleBackToConnectors,className:"flex items-center space-x-2",children:[a.jsx(B.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Connectors"})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.name}),(0,a.jsxs)("p",{className:"text-gray-600 capitalize",children:[O.type," Configuration"]})]})]}),"web_scraper"===O.type?a.jsx(WebScraperManager,{connector:O,domainId:e.id,onConnectorUpdated:handleConnectorUpdated}):a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[a.jsx(g.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Not Available"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Advanced configuration for ",O.type," connectors is coming soon."]})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Sources"}),a.jsx("p",{className:"text-gray-600",children:"External integrations and connectors"})]}),a.jsx(Button,{icon:a.jsx(F.Z,{className:"h-4 w-4"}),onClick:()=>q(!0),children:"Add Integration"})]}),P&&a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading integrations..."})]})}),P||C&&0!==C.length?P?null:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(C||[]).map(e=>a.jsx(Card,{hover:!0,children:(0,a.jsxs)(CardContent,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:"web_scraper"===e.type?a.jsx(c.Z,{className:"h-5 w-5"}):"jira"===e.type?a.jsx(G.Z,{className:"h-5 w-5"}):"github"===e.type?a.jsx(V.Z,{className:"h-5 w-5"}):a.jsx(F.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:e.type.replace("_"," ")})]})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(e.status)}`,children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Last sync: ",e.lastSync?new Date(e.lastSync).toLocaleDateString():"Never"]}),a.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>handleConnectorSelect(e),children:"Configure"})]})]})},e.id))}):a.jsx(Card,{children:(0,a.jsxs)(CardContent,{className:"text-center py-8",children:[a.jsx(F.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No integrations yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Connect external data sources to enrich your domain."}),a.jsx(Button,{icon:a.jsx(F.Z,{className:"h-4 w-4"}),onClick:()=>q(!0),children:"Add Your First Integration"})]})})]}),renderAnalytics=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Usage insights and performance metrics"})]})}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalQueries}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Queries"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.activeUsers}),a.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[S.averageResponseTime,"s"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Response Time"})]})}),a.jsx(Card,{padding:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*S.successRate).toFixed(1),"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Top Queries"})}),a.jsx(CardContent,{children:a.jsx("div",{className:"space-y-3",children:S.topQueries?.slice(0,5).map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.query}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.count," queries"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-900",children:[(100*e.averageConfidence).toFixed(1),"%"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"confidence"})]})]},s))})})]})]})]}),renderSettings=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Domain Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure domain behavior and access"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx(Button,{variant:"outline",onClick:s,icon:a.jsx(D.Z,{className:"h-4 w-4"}),children:"Edit Domain"}),a.jsx(Button,{variant:"danger",onClick:t,icon:a.jsx(Z.Z,{className:"h-4 w-4"}),children:"Delete Domain"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Basic Information"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),a.jsx("p",{className:"text-gray-900",children:e.display_name||e.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("p",{className:"text-gray-900",children:e.description})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(e.status)}`,children:e.status})]})]})})]}),(0,a.jsxs)(Card,{children:[a.jsx(CardHeader,{children:a.jsx(CardTitle,{children:"Access Control"})}),a.jsx(CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Visibility"}),a.jsx("p",{className:"text-gray-900",children:e.isPublic?"Public":"Private"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Access Level"}),a.jsx("p",{className:"text-gray-900 capitalize",children:e.settings?.securityConfig?.accessControl||"Not configured"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Audit Logging"}),a.jsx("p",{className:"text-gray-900",children:e.settings?.securityConfig?.enableAuditLogging?"Enabled":"Disabled"})]})]})})]})]})]});return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("input",{ref:Q,type:"file",multiple:!0,accept:".pdf,.docx,.txt,.md,.json,.csv,.yaml,.yml",onChange:handleFileSelect,className:"hidden"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`p-3 rounded-xl ${e.color||"bg-blue-100"}`,children:(()=>{let s={support:a.jsx(y.Z,{className:"h-6 w-6"}),sales:a.jsx(f.Z,{className:"h-6 w-6"}),engineering:a.jsx(g.Z,{className:"h-6 w-6"}),product:a.jsx(b.Z,{className:"h-6 w-6"}),general:a.jsx(c.Z,{className:"h-6 w-6"})},t=(e.domain_name||e.display_name||e.name||"").toLowerCase();return s[t]||a.jsx(c.Z,{className:"h-6 w-6"})})()}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.display_name||e.name}),a.jsx("p",{className:"text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${getStatusColor(e.status)}`,children:e.status}),a.jsx(Button,{variant:"outline",icon:a.jsx(v.Z,{className:"h-4 w-4"}),children:"Manage Access"})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:em.map(e=>(0,a.jsxs)("button",{onClick:()=>i(e.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${l===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))})}),a.jsx("div",{className:"min-h-96",children:(()=>{switch(l){case"knowledge":return renderKnowledgeBase();case"chat":return renderChat();case"search":return renderSearch();case"sources":return renderDataSources();case"analytics":return renderAnalytics();case"settings":return renderSettings();default:return null}})()}),a.jsx(ConnectorConfigModal,{isOpen:z,onClose:()=>q(!1),domainId:e.id,onConnectorCreated:e=>{_(s=>[...s,e]),q(!1)}})]})};function HomePage(){let[e,s]=(0,n.useState)(!1),[t,r]=(0,n.useState)({currentView:"organization",domains:[],sidebarOpen:!0,loading:!1,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1});(0,n.useEffect)(()=>{let e=localStorage.getItem("rag_token");e&&(k.setToken(e),s(!0),loadUserData())},[]),(0,n.useEffect)(()=>{let handleClickOutside=e=>{t.showUserDropdown&&r(e=>({...e,showUserDropdown:!1}))};if(t.showUserDropdown)return document.addEventListener("click",handleClickOutside),()=>document.removeEventListener("click",handleClickOutside)},[t.showUserDropdown]);let loadUserData=async()=>{r(e=>({...e,loading:!0}));try{let e=await k.getCurrentUser();if(e.success){let s=e.data;r(e=>({...e,user:s}));let t=await k.getOrganizations();if(t.success&&t.data.length>0){let e=t.data[0];r(s=>({...s,organization:e}));let s=await k.getDomains(e.id);s.success&&r(e=>({...e,domains:s.data}))}else console.error("No organizations found for user. This may indicate a data issue."),console.log("Organizations response:",t),r(e=>({...e,organization:null,domains:[]}))}}catch(e){console.error("Failed to load user data:",e)}finally{r(e=>({...e,loading:!1}))}},login=async(e,t)=>{try{let a=await k.login(e,t);a.success&&(k.setToken(a.data.access_token),s(!0),loadUserData())}catch(e){console.error("Login error:",e)}},logout=()=>{k.clearToken(),s(!1),r({currentView:"organization",domains:[],sidebarOpen:!0,loading:!1,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1})},handleCreateDomain=()=>{r(e=>({...e,currentView:"create-domain"}))},handleDomainCreated=e=>{r(s=>({...s,domains:[...s.domains,e],currentView:"domain-workspace",selectedDomain:e}))},handleSelectDomain=e=>{r(s=>({...s,currentView:"domain-workspace",selectedDomain:e}))},handleBackToOrganization=()=>{r(e=>({...e,currentView:"organization",selectedDomain:void 0}))},handleManageTeam=()=>{r(e=>({...e,showTeamManagement:!0}))},handleViewBilling=()=>{r(e=>({...e,showOrganizationSettings:!0}))},handleShowUserProfile=()=>{r(e=>({...e,showUserProfile:!0}))},handleCloseModals=()=>{r(e=>({...e,showTeamManagement:!1,showOrganizationSettings:!1,showUserProfile:!1,showUserDropdown:!1}))};return e?t.loading&&!t.user?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:`${t.sidebarOpen?"w-72":"w-20"} bg-white border-r border-gray-200 transition-all duration-300 flex flex-col shadow-sm`,children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(l.Z,{className:"h-6 w-6 text-white"})}),t.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Enterprise RAG"}),a.jsx("p",{className:"text-sm text-gray-500",children:t.organization?.name})]})]})}),a.jsx("nav",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:handleBackToOrganization,className:`w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 group ${"organization"===t.currentView?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[a.jsx(l.Z,{className:"h-5 w-5 flex-shrink-0"}),t.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium",children:"Organization"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Dashboard & Settings"})]})]}),t.sidebarOpen&&(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Domains"}),a.jsx(Button,{variant:"ghost",size:"sm",onClick:handleCreateDomain,className:"h-6 w-6 p-0",children:a.jsx(i.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[t.domains.map(e=>(0,a.jsxs)("button",{onClick:()=>handleSelectDomain(e),className:`w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 group ${t.selectedDomain?.id===e.id?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[a.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${e.color||"bg-gray-100"}`,children:a.jsx(c.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"ml-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium",children:e.display_name||e.name}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.is_active?"active":"inactive"})]})]},e.id)),0===t.domains.length&&(0,a.jsxs)("div",{className:"px-4 py-8 text-center",children:[a.jsx(c.Z,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No domains yet"}),a.jsx(Button,{size:"sm",onClick:handleCreateDomain,children:"Create Domain"})]})]})]})]})}),a.jsx("div",{className:"p-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(d.Z,{className:"h-4 w-4 text-gray-600"})}),t.sidebarOpen&&(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.user?.email}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t.user?.roles?.[0]||"user"})]}),t.sidebarOpen&&a.jsx("button",{onClick:logout,className:"p-1 text-gray-400 hover:text-gray-600",children:a.jsx(o.Z,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>r(e=>({...e,sidebarOpen:!e.sidebarOpen})),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:a.jsx(m.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx("span",{children:t.organization?.name}),t.selectedDomain&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-gray-900 font-medium",children:t.selectedDomain.display_name||t.selectedDomain.name})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(x.Z,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 relative",children:[a.jsx(h.Z,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-100 rounded-lg",onClick:()=>r(e=>({...e,showUserDropdown:!e.showUserDropdown})),children:[a.jsx("div",{className:"h-6 w-6 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(d.Z,{className:"h-3 w-3 text-gray-600"})}),a.jsx("span",{className:"text-sm font-medium",children:t.user?.email||"User"}),a.jsx(u.Z,{className:"h-4 w-4"})]}),t.showUserDropdown&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsxs)("button",{onClick:()=>{handleShowUserProfile(),r(e=>({...e,showUserDropdown:!1}))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Profile Settings"})]}),a.jsx("hr",{className:"my-1"}),(0,a.jsxs)("button",{onClick:()=>{logout(),r(e=>({...e,showUserDropdown:!1}))},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[a.jsx(o.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign Out"})]})]})]})]})]})}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",children:(()=>{if(!t.organization)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(l.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Organization Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You don't seem to be a member of any organization yet."}),a.jsx(Button,{onClick:()=>window.location.reload(),className:"mr-2",children:"Refresh"}),a.jsx(Button,{variant:"ghost",onClick:logout,children:"Sign Out"})]})});switch(t.currentView){case"organization":return a.jsx(organization_OrganizationDashboard,{organization:t.organization,onCreateDomain:handleCreateDomain,onManageTeam:handleManageTeam,onViewBilling:handleViewBilling});case"create-domain":return a.jsx(domains_DomainCreationWizard,{organizationId:t.organization.id,onComplete:handleDomainCreated,onCancel:handleBackToOrganization});case"domain-workspace":return t.selectedDomain?a.jsx(workspace_DomainWorkspace,{domain:t.selectedDomain,onEditDomain:()=>{},onDeleteDomain:()=>{}}):null;default:return null}})()})]}),t.showTeamManagement&&t.organization&&a.jsx(organization_TeamManagement,{organizationId:t.organization.id,onClose:handleCloseModals}),t.showOrganizationSettings&&t.organization&&a.jsx(organization_OrganizationSettings,{organization:t.organization,onClose:handleCloseModals,onOrganizationUpdate:e=>{r(s=>({...s,organization:e}))}}),t.showUserProfile&&t.user&&a.jsx(auth_UserProfile,{user:t.user,onClose:handleCloseModals,onUserUpdate:e=>{r(s=>({...s,user:e}))}})]}):a.jsx(LoginForm,{onLogin:login})}function LoginForm({onLogin:e}){let[s,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),handleSubmit=async t=>{t.preventDefault(),d(!0),h("");try{if(o){let t=await k.register({email:s,password:r});if(t.success)await e(s,r);else{let e="string"==typeof t.message?t.message:"Registration failed";h(e)}}else await e(s,r)}catch(s){console.error("Authentication error:",s);let e=o?"Registration failed":"Login failed";h(e)}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsx(Card,{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(l.Z,{className:"h-6 w-6 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enterprise RAG"}),a.jsx("p",{className:"text-gray-600",children:o?"Create your account to get started":"AI-Powered Knowledge Management"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center",children:o?"Create Account":"Sign In"}),a.jsx("p",{className:"text-sm text-gray-600 text-center mt-1",children:o?"Enter your email and password to create your account":"Enter your credentials to access your workspace"})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[x&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:x})}),a.jsx(Input,{label:o?"Email Address":"Email",type:"email",value:s,onChange:e=>t(e.target.value),placeholder:o?"Enter your work email":"Enter your email",autoComplete:"email",fullWidth:!0,required:!0}),a.jsx(Input,{label:o?"Create Password":"Password",type:"password",value:r,onChange:e=>i(e.target.value),placeholder:o?"Create a secure password":"Enter your password",autoComplete:o?"new-password":"current-password",fullWidth:!0,required:!0}),a.jsx(Button,{type:"submit",loading:c,className:"w-full",children:o?"Create Account":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:()=>{m(!o),h(""),t(""),i("")},className:"text-sm text-blue-600 hover:text-blue-500",children:o?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})})}},8203:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>c});var a=t(5153);let n=(0,a.createProxy)(String.raw`/mnt/lun-demoapps/rag_chat/frontend/src/app/page.tsx`),{__esModule:r,$$typeof:l}=n,i=n.default,c=i}};var s=require("../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[472,90,857],()=>__webpack_exec__(7839));module.exports=t})();